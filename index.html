<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <link rel="icon" type="image/png" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSrIeE-u-7bdFYA-BjzH6YAhFvrM4gR9ixwtw&s">

  <title>ZygoLabs</title>
</head>
<body>
  <script>
    document.write(decodeURIComponent(escape(atob("PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9ImVuIj4KPGhlYWQ+CjxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgo8dGl0bGU+Wnlnb2xhYnM8L3RpdGxlPgoKPGxpbmsgaHJlZj0iaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1Qb3BwaW5zOndnaHRAMzAwOzQwMDs2MDA7NzAwJmRpc3BsYXk9c3dhcCIgcmVsPSJzdHlsZXNoZWV0Ij4KIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgaHJlZj0ic3R5bGVzLmNzcyIgLz4KICA8bGluayBocmVmPSJodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2NzczI/ZmFtaWx5PUludGVyOndnaHRANDAwOzYwMDs4MDAmZGlzcGxheT1zd2FwIiByZWw9InN0eWxlc2hlZXQiPgoKCgoKPHN0eWxlPgoqIHsKICBtYXJnaW46MDsKICBwYWRkaW5nOjA7CiAgYm94LXNpemluZzpib3JkZXItYm94OwogIGZvbnQtZmFtaWx5OidQb3BwaW5zJyxzYW5zLXNlcmlmOwp9Cgpib2R5IHsKICBiYWNrZ3JvdW5kOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IHRvcCBsZWZ0LCMwZTE2MjUsIzA1MDgwZiA3MCUpOwogIGNvbG9yOndoaXRlOwogIG92ZXJmbG93LXg6aGlkZGVuOwp9Ci8qIEdSSUQgQkFDS0dST1VORCAqLwouZ3JpZC1iZyB7CiAgcG9zaXRpb246IGZpeGVkOwogIGluc2V0OiAwOwogIGJhY2tncm91bmQtaW1hZ2U6CiAgICBsaW5lYXItZ3JhZGllbnQocmdiYSgyNTUsIDAsIDAsIDAuMTUpIDFweCwgdHJhbnNwYXJlbnQgMXB4KSwKICAgIGxpbmVhci1ncmFkaWVudCg5MGRlZywgcmdiYSgyNTUsIDAsIDAsIDAuMTUpIDFweCwgdHJhbnNwYXJlbnQgMXB4KTsKICBiYWNrZ3JvdW5kLXNpemU6IDQwcHggNDBweDsKICB0cmFuc2Zvcm06IHBlcnNwZWN0aXZlKDYwMHB4KSByb3RhdGVYKDYwZGVnKTsKICB0cmFuc2Zvcm0tb3JpZ2luOiB0b3A7CiAgei1pbmRleDogLTE7Cn0KCi8qIE5BVkJBUiAqLwoubmF2YmFyIHsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsKICBwYWRkaW5nOiAyNHB4IDgwcHg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKLmxvZ28gewogIGZvbnQtd2VpZ2h0OiA4MDA7CiAgZm9udC1zaXplOiAyMHB4Owp9CgpuYXYgYSB7CiAgbWFyZ2luLXJpZ2h0OiAyOHB4OwogIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICBjb2xvcjogI2FhYTsKICBmb250LXdlaWdodDogNTAwOwogIHRyYW5zaXRpb246IDAuM3M7Cn0KCm5hdiBhOmhvdmVyIHsKICBjb2xvcjogd2hpdGU7Cn0KCi5uYXYtYnRuIHsKICBiYWNrZ3JvdW5kOiAjMmY2Y2ZmOwogIGJvcmRlcjogbm9uZTsKICBwYWRkaW5nOiAxMHB4IDE4cHg7CiAgYm9yZGVyLXJhZGl1czogOHB4OwogIGNvbG9yOiB3aGl0ZTsKICBmb250LXdlaWdodDogNjAwOwogIGN1cnNvcjogcG9pbnRlcjsKICB0cmFuc2l0aW9uOiAwLjNzOwp9CgoubmF2LWJ0bjpob3ZlciB7CiAgYmFja2dyb3VuZDogIzFkNGVkODsKfQoKLyogSEVSTyAqLwouaGVybyB7CiAgZGlzcGxheTogZmxleDsKICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBwYWRkaW5nOiAxMDBweCA4MHB4Owp9CgouaGVyby1sZWZ0IHsKICBtYXgtd2lkdGg6IDU1MHB4Owp9CgouYmFkZ2UgewogIGJhY2tncm91bmQ6IHJnYmEoMjU1LDI1NSwyNTUsMC4wNSk7CiAgcGFkZGluZzogMTBweCAxNnB4OwogIGJvcmRlci1yYWRpdXM6IDMwcHg7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIG1hcmdpbi1ib3R0b206IDMwcHg7CiAgY29sb3I6ICNjY2M7CiAgZm9udC1zaXplOiAxNHB4Owp9CgouaGVybyBoMSB7CiAgZm9udC1zaXplOiA0OHB4OwogIGZvbnQtd2VpZ2h0OiA4MDA7CiAgbWFyZ2luLWJvdHRvbTogMjBweDsKfQoKLmhlcm8gaDEgc3BhbiB7CiAgY29sb3I6ICMyZjZjZmY7Cn0KCi5oZXJvIHAgewogIGNvbG9yOiAjYWFhOwogIG1hcmdpbi1ib3R0b206IDQwcHg7CiAgbGluZS1oZWlnaHQ6IDEuNjsKfQoKLmJ1dHRvbnMgYnV0dG9uIHsKICBwYWRkaW5nOiAxNHB4IDIycHg7CiAgYm9yZGVyLXJhZGl1czogMTBweDsKICBib3JkZXI6IG5vbmU7CiAgbWFyZ2luLXJpZ2h0OiAxNnB4OwogIGZvbnQtd2VpZ2h0OiA2MDA7CiAgY3Vyc29yOiBwb2ludGVyOwp9CgoucHJpbWFyeS1idG4gewogIGJhY2tncm91bmQ6ICMyZjZjZmY7CiAgY29sb3I6IHdoaXRlOwogIGJveC1zaGFkb3c6IDAgMCAyMHB4IHJnYmEoNDcsMTA4LDI1NSwwLjQpOwp9Cgouc2Vjb25kYXJ5LWJ0biB7CiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7CiAgYm9yZGVyOiAxcHggc29saWQgIzQ0NDsKICBjb2xvcjogI2NjYzsKfQoKLyogUklHSFQgU0lERSAqLwouaGVyby1yaWdodCB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHdpZHRoOiA1MDBweDsKICBoZWlnaHQ6IDUwMHB4OwogIGRpc3BsYXk6IGZsZXg7CiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKfQoKLmZhY2UtcGxhY2Vob2xkZXIgewogIHdpZHRoOiAzMjBweDsKICBoZWlnaHQ6IDQyMHB4OwogIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxNDVkZWcsICMxMTEsICMxYTFhMWEpOwogIGJvcmRlci1yYWRpdXM6IDE2MHB4OwogIGRpc3BsYXk6IGZsZXg7CiAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsKICBjb2xvcjogIzQ0NDsKICBmb250LXdlaWdodDogNjAwOwogIGZvbnQtc2l6ZTogMThweDsKICBib3gtc2hhZG93OiAwIDAgNDBweCByZ2JhKDAsMCwwLDAuOCk7Cn0KCi8qIE1FVFJJQyBDQVJEUyAqLwoubWV0cmljLWNhcmQgewogIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICBiYWNrZ3JvdW5kOiByZ2JhKDIwLCAyMCwgMzAsIDAuOSk7CiAgcGFkZGluZzogMTZweCAyMHB4OwogIGJvcmRlci1yYWRpdXM6IDE0cHg7CiAgZm9udC1zaXplOiAxNHB4OwogIGNvbG9yOiAjYmJiOwogIGJhY2tkcm9wLWZpbHRlcjogYmx1cig2cHgpOwogIGJvcmRlcjogMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4wNSk7Cn0KCi5tZXRyaWMtY2FyZCBzdHJvbmcgewogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbi10b3A6IDZweDsKICBmb250LXNpemU6IDIwcHg7CiAgY29sb3I6IHdoaXRlOwp9CgoubWV0cmljLWNhcmQudG9wIHsKICB0b3A6IDQwcHg7CiAgcmlnaHQ6IDA7Cn0KCi5tZXRyaWMtY2FyZC5ib3R0b20gewogIGJvdHRvbTogNjBweDsKICBsZWZ0OiAwOwp9Cgouc2NvcmUgewogIGNvbG9yOiAjZmY0ZDRkOwp9Ci5oZXJvLXJpZ2h0IHsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgd2lkdGg6IDUwMHB4OwogIGhlaWdodDogNTAwcHg7Cn0KCiNmYWNlM2QgewogIHdpZHRoOiAxMDAlOwogIGhlaWdodDogNTAwcHg7Cn0KLyogLS0tLS0tLS0tLSBOQVZCQVIgLS0tLS0tLS0tLSAqLwoKLm5hdmJhciB7CiAgZGlzcGxheTpmbGV4OwogIGp1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuOwogIGFsaWduLWl0ZW1zOmNlbnRlcjsKICBwYWRkaW5nOjE4cHggNjBweDsKICBiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMC40KTsKICBiYWNrZHJvcC1maWx0ZXI6Ymx1cigxMnB4KTsKICBib3JkZXItYm90dG9tOjFweCBzb2xpZCByZ2JhKDI1NSwyMTUsMTIwLDAuMik7Cn0KCi5sb2dvIHsKICBmb250LXNpemU6MjJweDsKICBmb250LXdlaWdodDo3MDA7CiAgbGV0dGVyLXNwYWNpbmc6MnB4OwogIGJhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDkwZGVnLCNmZmQ4NmIsI2ZmYjcwMCk7CiAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6dGV4dDsKICAtd2Via2l0LXRleHQtZmlsbC1jb2xvcjp0cmFuc3BhcmVudDsKfQoKLm5hdi1saW5rcyBhIHsKICBtYXJnaW4tbGVmdDozMHB4OwogIHRleHQtZGVjb3JhdGlvbjpub25lOwogIGNvbG9yOiNjY2M7CiAgZm9udC1zaXplOjE0cHg7CiAgdHJhbnNpdGlvbjowLjNzOwp9CgoubmF2LWxpbmtzIGE6aG92ZXIgewogIGNvbG9yOiNmZmQ4NmI7Cn0KCi8qIC0tLS0tLS0tLS0gSEVSTyAtLS0tLS0tLS0tICovCgouaGVybyB7CiAgdGV4dC1hbGlnbjpjZW50ZXI7CiAgcGFkZGluZzo3MHB4IDIwcHggNDBweDsKfQoKLmhlcm8gaDEgewogIGZvbnQtc2l6ZTo2NHB4OwogIGxldHRlci1zcGFjaW5nOjRweDsKICBiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCg5MGRlZywjZmZmZmZmLCNmZmQ4NmIpOwogIC13ZWJraXQtYmFja2dyb3VuZC1jbGlwOnRleHQ7CiAgLXdlYmtpdC10ZXh0LWZpbGwtY29sb3I6dHJhbnNwYXJlbnQ7Cn0KCi5oZXJvIHAgewogIG1hcmdpbi10b3A6MTVweDsKICBmb250LXNpemU6MThweDsKICBjb2xvcjojYWFhOwp9CgovKiAtLS0tLS0tLS0tIENPTlRBSU5FUiAtLS0tLS0tLS0tICovCgouY29udGFpbmVyIHsKICBtYXgtd2lkdGg6MTMwMHB4OwogIG1hcmdpbjphdXRvOwogIHBhZGRpbmc6MzBweDsKICBkaXNwbGF5OmdyaWQ7CiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOjFmciAxZnI7CiAgZ2FwOjQwcHg7Cn0KCi8qIC0tLS0tLS0tLS0gQ0FSRCAtLS0tLS0tLS0tICovCgouY2FyZCB7CiAgYmFja2dyb3VuZDpyZ2JhKDE1LDI1LDQ1LDAuNik7CiAgYm9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwyMTUsMTIwLDAuMTUpOwogIGJvcmRlci1yYWRpdXM6MjBweDsKICBwYWRkaW5nOjMwcHg7CiAgYmFja2Ryb3AtZmlsdGVyOmJsdXIoMjBweCk7CiAgYm94LXNoYWRvdzowIDAgNDBweCByZ2JhKDI1NSwyMTUsMTIwLDAuMDUpOwogIHRyYW5zaXRpb246MC40czsKfQoKLmNhcmQ6aG92ZXIgewogIGJveC1zaGFkb3c6MCAwIDYwcHggcmdiYSgyNTUsMjE1LDEyMCwwLjIpOwogIHRyYW5zZm9ybTp0cmFuc2xhdGVZKC01cHgpOwp9CgovKiAtLS0tLS0tLS0tIEJVVFRPTlMgLS0tLS0tLS0tLSAqLwoKYnV0dG9uIHsKICBwYWRkaW5nOjEycHggMjhweDsKICBiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCg5MGRlZywjZmZkODZiLCNmZmI3MDApOwogIGNvbG9yOmJsYWNrOwogIGJvcmRlcjpub25lOwogIGJvcmRlci1yYWRpdXM6MTJweDsKICBmb250LXdlaWdodDo2MDA7CiAgY3Vyc29yOnBvaW50ZXI7CiAgdHJhbnNpdGlvbjowLjNzOwogIG1hcmdpbi10b3A6MTVweDsKfQoKYnV0dG9uOmhvdmVyIHsKICB0cmFuc2Zvcm06c2NhbGUoMS4wNSk7CiAgYm94LXNoYWRvdzowIDAgMjBweCByZ2JhKDI1NSwyMTUsMTIwLDAuNik7Cn0KCi8qIC0tLS0tLS0tLS0gQ0FOVkFTIC0tLS0tLS0tLS0gKi8KCmNhbnZhcyB7CiAgd2lkdGg6MTAwJTsKICBib3JkZXItcmFkaXVzOjE1cHg7CiAgbWFyZ2luLXRvcDoyMHB4OwogIGJveC1zaGFkb3c6MCAwIDI1cHggcmdiYSgwLDAsMCwwLjUpOwp9CgovKiAtLS0tLS0tLS0tIElOU1RSVUNUSU9OUyAtLS0tLS0tLS0tICovCgojaW5zdHJ1Y3Rpb25zIHsKICBtYXJnaW4tdG9wOjIwcHg7CiAgcGFkZGluZzoxNXB4OwogIGJvcmRlci1yYWRpdXM6MTJweDsKICBiYWNrZ3JvdW5kOnJnYmEoMjU1LDE4MywwLDAuMSk7CiAgYm9yZGVyOjFweCBzb2xpZCByZ2JhKDI1NSwxODMsMCwwLjQpOwogIGNvbG9yOiNmZmQ4NmI7Cn0KCi8qIC0tLS0tLS0tLS0gUFJPR1JFU1MgLS0tLS0tLS0tLSAqLwoKI3Byb2dyZXNzIHsKICBoZWlnaHQ6OHB4OwogIGJhY2tncm91bmQ6IzFhMWYyZTsKICBib3JkZXItcmFkaXVzOjVweDsKICBtYXJnaW4tdG9wOjE1cHg7Cn0KCiNwcm9ncmVzcy1iYXIgewogIGhlaWdodDoxMDAlOwogIHdpZHRoOjAlOwogIGJvcmRlci1yYWRpdXM6NXB4OwogIGJhY2tncm91bmQ6bGluZWFyLWdyYWRpZW50KDkwZGVnLCNmZmQ4NmIsI2ZmYjcwMCk7CiAgdHJhbnNpdGlvbjp3aWR0aCAwLjRzOwp9CgovKiAtLS0tLS0tLS0tIE1FVFJJQ1MgLS0tLS0tLS0tLSAqLwoKI21ldHJpY3MgewogIG1hcmdpbi10b3A6MjBweDsKICBmb250LXNpemU6MTRweDsKICBsaW5lLWhlaWdodDoxLjg7Cn0KCi5zbGlkZXItYm94IHsKICBtYXJnaW46MThweCAwOwp9Cgouc2xpZGVyLXRyYWNrIHsKICBwb3NpdGlvbjpyZWxhdGl2ZTsKICBoZWlnaHQ6MTRweDsKICBib3JkZXItcmFkaXVzOjhweDsKICBvdmVyZmxvdzpoaWRkZW47CiAgYmFja2dyb3VuZDojMWExZjJlOwp9Cgouc2xpZGVyLXRyYWNrIGRpdjpmaXJzdC1jaGlsZCB7CiAgaGVpZ2h0OjEwMCU7CiAgYmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsI2ZmM2QzZCwjZmZhZTAwLCMwMGZmNmEsI2ZmYWUwMCwjZmYzZDNkKTsKfQoKLnNsaWRlci1tYXJrZXIgewogIHBvc2l0aW9uOmFic29sdXRlOwogIHRvcDotOHB4OwogIHdpZHRoOjZweDsKICBoZWlnaHQ6MzBweDsKICBiYWNrZ3JvdW5kOndoaXRlOwogIGJvcmRlci1yYWRpdXM6M3B4OwogIGJveC1zaGFkb3c6MCAwIDEwcHggI2ZmZDg2YjsKfQppbnB1dFt0eXBlPSJyYW5nZSJdOjotd2Via2l0LXNsaWRlci10aHVtYiB7CiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lOwogIGJhY2tncm91bmQ6IHdoaXRlOwogIGhlaWdodDogMTZweDsKICB3aWR0aDogMTZweDsKICBib3JkZXItcmFkaXVzOiA1MCU7CiAgY3Vyc29yOiBwb2ludGVyOwp9Ci8qIC0tLS0tLS0tLS0gU1VSR0VSWSBQQU5FTCAtLS0tLS0tLS0tICovCgojc3VyZ2VyeSB7CiAgbWFyZ2luLXRvcDoyNXB4OwogIHBhZGRpbmc6MjBweDsKICBib3JkZXItcmFkaXVzOjE1cHg7CiAgYmFja2dyb3VuZDpyZ2JhKDEwMCwwLDAsMC4zKTsKICBib3JkZXI6MXB4IHNvbGlkIHJnYmEoMjU1LDAsMCwwLjUpOwogIGJveC1zaGFkb3c6MCAwIDIwcHggcmdiYSgyNTUsMCwwLDAuMik7Cn0KCi8qIC0tLS0tLS0tLS0gRk9PVEVSIC0tLS0tLS0tLS0gKi8KCi5mb290ZXIgewogIHRleHQtYWxpZ246Y2VudGVyOwogIHBhZGRpbmc6NDBweDsKICBjb2xvcjojNTU1OwogIGZvbnQtc2l6ZToxM3B4Owp9CgpAbWVkaWEobWF4LXdpZHRoOjkwMHB4KXsKICAuY29udGFpbmVyIHsKICAgIGdyaWQtdGVtcGxhdGUtY29sdW1uczoxZnI7CiAgfQogIC5oZXJvIGgxIHsKICAgIGZvbnQtc2l6ZTo0MnB4OwogIH0KfQouYXBwZWFsLWNvbnRhaW5lciB7CiAgYmFja2dyb3VuZDogIzExMTsKICBwYWRkaW5nOiAyMHB4OwogIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgbWFyZ2luLXRvcDogMjBweDsKfQoKLmFwcGVhbC1jb250YWluZXIgaW5wdXQsCi5hcHBlYWwtY29udGFpbmVyIHNlbGVjdCB7CiAgd2lkdGg6IDEwMCU7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKICBwYWRkaW5nOiA4cHg7CiAgYm9yZGVyLXJhZGl1czogNnB4Owp9Ci5tZXRyaWMtbW9kYWwgewogIHBvc2l0aW9uOiBmaXhlZDsKICB0b3A6MDsKICBsZWZ0OjA7CiAgd2lkdGg6MTAwJTsKICBoZWlnaHQ6MTAwJTsKICBkaXNwbGF5Om5vbmU7CiAganVzdGlmeS1jb250ZW50OmNlbnRlcjsKICBhbGlnbi1pdGVtczpjZW50ZXI7CiAgYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuODUpOwogIGJhY2tkcm9wLWZpbHRlcjpibHVyKDhweCk7CiAgei1pbmRleDo5OTk5Owp9CgoubWV0cmljLWJveCB7CiAgd2lkdGg6NjUwcHg7CiAgbWF4LXdpZHRoOjk1JTsKICBiYWNrZ3JvdW5kOnJnYmEoMTUsMjUsNDUsMC45NSk7CiAgYm9yZGVyLXJhZGl1czoyMHB4OwogIHBhZGRpbmc6MzBweDsKICBib3JkZXI6MXB4IHNvbGlkIHJnYmEoMjU1LDIxNSwxMjAsMC40KTsKICBib3gtc2hhZG93OjAgMCA1MHB4IHJnYmEoMjU1LDIxNSwxMjAsMC4zKTsKfQoKI2Nsb3NlTWV0cmljIHsKICBmbG9hdDpyaWdodDsKICBmb250LXNpemU6MjZweDsKICBjdXJzb3I6cG9pbnRlcjsKICBjb2xvcjojZmZkODZiOwp9CgoKCkBrZXlmcmFtZXMgZmFkZUluIHsKICBmcm9tIHsgb3BhY2l0eTogMDsgdHJhbnNmb3JtOiBzY2FsZSgwLjk1KTsgfQogIHRvIHsgb3BhY2l0eTogMTsgdHJhbnNmb3JtOiBzY2FsZSgxKTsgfQp9Cgouc2Vjb25kYXJ5U2NvcmVzIHsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogMjBweDsKICBtYXJnaW4tdG9wOiAyMHB4Owp9Cgouc2NvcmVDYXJkIHsKICBmbGV4OiAxOwogIGJhY2tncm91bmQ6ICMxMTE7CiAgcGFkZGluZzogMTVweDsKICBib3JkZXItcmFkaXVzOiAxMnB4OwogIHRleHQtYWxpZ246IGNlbnRlcjsKICBjb2xvcjogI2ZmZjsKfQoKLnNjb3JlQ2FyZCBoMyB7CiAgbWFyZ2luLWJvdHRvbTogOHB4OwogIGZvbnQtc2l6ZTogMTZweDsKICBvcGFjaXR5OiAwLjg7Cn0KCi5zY29yZUNhcmQgc3BhbiB7CiAgZm9udC1zaXplOiAyOHB4OwogIGZvbnQtd2VpZ2h0OiBib2xkOwogIGRpc3BsYXk6IGJsb2NrOwogIG1hcmdpbi1ib3R0b206IDEwcHg7Cn0KCi5taW5pQmFyIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDhweDsKICBiYWNrZ3JvdW5kOiAjMjIyOwogIGJvcmRlci1yYWRpdXM6IDZweDsKICBvdmVyZmxvdzogaGlkZGVuOwp9CgoubWluaUZpbGwgewogIGhlaWdodDogMTAwJTsKICB3aWR0aDogMCU7CiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMDBmZjg4LCAjMDBjY2ZmKTsKICB0cmFuc2l0aW9uOiB3aWR0aCAwLjRzIGVhc2U7Cn0KLnJhdGluZy1jYXJkIHsKICBiYWNrZ3JvdW5kOiAjMTExOwogIGNvbG9yOiAjZmZmOwogIHdpZHRoOiAzODBweDsKICBwYWRkaW5nOiAyNXB4OwogIGJvcmRlci1yYWRpdXM6IDIwcHg7CiAgZm9udC1mYW1pbHk6ICdJbnRlcicsIHNhbnMtc2VyaWY7CiAgYm94LXNoYWRvdzogMCAwIDMwcHggcmdiYSgwLDAsMCwwLjYpOwp9CgoudGl0bGUgewogIHRleHQtYWxpZ246IGNlbnRlcjsKICBtYXJnaW4tYm90dG9tOiAyMHB4OwogIGZvbnQtd2VpZ2h0OiA2MDA7Cn0KCi50b3Atcm93IHsKICBkaXNwbGF5OiBmbGV4OwogIGdhcDogMTVweDsKICBtYXJnaW4tYm90dG9tOiAyMHB4Owp9CgouZ3JpZCB7CiAgZGlzcGxheTogZ3JpZDsKICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IDFmciAxZnI7CiAgZ2FwOiAxNXB4Owp9CgoucmF0aW5nLWJveCB7CiAgYmFja2dyb3VuZDogIzFhMWExYTsKICBwYWRkaW5nOiAxNXB4OwogIGJvcmRlci1yYWRpdXM6IDE0cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9CgoucmF0aW5nLWJveC5sYXJnZSB7CiAgZmxleDogMTsKfQoKLmxhYmVsIHsKICBmb250LXNpemU6IDAuODVyZW07CiAgb3BhY2l0eTogMC43Owp9Cgouc2NvcmUgewogIGRpc3BsYXk6IGJsb2NrOwogIGZvbnQtc2l6ZTogMS44cmVtOwogIGZvbnQtd2VpZ2h0OiA3MDA7CiAgbWFyZ2luOiA4cHggMDsKfQoKLmJhciB7CiAgaGVpZ2h0OiA2cHg7CiAgYmFja2dyb3VuZDogIzJhMmEyYTsKICBib3JkZXItcmFkaXVzOiA2cHg7CiAgb3ZlcmZsb3c6IGhpZGRlbjsKfQoKLmZpbGwgewogIGhlaWdodDogMTAwJTsKICB3aWR0aDogMCU7CiAgYmFja2dyb3VuZDogbGluZWFyLWdyYWRpZW50KDkwZGVnLCAjMDBmZjk5LCAjMDBjY2ZmKTsKICBib3JkZXItcmFkaXVzOiA2cHg7CiAgdHJhbnNpdGlvbjogd2lkdGggMC42cyBlYXNlOwp9Cjwvc3R5bGU+CjwvaGVhZD4KCjxib2R5PgoKICA8ZGl2IGlkPSJob21lMTEiPgogIDxkaXYgY2xhc3M9ImdyaWQtYmciPjwvZGl2PgoKICA8aGVhZGVyIGNsYXNzPSJuYXZiYXIiPgogICAgPGRpdiBjbGFzcz0ibG9nbyI+Wnlnb0xhYnM8L2Rpdj4KICAgIDxkaXYgY2xhc3M9InZpc2l0b3ItY291bnRlciI+CiAgVXNlcnMgUmF0ZWQ6IDxzcGFuIGlkPSJ2aXNpdG9yQ291bnQiPkxvYWRpbmcuLi48L3NwYW4+CjwvZGl2PgogICAgPG5hdj4KICAgICAgPGJ1dHRvbiBjbGFzcz0ibmF2LWJ0biJpZD0iaG9tZUJ0biI+R2V0IFN0YXJ0ZWQ8L2J1dHRvbj4KICAgIDwvbmF2PgogIDwvaGVhZGVyPgoKICA8c2VjdGlvbiBjbGFzcz0iaGVybyI+CgogICAgPGRpdiBjbGFzcz0iaGVyby1sZWZ0Ij4KCiAgICAgIDxkaXYgY2xhc3M9ImJhZGdlIj4KICAgICAgICDirZAgNC44LzUg4oCiIDEwMDArIHVzZXJzCiAgICAgIDwvZGl2PgoKICAgICAgPGgxPgogICAgICAgIEJlYXV0eSBDYW4gPHNwYW4+QmUgTWVhc3VyZWQ8L3NwYW4+CiAgICAgIDwvaDE+CgogICAgICA8cD4KICAgICAgICAzMCsgYWR2YW5jZWQgZmFjaWFsIG1ldHJpY3Mgd2l0aCBwZXJzb25hbGl6ZWQgaW1wcm92ZW1lbnQgaW5zaWdodHMKICAgICAgICBhbmQgaGFybW9ueSBzY29yaW5nLgogICAgICA8L3A+CgogICAgICA8ZGl2IGNsYXNzPSJidXR0b25zIj4KICAgICAgICA8YnV0dG9uIGNsYXNzPSJwcmltYXJ5LWJ0biJpZD0iaG9tZUJ0bjIiPlN0YXJ0IEFuYWx5c2lzIOKGkjwvYnV0dG9uPgogICAgICAgIAogICAgICA8L2Rpdj4KCiAgICA8L2Rpdj4KCiAgPGRpdiBjbGFzcz0iaGVyby1yaWdodCI+CiA8aW1nIHNyYz0iaHR0cHM6Ly9pLnBpbmltZy5jb20vNzM2eC8yYy9kMi9iYi8yY2QyYmJhNjY0ZjkyM2UwMzdmNzc1ZDQyNTlmMGQ5Ny5qcGcic3R5bGU9J3dpZHRoOjIwMHB4O2hlaWdodDozNTBweDsnPgoKICA8ZGl2IGNsYXNzPSJtZXRyaWMtY2FyZCB0b3AiPgogICAgSGFybW9ueQogICAgPHN0cm9uZz44NyU8L3N0cm9uZz4KICA8L2Rpdj4KCiAgPGRpdiBjbGFzcz0ibWV0cmljLWNhcmQgYm90dG9tIj4KICAgIE92ZXJhbGwgU2NvcmUKICAgIDxzdHJvbmcgY2xhc3M9InNjb3JlIj44LjE1IC8gMTA8L3N0cm9uZz4KICA8L2Rpdj4KPC9kaXY+CgogIDwvc2VjdGlvbj4KICA8L2Rpdj4KCiAgPGRpdiBpZD0iaG9tZTIic3R5bGU9J2Rpc3BsYXk6bm9uZTsnPgo8ZGl2IGNsYXNzPSJuYXZiYXIiPgogIDxkaXYgY2xhc3M9ImxvZ28iPlpZR08gTEFCUzwvZGl2PgogIDxkaXYgY2xhc3M9Im5hdi1saW5rcyI+CiAgICA8YSBocmVmPSIjIj5MZWFkZXJib2FyZDwvYT4KICAgIDxhIGhyZWY9IiMiPkZvcnVtPC9hPgogICAgPGEgaHJlZj0iIyI+TG9naW48L2E+CiAgPC9kaXY+CjwvZGl2PgoKPGRpdiBjbGFzcz0iaGVybyI+CiAgPGgxIHN0eWxlPSJwb3NpdGlvbjpyZWxhdGl2ZTtsZWZ0OjExMHB4OyI+WllHTyBMQUJTPC9oMT4KICA8cD5UaGUgTW9zdCBBY2N1cmF0ZSBGYWNlIFJhdGluZyBTeXN0ZW08L3A+CjwvZGl2PgoKPGRpdiBjbGFzcz0iY29udGFpbmVyIj4KCiAgPGRpdiBjbGFzcz0iY2FyZCI+CiAgICA8aDI+VXBsb2FkICYgTWFyazwvaDI+CiAgICA8aW5wdXQgdHlwZT0iZmlsZSIgaWQ9InVwbG9hZCIgYWNjZXB0PSJpbWFnZS8qIj4KICAgIDxidXR0b24gaWQ9InN0YXJ0QnRuIiBzdHlsZT0iZGlzcGxheTpub25lOyI+U3RhcnQgUGxhY2luZyBQb2ludHM8L2J1dHRvbj4KICAgIDxjYW52YXMgaWQ9ImNhbnZhcyI+PC9jYW52YXM+CiAgICA8ZGl2IGlkPSJpbnN0cnVjdGlvbnMiPlVwbG9hZCB5b3VyIHBpYyBmaXJzdC4uLjwvZGl2PgogICAgPGRpdiBpZD0icHJvZ3Jlc3MiPjxkaXYgaWQ9InByb2dyZXNzLWJhciI+PC9kaXY+PC9kaXY+CiAgICA8YnV0dG9uIGlkPSJ1bmRvQnRuIiBzdHlsZT0iZGlzcGxheTpub25lOyI+VW5kbyBMYXN0PC9idXR0b24+CiAgICA8YnV0dG9uIGlkPSJyZXNldEJ0biIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPlJlc2V0PC9idXR0b24+CgogICA8Y2VudGVyPiA8ZGl2IGNsYXNzPSJyYXRpbmctY2FyZCI+CgogIDxoMiBjbGFzcz0idGl0bGUiPllvdXIgUmF0aW5nczwvaDI+CgogIDxkaXYgY2xhc3M9InRvcC1yb3ciPgogICAgPGRpdiBjbGFzcz0icmF0aW5nLWJveCBsYXJnZSI+CiAgICAgIDxzcGFuIGNsYXNzPSJsYWJlbCI+T3ZlcmFsbDwvc3Bhbj4KICAgICAgPHNwYW4gY2xhc3M9InNjb3JlIiBpZD0ib3ZlcmFsbENhcmQiPjwvc3Bhbj4KICAgICAgPGRpdiBjbGFzcz0iYmFyIj48ZGl2IGNsYXNzPSJmaWxsIiBpZD0ib3ZlcmFsbEJhciI+PC9kaXY+PC9kaXY+CiAgICA8L2Rpdj4KCiAgIAogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJncmlkIj4KICAgIDxkaXYgY2xhc3M9InJhdGluZy1ib3giPgogICAgICA8c3BhbiBjbGFzcz0ibGFiZWwiPkphd2xpbmU8L3NwYW4+CiAgICAgIDxzcGFuIGNsYXNzPSJzY29yZSIgaWQ9Imphd2xpbmVDYXJkIj48L3NwYW4+CiAgICAgIDxkaXYgY2xhc3M9ImJhciI+PGRpdiBjbGFzcz0iZmlsbCIgaWQ9Imphd2xpbmVCYXIiPjwvZGl2PjwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0icmF0aW5nLWJveCJzdHlsZT0nZGlzcGxheTpub25lOyc+CiAgICAgIDxzcGFuIGNsYXNzPSJsYWJlbCI+Q2hlZWtib25lczwvc3Bhbj4KICAgICAgPHNwYW4gY2xhc3M9InNjb3JlIiBpZD0iY2hlZWtib25lQ2FyZCI+PC9zcGFuPgogICAgICA8ZGl2IGNsYXNzPSJiYXIiPjxkaXYgY2xhc3M9ImZpbGwiIGlkPSJjaGVla2JvbmVCYXIiPjwvZGl2PjwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0icmF0aW5nLWJveCI+CiAgICAgIDxzcGFuIGNsYXNzPSJsYWJlbCI+SGFybW9ueTwvc3Bhbj4KICAgICAgPHNwYW4gY2xhc3M9InNjb3JlIiBpZD0iaGFybW9ueUNhcmQiPjwvc3Bhbj4KICAgICAgPGRpdiBjbGFzcz0iYmFyIj48ZGl2IGNsYXNzPSJmaWxsIiBpZD0iaGFybW9ueUJhcjIiPjwvZGl2PjwvZGl2PgogICAgPC9kaXY+CgogICAgPGNlbnRlcj48ZGl2IGNsYXNzPSJyYXRpbmctYm94InN0eWxlPSdsZWZ0OjgwcHg7cG9zaXRpb246IHJlbGF0aXZlOyc+CiAgICAgIDxzcGFuIGNsYXNzPSJsYWJlbCI+TWFzY3VsaW5pdHk8L3NwYW4+CiAgICAgIDxzcGFuIGNsYXNzPSJzY29yZSIgaWQ9Im1hc2N1bGluaXR5Q2FyZCI+PC9zcGFuPgogICAgICA8ZGl2IGNsYXNzPSJiYXIiPjxkaXYgY2xhc3M9ImZpbGwiIGlkPSJtYXNjdWxpbml0eUJhciI+PC9kaXY+PC9kaXY+CiAgICA8L2Rpdj48L2NlbnRlcj4KICA8L2Rpdj4KCjwvZGl2PjwvY2VudGVyPgogIDwvZGl2PgogCgogIDxkaXYgY2xhc3M9ImNhcmQiPgogICAgPGgyPkFuYWx5c2lzIFJlc3VsdHM8L2gyPgogICAgPGRpdiBpZD0ibWV0cmljcyI+PC9kaXY+CiAgICA8Y2FudmFzIGlkPSJncmFwaCIgd2lkdGg9IjY1MCIgaGVpZ2h0PSIyNjAiPjwvY2FudmFzPgogICAgPGRpdiBpZD0ic3VyZ2VyeSI+PC9kaXY+CiAgICAKICA8L2Rpdj4KCiAgPGRpdiBjbGFzcz0ic2Vjb25kYXJ5U2NvcmVzIj4KCiAgPGRpdiBjbGFzcz0ic2NvcmVDYXJkIj4KICAgIDxoMz5IYXJtb255PC9oMz4KICAgIDxzcGFuIGlkPSJoYXJtb255U2NvcmUiPjAuMDA8L3NwYW4+CiAgICA8ZGl2IGNsYXNzPSJtaW5pQmFyIj4KICAgICAgPGRpdiBpZD0iaGFybW9ueUJhciIgY2xhc3M9Im1pbmlGaWxsIj48L2Rpdj4KICAgIDwvZGl2PgogIDwvZGl2PgoKICA8ZGl2IGNsYXNzPSJzY29yZUNhcmQiPgogICAgPGgzPkRpbW9ycGhpc208L2gzPgogICAgPHNwYW4gaWQ9ImRpbW9ycGhpc21TY29yZSI+MC4wMDwvc3Bhbj4KICAgIDxkaXYgY2xhc3M9Im1pbmlCYXIiPgogICAgICA8ZGl2IGlkPSJkaW1vcnBoaXNtQmFyIiBjbGFzcz0ibWluaUZpbGwiPjwvZGl2PgogICAgPC9kaXY+CiAgPC9kaXY+CgogIDxkaXYgY2xhc3M9InNjb3JlQ2FyZCI+CiAgICA8aDM+QW5ndWxhcml0eTwvaDM+CiAgICA8c3BhbiBpZD0iYW5ndWxhcml0eVNjb3JlIj4wLjAwPC9zcGFuPgogICAgPGRpdiBjbGFzcz0ibWluaUJhciI+CiAgICAgIDxkaXYgaWQ9ImFuZ3VsYXJpdHlCYXIiIGNsYXNzPSJtaW5pRmlsbCI+PC9kaXY+CiAgICA8L2Rpdj4KICA8L2Rpdj4KCjwvZGl2PgoKCiAgIDxkaXYgY2xhc3M9ImFwcGVhbC1jb250YWluZXIiPgogIDxoMz5Ub3RhbCBBcHBlYWwgQ2FsY3VsYXRvcjwvaDM+CgogIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJoZWlnaHRJbnB1dCIgcGxhY2Vob2xkZXI9IkhlaWdodCAoY20pIiAvPgoKICA8c2VsZWN0IGlkPSJib2R5VHlwZSI+CiAgICA8b3B0aW9uIHZhbHVlPSJza2lubnkiPlNraW5ueTwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0ibGVhbiI+TGVhbjwvb3B0aW9uPgogICAgPG9wdGlvbiB2YWx1ZT0iYWVzdGhldGljIj5BZXN0aGV0aWM8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9InN1cGVybXVzY3VsYXIiPlN1cGVyIE11c2N1bGFyPC9vcHRpb24+CiAgICA8b3B0aW9uIHZhbHVlPSJza2lubnlmYXQiPlNraW5ueSBGYXQ8L29wdGlvbj4KICAgIDxvcHRpb24gdmFsdWU9ImZhdCI+RmF0PC9vcHRpb24+CiAgPC9zZWxlY3Q+CgogIDxpbnB1dCB0eXBlPSJudW1iZXIiIGlkPSJzb2NpYWxJbnB1dCIgcGxhY2Vob2xkZXI9IlNvY2lhbCBTa2lsbHMgKDEtMTApIiBtaW49IjEiIG1heD0iMTAiIC8+CiAgPGlucHV0IHR5cGU9Im51bWJlciIgaWQ9Im1vbmV5SW5wdXQiIHBsYWNlaG9sZGVyPSJNb25leSBMZXZlbCAoMS0xMCkiIG1pbj0iMSIgbWF4PSIxMCIgLz4KCiAgPGJ1dHRvbiBvbmNsaWNrPSJjYWxjdWxhdGVBcHBlYWwoKSI+Q2FsY3VsYXRlIEFwcGVhbDwvYnV0dG9uPgoKICA8ZGl2IGlkPSJhcHBlYWxSZXN1bHQiPjwvZGl2Pgo8L2Rpdj4KPGRpdiBpZD0ibWV0cmljTW9kYWwiIGNsYXNzPSJtZXRyaWMtbW9kYWwiPgogIDxkaXYgY2xhc3M9Im1ldHJpYy1ib3giPgogICAgPHNwYW4gaWQ9ImNsb3NlTWV0cmljIj4mdGltZXM7PC9zcGFuPgogICAgPGgyIGlkPSJtZXRyaWNUaXRsZSI+PC9oMj4KICAgIDxwIGlkPSJtZXRyaWNWYWx1ZSI+PC9wPgogICAgPHAgaWQ9Im1ldHJpY1BlcmNlbnRpbGUiPjwvcD4KICAgIDxkaXYgaWQ9Im1ldHJpY0Rlc2NyaXB0aW9uIj48L2Rpdj4KICAgIDxjYW52YXMgaWQ9Im1pbmlHcmFwaCIgd2lkdGg9IjQ1MCIgaGVpZ2h0PSIyMjAiPjwvY2FudmFzPgogIDwvZGl2Pgo8L2Rpdj4KPC9kaXY+CjwvZGl2PgoKPGRpdiBjbGFzcz0iZm9vdGVyIj4KwqkgMjAyNiBjaGFuZ2Zyb21tdW1iYWkKPC9kaXY+CgoKIAogCgoKIDxzY3JpcHQgdHlwZT0ibW9kdWxlIj4KCgppbXBvcnQgKiBhcyBUSFJFRSBmcm9tICdodHRwczovL2Nkbi5za3lwYWNrLmRldi90aHJlZUAwLjE1OC4wJzsKaW1wb3J0IHsgT3JiaXRDb250cm9scyB9IGZyb20gJ2h0dHBzOi8vY2RuLnNreXBhY2suZGV2L3RocmVlQDAuMTU4LjAvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMuanMnOwoKY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZhY2UzZCIpOwoKY29uc3Qgc2NlbmUgPSBuZXcgVEhSRUUuU2NlbmUoKTsKCmNvbnN0IGNhbWVyYSA9IG5ldyBUSFJFRS5QZXJzcGVjdGl2ZUNhbWVyYSgKICA0MCwKICBjb250YWluZXIuY2xpZW50V2lkdGggLyBjb250YWluZXIuY2xpZW50SGVpZ2h0LAogIDAuMSwKICAxMDAwCik7CmNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMCwgNik7Cgpjb25zdCByZW5kZXJlciA9IG5ldyBUSFJFRS5XZWJHTFJlbmRlcmVyKHsgYW50aWFsaWFzOiB0cnVlLCBhbHBoYTogdHJ1ZSB9KTsKcmVuZGVyZXIuc2V0U2l6ZShjb250YWluZXIuY2xpZW50V2lkdGgsIGNvbnRhaW5lci5jbGllbnRIZWlnaHQpOwpyZW5kZXJlci5zZXRQaXhlbFJhdGlvKHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvKTsKY29udGFpbmVyLmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpOwoKLyogQ09OVFJPTFMgKi8KY29uc3QgY29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyhjYW1lcmEsIHJlbmRlcmVyLmRvbUVsZW1lbnQpOwpjb250cm9scy5lbmFibGVab29tID0gZmFsc2U7CmNvbnRyb2xzLmVuYWJsZVBhbiA9IGZhbHNlOwpjb250cm9scy5lbmFibGVEYW1waW5nID0gdHJ1ZTsKCi8qIExJR0hUSU5HICovCnNjZW5lLmFkZChuZXcgVEhSRUUuQW1iaWVudExpZ2h0KDB4ZmZmZmZmLCAwLjYpKTsKCmNvbnN0IGtleUxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDEuMik7CmtleUxpZ2h0LnBvc2l0aW9uLnNldCg1LCA1LCA1KTsKc2NlbmUuYWRkKGtleUxpZ2h0KTsKCmNvbnN0IHJpbUxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHg2NmFhZmYsIDEpOwpyaW1MaWdodC5wb3NpdGlvbi5zZXQoLTUsIDIsIC01KTsKc2NlbmUuYWRkKHJpbUxpZ2h0KTsKCi8qIEhFQUQgR1JPVVAgKi8KY29uc3QgaGVhZEdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7CnNjZW5lLmFkZChoZWFkR3JvdXApOwoKLyogSEVBRCAqLwpjb25zdCBoZWFkR2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMS41LCAxMjgsIDEyOCk7CmNvbnN0IGhlYWRNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7CiAgY29sb3I6IDB4ZTJjMmE2LAogIHJvdWdobmVzczogMC41LAogIG1ldGFsbmVzczogMC4xCn0pOwoKY29uc3QgaGVhZCA9IG5ldyBUSFJFRS5NZXNoKGhlYWRHZW9tZXRyeSwgaGVhZE1hdGVyaWFsKTsKaGVhZC5zY2FsZS5zZXQoMSwgMS4yLCAxKTsKaGVhZEdyb3VwLmFkZChoZWFkKTsKCi8qIEpBVyAqLwpjb25zdCBqYXdHZW9tZXRyeSA9IG5ldyBUSFJFRS5Cb3hHZW9tZXRyeSgxLjYsIDEsIDEuNik7CmNvbnN0IGphdyA9IG5ldyBUSFJFRS5NZXNoKGphd0dlb21ldHJ5LCBoZWFkTWF0ZXJpYWwpOwpqYXcucG9zaXRpb24ueSA9IC0xLjU7Cmphdy5zY2FsZS5zZXQoMC44LCAwLjgsIDAuOCk7CmhlYWRHcm91cC5hZGQoamF3KTsKCi8qIEVZRVMgKi8KY29uc3QgZXllR2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC4xOCwgNjQsIDY0KTsKY29uc3QgZXllTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBjb2xvcjogMHhmZmZmZmYgfSk7Cgpjb25zdCBsZWZ0RXllID0gbmV3IFRIUkVFLk1lc2goZXllR2VvbWV0cnksIGV5ZU1hdGVyaWFsKTsKbGVmdEV5ZS5wb3NpdGlvbi5zZXQoLTAuNSwgMC4zLCAxLjI1KTsKCmNvbnN0IHJpZ2h0RXllID0gbmV3IFRIUkVFLk1lc2goZXllR2VvbWV0cnksIGV5ZU1hdGVyaWFsKTsKcmlnaHRFeWUucG9zaXRpb24uc2V0KDAuNSwgMC4zLCAxLjI1KTsKCmhlYWRHcm91cC5hZGQobGVmdEV5ZSk7CmhlYWRHcm91cC5hZGQocmlnaHRFeWUpOwoKLyogUFVQSUxTICovCmNvbnN0IHB1cGlsR2VvbWV0cnkgPSBuZXcgVEhSRUUuU3BoZXJlR2VvbWV0cnkoMC4wOCwgMzIsIDMyKTsKY29uc3QgcHVwaWxNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7IGNvbG9yOiAweDExMTExMSB9KTsKCmNvbnN0IGxlZnRQdXBpbCA9IG5ldyBUSFJFRS5NZXNoKHB1cGlsR2VvbWV0cnksIHB1cGlsTWF0ZXJpYWwpOwpsZWZ0UHVwaWwucG9zaXRpb24uc2V0KC0wLjUsIDAuMywgMS40KTsKCmNvbnN0IHJpZ2h0UHVwaWwgPSBuZXcgVEhSRUUuTWVzaChwdXBpbEdlb21ldHJ5LCBwdXBpbE1hdGVyaWFsKTsKcmlnaHRQdXBpbC5wb3NpdGlvbi5zZXQoMC41LCAwLjMsIDEuNCk7CgpoZWFkR3JvdXAuYWRkKGxlZnRQdXBpbCk7CmhlYWRHcm91cC5hZGQocmlnaHRQdXBpbCk7CgovKiBOT1NFICovCmNvbnN0IG5vc2VHZW9tZXRyeSA9IG5ldyBUSFJFRS5Db25lR2VvbWV0cnkoMC4xNSwgMC41LCAzMik7CmNvbnN0IG5vc2UgPSBuZXcgVEhSRUUuTWVzaChub3NlR2VvbWV0cnksIGhlYWRNYXRlcmlhbCk7Cm5vc2UucG9zaXRpb24uc2V0KDAsIDAsIDEuNCk7Cm5vc2Uucm90YXRpb24ueCA9IE1hdGguUEk7CmhlYWRHcm91cC5hZGQobm9zZSk7CgovKiBNT1VUSCAqLwpjb25zdCBtb3V0aEdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDAuOCwgMC4wOCwgMC4wNSk7CmNvbnN0IG1vdXRoTWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBjb2xvcjogMHg2NjMzMzMgfSk7Cgpjb25zdCBtb3V0aCA9IG5ldyBUSFJFRS5NZXNoKG1vdXRoR2VvbWV0cnksIG1vdXRoTWF0ZXJpYWwpOwptb3V0aC5wb3NpdGlvbi5zZXQoMCwgLTAuNiwgMS4zNSk7CmhlYWRHcm91cC5hZGQobW91dGgpOwoKLyogTE9PUCAqLwpmdW5jdGlvbiBhbmltYXRlKCkgewogIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltYXRlKTsKICBjb250cm9scy51cGRhdGUoKTsKICByZW5kZXJlci5yZW5kZXIoc2NlbmUsIGNhbWVyYSk7Cn0KYW5pbWF0ZSgpOwoKLyogUkVTUE9OU0lWRSAqLwp3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigicmVzaXplIiwgKCkgPT4gewogIGNhbWVyYS5hc3BlY3QgPSBjb250YWluZXIuY2xpZW50V2lkdGggLyBjb250YWluZXIuY2xpZW50SGVpZ2h0OwogIGNhbWVyYS51cGRhdGVQcm9qZWN0aW9uTWF0cml4KCk7CiAgcmVuZGVyZXIuc2V0U2l6ZShjb250YWluZXIuY2xpZW50V2lkdGgsIGNvbnRhaW5lci5jbGllbnRIZWlnaHQpOwp9KTsKCgo8L3NjcmlwdD4KCgo8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9AbWVkaWFwaXBlL2NhbWVyYV91dGlscy9jYW1lcmFfdXRpbHMuanMiPjwvc2NyaXB0Pgo8c2NyaXB0IHNyYz0iaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L25wbS9AbWVkaWFwaXBlL2NvbnRyb2xfdXRpbHMvY29udHJvbF91dGlscy5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0BtZWRpYXBpcGUvZHJhd2luZ191dGlscy9kcmF3aW5nX3V0aWxzLmpzIj48L3NjcmlwdD4KPHNjcmlwdCBzcmM9Imh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQG1lZGlhcGlwZS9mYWNlX21lc2gvZmFjZV9tZXNoLmpzIj48L3NjcmlwdD4KCjxzY3JpcHQgc3JjPSJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzguMC4xL2ZpcmViYXNlLWFwcC5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJodHRwczovL3d3dy5nc3RhdGljLmNvbS9maXJlYmFzZWpzLzguMC4xL2ZpcmViYXNlLWZpcmVzdG9yZS5qcyI+PC9zY3JpcHQ+Cgo8c2NyaXB0PgovKiBQQVNURSBZT1VSIEVYQUNUIE9SSUdJTkFMIEpTIEhFUkUgKi8KLyogRE8gTk9UIE1PRElGWSBBTllUSElORyBJTlNJREUgKi8KICB2YXIgZmlyZWJhc2VDb25maWcgPSB7CiBhcGlLZXk6ICJBSXphU3lEWmF2RmF1R3hVV05kYkU2R2k4clAzSUN1dmRIMm1zcjgiLAogIGF1dGhEb21haW46ICJ6eWdvbGFicy5maXJlYmFzZWFwcC5jb20iLAogIHByb2plY3RJZDogInp5Z29sYWJzIiwKICBzdG9yYWdlQnVja2V0OiAienlnb2xhYnMuZmlyZWJhc2VzdG9yYWdlLmFwcCIsCiAgbWVzc2FnaW5nU2VuZGVySWQ6ICI4MjU2MzA1ODMxNDgiLAogIGFwcElkOiAiMTo4MjU2MzA1ODMxNDg6d2ViOmIzYWU0YmEwNWJiYTJlODBmZjZiNDkiLAogIG1lYXN1cmVtZW50SWQ6ICJHLVNMMVJCWEpSQlEiCiAgfTsKCiAgZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7CiAgdmFyIGRiID0gZmlyZWJhc2UuZmlyZXN0b3JlKCk7CiB2YXIgY291bnRlclJlZiA9IGRiLmNvbGxlY3Rpb24oInNpdGVTdGF0cyIpLmRvYygidmlzaXRzIik7CgogIGZ1bmN0aW9uIHVwZGF0ZUNvdW50ZXIoKSB7CiAgICBjb3VudGVyUmVmLmdldCgpLnRoZW4oZnVuY3Rpb24oZG9jKSB7CiAgICAgIGlmIChkb2MuZXhpc3RzKSB7CiAgICAgICAgY291bnRlclJlZi51cGRhdGUoewogICAgICAgICAgY291bnQ6IGZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLmluY3JlbWVudCgxKQogICAgICAgIH0pLnRoZW4obG9hZFVwZGF0ZWQpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvdW50ZXJSZWYuc2V0KHsgY291bnQ6IDEgfSkudGhlbihsb2FkVXBkYXRlZCk7CiAgICAgIH0KICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gbG9hZFVwZGF0ZWQoKSB7CiAgICBjb3VudGVyUmVmLmdldCgpLnRoZW4oZnVuY3Rpb24oZG9jKSB7CiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJ2aXNpdG9yQ291bnQiKS5pbm5lclRleHQgPSBkb2MuZGF0YSgpLmNvdW50OwogICAgfSk7CiAgfQoKICB1cGRhdGVDb3VudGVyKCk7CgoKY29uc3QgdXBsb2FkID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVwbG9hZCIpOwpjb25zdCBzdGFydEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGFydEJ0biIpOwpjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiY2FudmFzIik7CmNvbnN0IGN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwpjb25zdCBpbnN0cnVjdGlvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaW5zdHJ1Y3Rpb25zIik7CmNvbnN0IHByb2dyZXNzQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInByb2dyZXNzLWJhciIpOwpjb25zdCBtZXRyaWNzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1ldHJpY3MiKTsKY29uc3QgZ3JhcGggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZ3JhcGgiKTsKY29uc3QgZ2N0eCA9IGdyYXBoLmdldENvbnRleHQoIjJkIik7CmNvbnN0IHN1cmdlcnlEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic3VyZ2VyeSIpOwpjb25zdCB1bmRvQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInVuZG9CdG4iKTsKCi8vIGNoZWNrIHRoaXMgaW4gRjEyIGNvbnNvbGUKCgpjb25zdCByZXNldEJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJyZXNldEJ0biIpOwoKbGV0IGltZyA9IG51bGw7CmxldCBwb2ludHMgPSBbXTsKbGV0IGN1cnJlbnRNYXJrZXIgPSAwOwoKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhvbWVCdG4iKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uICgpIHsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZTInKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJzsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaG9tZTExJykuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKfSk7CmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJob21lQnRuMiIpLmFkZEV2ZW50TGlzdGVuZXIoImNsaWNrIiwgZnVuY3Rpb24gKCkgewogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lMicpLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdob21lMTEnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwp9KTsKCmNvbnN0IG1hcmtlckxhYmVscyA9IFsKCiIxLiBCb3R0b20gb2YgeW91ciBjaGluIChsb3dlc3QgcG9pbnQpIiwKIjIuIEZhcnRoZXN0IGxlZnQgcG9pbnQgb2YgeW91ciBjaGVla2JvbmUiLAoiMy4gRmFydGhlc3QgcmlnaHQgcG9pbnQgb2YgeW91ciBjaGVla2JvbmUiLAoiNC4gU3BvdCByaWdodCBiZXR3ZWVuIHlvdXIgZXllYnJvd3MiLAoiNS4gV2hlcmUgeW91ciBub3NlIG1lZXRzIHlvdXIgdXBwZXIgbGlwIiwKIjYuIENlbnRlciBvZiB5b3VyIGxlZnQgZXllIChwdXBpbCkiLAoiNy4gQ2VudGVyIG9mIHlvdXIgcmlnaHQgZXllIChwdXBpbCkiLAoiOC4gT3V0ZXIgY29ybmVyIG9mIHlvdXIgbGVmdCBleWUiLAoiOS4gSW5uZXIgY29ybmVyIG9mIHlvdXIgbGVmdCBleWUiLAoiMTAuIE91dGVyIGNvcm5lciBvZiB5b3VyIHJpZ2h0IGV5ZSIsCiIxMS4gSW5uZXIgY29ybmVyIG9mIHlvdXIgcmlnaHQgZXllIiwKIjEyLiBNaWRkbGUgdG9wIG9mIHlvdXIgdXBwZXIgbGlwIiwKIjEzLiBUb3Agb2YgdGhlIGdyb292ZSB1bmRlciB5b3VyIG5vc2UiLAoiMTQuIEhpZ2hlc3QgcG9pbnQgb2YgeW91ciBsZWZ0IGV5ZWJyb3ciLAoiMTUuIEhpZ2hlc3QgcG9pbnQgb2YgeW91ciByaWdodCBleWVicm93IiwKIjE2LiBUaXAgb2YgeW91ciBub3NlIChtb3N0IGZvcndhcmQgcG9pbnQpIiwKIjE3LiBMZWZ0IGNvcm5lciBvZiB5b3VyIG1vdXRoIiwKIjE4LiBSaWdodCBjb3JuZXIgb2YgeW91ciBtb3V0aCIsCiIxOS4gTWlkZGxlIG9mIHlvdXIgbGVmdCB1cHBlciBleWVsaWQiLAoiMjAuIE1pZGRsZSBvZiB5b3VyIGxlZnQgbG93ZXIgZXllbGlkIiwKIjIxLiBNaWRkbGUgb2YgeW91ciByaWdodCB1cHBlciBleWVsaWQiLAoiMjIuIE1pZGRsZSBvZiB5b3VyIHJpZ2h0IGxvd2VyIGV5ZWxpZCIsCiIyMy4gT3V0ZXIgYmFzZSBvZiB5b3VyIGxlZnQgbm9zdHJpbCIsCiIyNC4gT3V0ZXIgYmFzZSBvZiB5b3VyIHJpZ2h0IG5vc3RyaWwiLAoiMjUuIExlZnQgamF3IGFuZ2xlIChjb3JuZXIgbmVhciBlYXIpIiwKIjI2LiBSaWdodCBqYXcgYW5nbGUgKGNvcm5lciBuZWFyIGVhcikiLAoiMjcuIFRvcCBvZiB5b3VyIG5vc2UgYnJpZGdlIChiZXR3ZWVuIGV5ZXMpIiwKIjI4LiBMZWZ0IGNoZWVrIGhvbGxvdyAodW5kZXIgY2hlZWtib25lKSIsCiIyOS4gUmlnaHQgY2hlZWsgaG9sbG93ICh1bmRlciBjaGVla2JvbmUpIiwKIjMwLiBDZW50ZXIgb2YgeW91ciBmb3JlaGVhZCAoaWYgdmlzaWJsZSkiLAoiMzEuIExlZnQgZWFyIHRvcCBhdHRhY2htZW50IiwKIjMyLiBSaWdodCBlYXIgdG9wIGF0dGFjaG1lbnQiLAoiMzMuIExlZnQgbGlwIGhlaWdodCBwb2ludCAobWlkZGxlKSIsCiIzNC4gUmlnaHQgbGlwIGhlaWdodCBwb2ludCAobWlkZGxlKSIsCgovKiBORVcgT05FUyAqLwoKIjM1LiBCb3R0b20gb2YgbGVmdCBleWVicm93IiwKIjM2LiBCb3R0b20gb2YgcmlnaHQgZXllYnJvdyIsCiIzNy4gSGFpcmxpbmUgY2VudGVyICh0b3Agb2YgZm9yZWhlYWQpIiwKIjM4LiBMZWZ0IGVkZ2Ugb2YgY2hpbiAod2lkZXN0IHBhcnQpIiwKIjM5LiBSaWdodCBlZGdlIG9mIGNoaW4gKHdpZGVzdCBwYXJ0KSIKCl07CgoKLy8gRml4IGluc2FuZSB0aWx0IGJ1ZwoKCgoKY29uc3QgaWRlYWxSYW5nZXMgPSB7CkZXSFI6IHttaW46MS44NzEsIG1heDoyLjA1fSwgLy8gY2VudGVyZWQgfjEuOTQ4Cm1pZGZhY2U6IHttaW46MC44NSwgbWF4OjAuOTN9LCAvLyBjZW50ZXJlZCB+MC44OTAKRVNSOiB7bWluOjAuNDAsIG1heDowLjgwfSwgLy8gfjAuNDU3CmNoaW5QaGlsOiB7bWluOjMuNSwgbWF4OjR9LCAvLyBjZW50ZXJlZCB+Mi42MzEKY2FudGhhbFRpbHQ6IHttaW46ODgsIG1heDoxMDB9LCAvLyBpZ25vcmUgdGhlIC04OSBidWcsIGZvcmNlIHBvc2l0aXZlIHJhbmdlCmV5ZUFzcGVjdDoge21pbjoxLjk1LCBtYXg6Mi42fSwgLy8gY2VudGVyZWQgfjMuMCAoeW91ciAxLjIzIGlzIGJ1Z2dlZCwgaWdub3JlKQpsb3dlclRoaXJkUGN0OiB7bWluOjM4LCBtYXg6NDN9LCAvLyBjZW50ZXJlZCB+NDAuNzE0CmNoZWVrYm9uZVJhdGlvOiB7bWluOjEuMTAsIG1heDoxLjIwfSwgLy8gY2VudGVyZWQgfjEuMTU1CmludGVyY2FudGhhbFJhdGlvOiB7bWluOjIuNywgbWF4OjMuNX0sCmV5ZVRvRmFjZVdpZHRoOiB7bWluOjAuMjIsIG1heDowLjI4fSwKbm9zZVRvRmFjZVdpZHRoOiB7bWluOjAuMjAsIG1heDowLjI2fSwKbW91dGhUb0ZhY2VXaWR0aDoge21pbjowLjQsIG1heDowLjV9LApqYXdUb0NoZWVrYm9uZToge21pbjowLjgwLCBtYXg6MC45NX0sCnBoaWx0cnVtUmF0aW86IHttaW46MC4yNSwgbWF4OjAuMzV9LApsaXBIZWlnaHRSYXRpbzoge21pbjowLjI1LCBtYXg6MC4zNX0sCmV5ZVNwYWNpbmdSYXRpbzoge21pbjowLjYwLCBtYXg6MX0sCmNoaW5IZWlnaHRSYXRpbzoge21pbjowLjM1LCBtYXg6MC40NX0sCnN5bW1ldHJ5OiB7bWluOjAuMCwgbWF4OjAuMDN9LAogZWFyRmxhcmVSYXRpbzoge21pbjoxLjA1LCBtYXg6MS4yMH0sCiAgYnJvd1RoaWNrbmVzc1JhdGlvOiB7bWluOjAuMTAsIG1heDowLjIwfSwKICBicm93RXllUmF0aW86IHttaW46MC4yMCwgbWF4OjAuMzB9LAogIG5vc2VQcm9qZWN0aW9uUmF0aW86IHttaW46MC4zNSwgbWF4OjAuNTB9LAogIG1hbmRpYmxlQW5nbGVSYXRpbzoge21pbjowLjY1LCBtYXg6MC44NX0sCiAgbG93ZXJGYWNlV2lkdGhSYXRpbzoge21pbjowLjgwLCBtYXg6MC45NX0sCiAgZm9yZWhlYWRIZWlnaHRSYXRpbzoge21pbjowLjU2MCwgbWF4OjAuNjUwfSwKICBicm93U3ltbWV0cnlSYXRpbzoge21pbjowLjAsIG1heDowLjAyfSwKICBleWVWZXJ0aWNhbFJhdGlvOiB7bWluOjAuNDUsIG1heDowLjY1fSwKICBub3NlTGVuZ3RoUmF0aW86IHttaW46MC4yNSwgbWF4OjAuMzV9LAogIG1vdXRoSGVpZ2h0UmF0aW86IHttaW46MC4wOCwgbWF4OjAuMTV9LAogIGN1cGlkQm93UmF0aW86IHttaW46MC4wMiwgbWF4OjAuMDZ9LAogIGluZnJhb3JiaXRhbFJhdGlvOiB7bWluOjAuNDAsIG1heDowLjU1fSwKICBjaGVla0hvbGxvd1JhdGlvOiB7bWluOjAuMzAsIG1heDowLjQwfSwKICBjaGluV2lkdGhSYXRpbzoge21pbjowLjMwLCBtYXg6MC40MH0sCiAgY29tcGFjdG5lc3NSYXRpbzoge21pbjowLjg1LCBtYXg6MS4wNX0sCiAgZXllVGlsdFN5bW1ldHJ5UmF0aW86IHttaW46MTYwLCBtYXg6MTg1fSwKICBqYXdDdXJ2ZVJhdGlvOiB7bWluOjAuNjAsIG1heDowLjg1fSwKICBvcmJpdGFsV2lkdGhSYXRpbzoge21pbjowLjIyLCBtYXg6MC4zMH0sCiAgYnJvd1JpZGdlUmF0aW86IHttaW46MC40OTQsIG1heDowLjY1MH0KfTsKZnVuY3Rpb24gZGlzdGFuY2UoYSwgYikgeyByZXR1cm4gTWF0aC5oeXBvdChhLnggLSBiLngsIGEueSAtIGIueSk7IH0KZnVuY3Rpb24gZGVncmVlcyhyYWQpIHsgcmV0dXJuIHJhZCAqICgxODAgLyBNYXRoLlBJKTsgfQoKZnVuY3Rpb24gc3RyaWN0UmFuZ2VTY29yZSh2LCBtaW4sIG1heCkgewppZiAodiA+PSBtaW4gJiYgdiA8PSBtYXgpIHJldHVybiAxOwpjb25zdCBpZGVhbCA9IChtaW4gKyBtYXgpIC8gMjsKY29uc3QgZGV2ID0gTWF0aC5hYnModiAtIGlkZWFsKTsKcmV0dXJuIE1hdGgubWF4KDAsIDEgLSBNYXRoLnBvdyhkZXYgLyAoKG1heCAtIG1pbikgKiAxLjgpLCAxLjQpKTsKfQoKZnVuY3Rpb24gc2xpZGVySFRNTChsYWJlbCwgdmFsdWUsIGtleSkgewoKICBjb25zdCByID0gaWRlYWxSYW5nZXNba2V5XTsKICBpZiAoIXIgfHwgaXNOYU4odmFsdWUpKSByZXR1cm4gIiI7CgogIGNvbnN0IGlkZWFsV2lkdGggPSByLm1heCAtIHIubWluOwoKICBjb25zdCB2aXN1YWxNaW4gPSByLm1pbiAtIGlkZWFsV2lkdGggKiAyOwogIGNvbnN0IHZpc3VhbE1heCA9IHIubWF4ICsgaWRlYWxXaWR0aCAqIDI7CgogIGNvbnN0IGNsYW1wZWRWYWx1ZSA9IE1hdGgubWF4KHZpc3VhbE1pbiwgTWF0aC5taW4odmlzdWFsTWF4LCB2YWx1ZSkpOwogIGNvbnN0IHBlcmNlbnQgPSAoKGNsYW1wZWRWYWx1ZSAtIHZpc3VhbE1pbikgLyAodmlzdWFsTWF4IC0gdmlzdWFsTWluKSkgKiAxMDA7CgogIGNvbnN0IGlkZWFsU3RhcnQgPSAoKHIubWluIC0gdmlzdWFsTWluKSAvICh2aXN1YWxNYXggLSB2aXN1YWxNaW4pKSAqIDEwMDsKICBjb25zdCBpZGVhbEVuZCA9ICgoci5tYXggLSB2aXN1YWxNaW4pIC8gKHZpc3VhbE1heCAtIHZpc3VhbE1pbikpICogMTAwOwoKICBsZXQgem9uZUNvbG9yOwogIGlmICh2YWx1ZSA+PSByLm1pbiAmJiB2YWx1ZSA8PSByLm1heCkgewogICAgem9uZUNvbG9yID0gIiMwMGZmNmEiOwogIH0gZWxzZSBpZiAoCiAgICB2YWx1ZSA+PSByLm1pbiAtIGlkZWFsV2lkdGggJiYKICAgIHZhbHVlIDw9IHIubWF4ICsgaWRlYWxXaWR0aAogICkgewogICAgem9uZUNvbG9yID0gIiNmZmFlMDAiOwogIH0gZWxzZSB7CiAgICB6b25lQ29sb3IgPSAiI2ZmM2QzZCI7CiAgfQoKICByZXR1cm4gYAogIDxkaXYgY2xhc3M9InNsaWRlci1ib3ggbWV0cmljLWNsaWNrIgogICAgICAgb25jbGljaz0ib3Blbk1ldHJpYygnJHtrZXl9JywgJHt2YWx1ZX0pIgogICAgICAgc3R5bGU9ImN1cnNvcjpwb2ludGVyOyI+CgogICAgPGRpdiBjbGFzcz0ic2xpZGVyLWxhYmVsIj4ke2xhYmVsfTwvZGl2PgoKICAgIDxkaXYgY2xhc3M9InNsaWRlci10cmFjayIgc3R5bGU9IgogICAgICBwb3NpdGlvbjpyZWxhdGl2ZTsKICAgICAgaGVpZ2h0OjE2cHg7CiAgICAgIGJvcmRlci1yYWRpdXM6OHB4OwogICAgICBiYWNrZ3JvdW5kOiMxYTFhMWE7CiAgICAgIG92ZXJmbG93OnZpc2libGU7CiAgICAiPgoKICAgICAgPGRpdiBzdHlsZT0iCiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7CiAgICAgICAgbGVmdDowOwogICAgICAgIHdpZHRoOjEwMCU7CiAgICAgICAgaGVpZ2h0OjEwMCU7CiAgICAgICAgYmFja2dyb3VuZDpsaW5lYXItZ3JhZGllbnQoCiAgICAgICAgICB0byByaWdodCwKICAgICAgICAgICNmZjNkM2QgMCUsCiAgICAgICAgICAjZmZhZTAwIDI1JSwKICAgICAgICAgICMwMGZmNmEgNTAlLAogICAgICAgICAgI2ZmYWUwMCA3NSUsCiAgICAgICAgICAjZmYzZDNkIDEwMCUKICAgICAgICApOwogICAgICAgIGJvcmRlci1yYWRpdXM6OHB4OwogICAgICAiPjwvZGl2PgoKICAgICAgPGRpdiBzdHlsZT0iCiAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7CiAgICAgICAgbGVmdDoke2lkZWFsU3RhcnR9JTsKICAgICAgICB3aWR0aDoke2lkZWFsRW5kIC0gaWRlYWxTdGFydH0lOwogICAgICAgIGhlaWdodDoxMDAlOwogICAgICAgIGJhY2tncm91bmQ6cmdiYSgwLDI1NSwxMDYsMC4zNSk7CiAgICAgICAgYm9yZGVyLXJhZGl1czo4cHg7CiAgICAgICI+PC9kaXY+CgogICAgICA8ZGl2IHN0eWxlPSIKICAgICAgICBwb3NpdGlvbjphYnNvbHV0ZTsKICAgICAgICBsZWZ0OiR7cGVyY2VudH0lOwogICAgICAgIHRvcDo1MCU7CiAgICAgICAgdHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpOwogICAgICAgIHdpZHRoOjE0cHg7CiAgICAgICAgaGVpZ2h0OjE0cHg7CiAgICAgICAgYmFja2dyb3VuZDoke3pvbmVDb2xvcn07CiAgICAgICAgYm9yZGVyLXJhZGl1czo1MCU7CiAgICAgICAgYm9yZGVyOjJweCBzb2xpZCB3aGl0ZTsKICAgICAgICBib3gtc2hhZG93OjAgMCA4cHggJHt6b25lQ29sb3J9OwogICAgICAiPjwvZGl2PgoKICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9InZhbHVlLXRleHQiPiR7dmFsdWUudG9GaXhlZCgzKX08L2Rpdj4KICA8L2Rpdj5gOwp9CmZ1bmN0aW9uIGNhbGN1bGF0ZVBlcmNlbnRpbGUoa2V5LCB2YWx1ZSkgewogIGNvbnN0IHIgPSBpZGVhbFJhbmdlc1trZXldOwogIGlmICghciB8fCB2YWx1ZSA9PSBudWxsKSByZXR1cm4gNTA7CgogIGNvbnN0IG1pbiA9IHIubWluOwogIGNvbnN0IG1heCA9IHIubWF4OwoKICBjb25zdCBpZGVhbENlbnRlciA9IChtaW4gKyBtYXgpIC8gMjsKICBjb25zdCBoYWxmUmFuZ2UgPSAobWF4IC0gbWluKSAvIDI7CgogIGNvbnN0IGRpc3RhbmNlID0gTWF0aC5hYnModmFsdWUgLSBpZGVhbENlbnRlcik7CgogIC8vIEluc2lkZSBpZGVhbCByYW5nZSDihpIgZWxpdGUKICBpZiAodmFsdWUgPj0gbWluICYmIHZhbHVlIDw9IG1heCkgewogICAgcmV0dXJuIDk1ICsgKDEgLSAoZGlzdGFuY2UgLyBoYWxmUmFuZ2UpKSAqIDQ7IAogICAgLy8gOTXigJM5OQogIH0KCiAgLy8gT3V0c2lkZSBpZGVhbCDihpIgZHJvcCBoYXJkCiAgY29uc3QgcGVuYWx0eSA9IGRpc3RhbmNlIC8gaGFsZlJhbmdlOwogIGxldCBwZXJjZW50aWxlID0gOTUgLSAocGVuYWx0eSAqIDQwKTsKCiAgcmV0dXJuIE1hdGgubWF4KDEsIE1hdGgubWluKDk5LCBwZXJjZW50aWxlKSk7Cn0KCmZ1bmN0aW9uIGdldE1ldHJpY0V4cGxhbmF0aW9uKGtleSwgdmFsdWUpIHsKCiAgY29uc3QgciA9IGlkZWFsUmFuZ2VzW2tleV07CiAgaWYgKCFyKSByZXR1cm4gIk5vIGRhdGEgYXZhaWxhYmxlLiI7CgogIGNvbnN0IG1pbiA9IHIubWluOwogIGNvbnN0IG1heCA9IHIubWF4OwogIGNvbnN0IHJhbmdlID0gbWF4IC0gbWluOwoKICBjb25zdCBsb3dTZXZlcmUgPSBtaW4gLSByYW5nZTsKICBjb25zdCBoaWdoU2V2ZXJlID0gbWF4ICsgcmFuZ2U7CgogIGxldCBzZXZlcml0eSA9ICJpZGVhbCI7CgogIGlmICh2YWx1ZSA8IGxvd1NldmVyZSkgc2V2ZXJpdHkgPSAidmVyeUxvdyI7CiAgZWxzZSBpZiAodmFsdWUgPCBtaW4pIHNldmVyaXR5ID0gInNsaWdodGx5TG93IjsKICBlbHNlIGlmICh2YWx1ZSA+IGhpZ2hTZXZlcmUpIHNldmVyaXR5ID0gInZlcnlIaWdoIjsKICBlbHNlIGlmICh2YWx1ZSA+IG1heCkgc2V2ZXJpdHkgPSAic2xpZ2h0bHlIaWdoIjsKICBlbHNlIHNldmVyaXR5ID0gImlkZWFsIjsKCiAgZnVuY3Rpb24gc29mdG1heCh0ZXh0KSB7CiAgICByZXR1cm4gYDxicj48YnI+PHN0cm9uZz5Tb2Z0bWF4eGluZzo8L3N0cm9uZz4gJHt0ZXh0fWA7CiAgfQoKICBmdW5jdGlvbiBoYXJkbWF4KHRleHQpIHsKICAgIHJldHVybiBgPGJyPjxzdHJvbmc+SGFyZG1heHhpbmc6PC9zdHJvbmc+ICR7dGV4dH1gOwogIH0KCiAgc3dpdGNoKGtleSkgewoKICAgIGNhc2UgIkZXSFIiOgoKICAgICAgaWYgKHNldmVyaXR5ID09PSAiaWRlYWwiKQogICAgICAgIHJldHVybiBgCkZXSFIgZmFsbHMgd2l0aGluIG9wdGltYWwgc3RydWN0dXJhbCByYW5nZS4gClRoaXMgc3VnZ2VzdHMgYmFsYW5jZWQgdHJhbnN2ZXJzZSBmYWNpYWwgd2lkdGggcmVsYXRpdmUgdG8gbWlkZmFjZSBoZWlnaHQuIApEb21pbmFuY2UgcGVyY2VwdGlvbiBhbmQgc2tlbGV0YWwgY29tcGFjdG5lc3MgYXJlIGFsaWduZWQgd2l0aCBoaWdoIGFlc3RoZXRpYyBzdGFuZGFyZHMuCjxicj48YnI+PHN0cm9uZz5ObyBzdHJ1Y3R1cmFsIGxvb2tzbWF4eGluZyByZXF1aXJlZC48L3N0cm9uZz4KICAgICAgICBgOwoKICAgICAgaWYgKHNldmVyaXR5ID09PSAic2xpZ2h0bHlMb3ciKQogICAgICAgIHJldHVybiBgCkZXSFIgaXMgbWlsZGx5IHJlZHVjZWQuIApGYWNpYWwgd2lkdGggaXMgc2xpZ2h0bHkgbmFycm93IHJlbGF0aXZlIHRvIGhlaWdodC4gClRoaXMgY2FuIHJlZHVjZSBwZXJjZWl2ZWQgZG9taW5hbmNlIGFuZCBza2VsZXRhbCByb2J1c3RuZXNzLgoke3NvZnRtYXgoIkdyb3cgbGF0ZXJhbCBiZWFyZCB3aWR0aCwgaW5jcmVhc2UgYm9keSBtYXNzLCBvcHRpbWl6ZSBsaWdodGluZyBhbmdsZXMuIil9CiR7aGFyZG1heCgiWnlnb21hdGljIHdpZGVuaW5nIGltcGxhbnRzIG9yIGphdyBhbmdsZSBhdWdtZW50YXRpb24uIil9CiAgICAgICAgYDsKCiAgICAgIGlmIChzZXZlcml0eSA9PT0gInZlcnlMb3ciKQogICAgICAgIHJldHVybiBgClNpZ25pZmljYW50bHkgbG93IEZXSFIuIApNYXJrZWQgdmVydGljYWwgZWxvbmdhdGlvbiByZWxhdGl2ZSB0byB3aWR0aC4gCkNvbW1vbiBpbiBzb2Z0ZXIgZmFjaWFsIHN0cnVjdHVyZXMuCiR7c29mdG1heCgiU3RyYXRlZ2ljIGJlYXJkIHNoYXBpbmcgdG8gd2lkZW4gbG93ZXIgdGhpcmQuIil9CiR7aGFyZG1heCgiWnlnb21hdGljIGltcGxhbnRzIGNvbWJpbmVkIHdpdGggbWFuZGlidWxhciBleHBhbnNpb24uIil9CiAgICAgICAgYDsKCiAgICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5SGlnaCIpCiAgICAgICAgcmV0dXJuIGAKRldIUiBzbGlnaHRseSBlbGV2YXRlZC4gCkluZGljYXRlcyBzdHJvbmcgdHJhbnN2ZXJzZSB3aWR0aC4gCk9mdGVuIGFzc29jaWF0ZWQgd2l0aCBoaWdoZXIgZG9taW5hbmNlIHNpZ25hbGluZy4KTm8gaW50ZXJ2ZW50aW9uIHJlcXVpcmVkIHVubGVzcyBmYWNpYWwgaGFybW9ueSBpcyBjb21wcm9taXNlZC4KICAgICAgICBgOwoKICAgICAgaWYgKHNldmVyaXR5ID09PSAidmVyeUhpZ2giKQogICAgICAgIHJldHVybiBgCkV4dHJlbWVseSBoaWdoIEZXSFIuIApGYWNpYWwgd2lkdGggc3Ryb25nbHkgZXhjZWVkcyB2ZXJ0aWNhbCBwcm9wb3J0aW9uLiAKTWF5IGFwcGVhciBjb21wcmVzc2VkIHZlcnRpY2FsbHkuCiR7c29mdG1heCgiSGFpciB2b2x1bWUgaW5jcmVhc2UgdG8gZWxvbmdhdGUgZmFjZSB2aXN1YWxseS4iKX0KICAgICAgICBgOwogICAgICBicmVhazsKCiAgICBjYXNlICJtaWRmYWNlIjoKCiAgICAgIGlmIChzZXZlcml0eSA9PT0gImlkZWFsIikKICAgICAgICByZXR1cm4gYApNaWRmYWNlIHByb3BvcnRpb24gaXMgYmFsYW5jZWQgcmVsYXRpdmUgdG8gdG90YWwgZmFjaWFsIGhlaWdodC4KTWFpbnRhaW5zIGNvbXBhY3QgdmVydGljYWwgdGhpcmRzIGFuZCBzdHJ1Y3R1cmFsIGhhcm1vbnkuCjxicj48YnI+PHN0cm9uZz5ObyBsb29rc21heHhpbmcgcmVxdWlyZWQuPC9zdHJvbmc+CiAgICAgICAgYDsKCiAgICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5TG93IikKICAgICAgICByZXR1cm4gYApNaWRmYWNlIGlzIHNsaWdodGx5IHNob3J0ZW5lZC4KQ2FuIGdpdmUgeW91dGhmdWwgYnV0IG9jY2FzaW9uYWxseSB1bmRlcmRldmVsb3BlZCBhcHBlYXJhbmNlLgoke3NvZnRtYXgoIk5ldXRyYWwgaGVhZCB0aWx0IGluIHBob3RvcyB0byBlbG9uZ2F0ZSB2aXN1YWxseS4iKX0KICAgICAgICBgOwoKICAgICAgaWYgKHNldmVyaXR5ID09PSAic2xpZ2h0bHlIaWdoIikKICAgICAgICByZXR1cm4gYApNaWRmYWNlIHNsaWdodGx5IGVsb25nYXRlZC4KUmVkdWNlcyBmYWNpYWwgY29tcGFjdG5lc3MuCiR7c29mdG1heCgiSGFpcnN0eWxlIGxvd2VyaW5nIGZvcmVoZWFkIGV4cG9zdXJlLiIpfQoke2hhcmRtYXgoIk9ydGhvZ25hdGhpYyBzdXJnZXJ5IChMZWZvcnQgSSB3aXRoIENDVyByb3RhdGlvbikuIil9CiAgICAgICAgYDsKCiAgICAgIGlmIChzZXZlcml0eSA9PT0gInZlcnlIaWdoIikKICAgICAgICByZXR1cm4gYApTZXZlcmVseSBlbG9uZ2F0ZWQgbWlkZmFjZS4KU2lnbmlmaWNhbnQgdmVydGljYWwgZGlzcHJvcG9ydGlvbi4KJHtoYXJkbWF4KCJPcnRob2duYXRoaWMgcmVwb3NpdGlvbmluZyB3aXRoIHZlcnRpY2FsIGltcGFjdGlvbi4iKX0KICAgICAgICBgOwogICAgICBicmVhazsKCiAgICBjYXNlICJqYXdUb0NoZWVrYm9uZSI6CgogICAgICBpZiAoc2V2ZXJpdHkgPT09ICJpZGVhbCIpCiAgICAgICAgcmV0dXJuIGAKSmF3LXRvLWNoZWVrYm9uZSByYXRpbyBpbmRpY2F0ZXMgYmFsYW5jZWQgbWFuZGlidWxhciB3aWR0aCByZWxhdGl2ZSB0byB6eWdvbWF0aWMgcHJvamVjdGlvbi4KU3Ryb25nIHN0cnVjdHVyYWwgbWFzY3VsaW5pdHkgc2lnbmFsLgo8YnI+PGJyPjxzdHJvbmc+Tm8gamF3IGVuaGFuY2VtZW50IHJlcXVpcmVkLjwvc3Ryb25nPgogICAgICAgIGA7CgogICAgICBpZiAoc2V2ZXJpdHkgPT09ICJzbGlnaHRseUxvdyIpCiAgICAgICAgcmV0dXJuIGAKTWFuZGlidWxhciB3aWR0aCBzbGlnaHRseSB1bmRlcmRldmVsb3BlZCByZWxhdGl2ZSB0byBjaGVla2JvbmVzLgoke3NvZnRtYXgoIk1hc3NldGVyIGh5cGVydHJvcGh5IHRyYWluaW5nLCBsb3cgYm9keSBmYXQuIil9CiR7aGFyZG1heCgiSmF3IGFuZ2xlIGltcGxhbnRzLiIpfQogICAgICAgIGA7CgogICAgICBpZiAoc2V2ZXJpdHkgPT09ICJ2ZXJ5TG93IikKICAgICAgICByZXR1cm4gYApTaWduaWZpY2FudCBqYXcgZGVmaWNpZW5jeSByZWxhdGl2ZSB0byBtaWRmYWNlIHdpZHRoLgpTdHJ1Y3R1cmFsIGltYmFsYW5jZSBsaWtlbHkgbm90aWNlYWJsZS4KJHtoYXJkbWF4KCJNYW5kaWJ1bGFyIGFuZ2xlIGltcGxhbnRzIG9yIHdyYXBhcm91bmQgYXVnbWVudGF0aW9uLiIpfQogICAgICAgIGA7CiAgICAgIGJyZWFrOwoKICAgIGNhc2UgIm5vc2VUb0ZhY2VXaWR0aCI6CgogICAgICBpZiAoc2V2ZXJpdHkgPT09ICJpZGVhbCIpCiAgICAgICAgcmV0dXJuIGAKTmFzYWwgd2lkdGggcHJvcG9ydGlvbiBpcyBhbGlnbmVkIHdpdGggZmFjaWFsIHRyYW5zdmVyc2UgZGltZW5zaW9uLgpObyByZWZpbmVtZW50IHJlcXVpcmVkLgogICAgICAgIGA7CgogICAgICBpZiAoc2V2ZXJpdHkgPT09ICJzbGlnaHRseUhpZ2giKQogICAgICAgIHJldHVybiBgCk5hc2FsIGJhc2Ugc2xpZ2h0bHkgd2lkZSByZWxhdGl2ZSB0byBmYWNlLgoke3NvZnRtYXgoIkNvbnRvdXJpbmcsIGxpZ2h0aW5nIGNvbnRyb2wuIil9CiR7aGFyZG1heCgiQWxhciBiYXNlIHJlZHVjdGlvbi4iKX0KICAgICAgICBgOwoKICAgICAgaWYgKHNldmVyaXR5ID09PSAidmVyeUhpZ2giKQogICAgICAgIHJldHVybiBgCkV4Y2Vzc2l2ZSBuYXNhbCBiYXNlIHdpZHRoLgpEb21pbmFudCBjZW50cmFsIGZhY2lhbCBmZWF0dXJlLgoke2hhcmRtYXgoIkFsYXIgYmFzZSByZWR1Y3Rpb24gd2l0aCB0aXAgcmVmaW5lbWVudC4iKX0KICAgICAgICBgOwogICAgICBicmVhazsKCiAgfQogICBpZiAoa2V5ID09PSAiY2hlZWtib25lUmF0aW8iKSB7CgogICAgaWYgKHNldmVyaXR5ID09PSAiaWRlYWwiKQogICAgICByZXR1cm4gYApDaGVla2JvbmUgcHJvamVjdGlvbiByZWxhdGl2ZSB0byBmYWNpYWwgaGVpZ2h0IGlzIGJhbGFuY2VkLgpNaWRmYWNlIHN0cnVjdHVyZSBzdXBwb3J0cyBzdHJvbmcgc2tlbGV0YWwgYWVzdGhldGljcy4KPGJyPjxicj48c3Ryb25nPk5vIGVuaGFuY2VtZW50IHJlcXVpcmVkLjwvc3Ryb25nPgogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5TG93IikKICAgICAgcmV0dXJuIGAKQ2hlZWtib25lIHByb2plY3Rpb24gaXMgbWlsZGx5IHVuZGVyZGV2ZWxvcGVkIHJlbGF0aXZlIHRvIGZhY2lhbCBoZWlnaHQuCiR7c29mdG1heCgiTG93IGJvZHkgZmF0LCBsaWdodGluZyBlbXBoYXNpemluZyBsYXRlcmFsIHNoYWRvd3MuIil9CiR7aGFyZG1heCgiTWFsYXIgb3IgaW5mcmFvcmJpdGFsIHJpbSBpbXBsYW50cy4iKX0KICAgICAgYDsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJ2ZXJ5TG93IikKICAgICAgcmV0dXJuIGAKRmxhdCBtaWRmYWNlIHdpdGggcmVkdWNlZCB0cmFuc3ZlcnNlIHByb2plY3Rpb24uClN0cnVjdHVyYWwgc3VwcG9ydCBhcHBlYXJzIGRpbWluaXNoZWQuCiR7aGFyZG1heCgiQ3VzdG9tIG1hbGFyICsgaW5mcmFvcmJpdGFsIGF1Z21lbnRhdGlvbi4iKX0KICAgICAgYDsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJzbGlnaHRseUhpZ2giKQogICAgICByZXR1cm4gYApQcm9taW5lbnQgenlnb21hdGljIHByb2plY3Rpb24uCkNhbiBlbmhhbmNlIHNoYXJwbmVzcyBpZiBoYXJtb25pb3VzLgpObyBjb3JyZWN0aW9uIHJlcXVpcmVkLgogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInZlcnlIaWdoIikKICAgICAgcmV0dXJuIGAKRXhjZXNzaXZlIGNoZWVrYm9uZSB3aWR0aCByZWxhdGl2ZSB0byBoZWlnaHQuCk1heSBhcHBlYXIgZXhhZ2dlcmF0ZWQgaWYgamF3IGlzIHdlYWsuCiR7c29mdG1heCgiR3JvdyBqYXcgbWFzcyBvciBmYWNpYWwgaGFpciB0byByZWJhbGFuY2UgbG93ZXIgdGhpcmQuIil9CiAgICAgIGA7CiAgfQoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwogIC8qIElOVEVSQ0FOVEhBTCBSQVRJTyAqLwogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgogIGlmIChrZXkgPT09ICJpbnRlcmNhbnRoYWxSYXRpbyIpIHsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJpZGVhbCIpCiAgICAgIHJldHVybiBgCkludGVyY2FudGhhbCBzcGFjaW5nIGFsaWducyBwcm9wb3J0aW9uYWxseSB3aXRoIGV5ZSB3aWR0aC4KQmFsYW5jZWQgb3JiaXRhbCBwb3NpdGlvbmluZy4KPGJyPjxicj48c3Ryb25nPk5vIGFkanVzdG1lbnQgbmVlZGVkLjwvc3Ryb25nPgogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5TG93IikKICAgICAgcmV0dXJuIGAKRXllcyBzbGlnaHRseSBjbG9zZS1zZXQuCkNhbiBpbmNyZWFzZSBpbnRlbnNpdHkgYnV0IHJlZHVjZSBzb2Z0bmVzcy4KJHtzb2Z0bWF4KCJIYWlyc3R5bGUgd2lkZW5pbmcgZm9yZWhlYWQgdmlzdWFsbHkuIil9CiAgICAgIGA7CgogICAgaWYgKHNldmVyaXR5ID09PSAic2xpZ2h0bHlIaWdoIikKICAgICAgcmV0dXJuIGAKRXllcyBzbGlnaHRseSB3aWRlLXNldC4KTWF5IHJlZHVjZSBjZW50cmFsIGZhY2lhbCBjb21wYWN0bmVzcy4KJHtzb2Z0bWF4KCJOYXNhbCBicmlkZ2UgY29udG91cmluZyBlbXBoYXNpcy4iKX0KICAgICAgYDsKICB9CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCiAgLyogRVlFIFRPIEZBQ0UgV0lEVEggKi8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICBpZiAoa2V5ID09PSAiZXllVG9GYWNlV2lkdGgiKSB7CgogICAgaWYgKHNldmVyaXR5ID09PSAiaWRlYWwiKQogICAgICByZXR1cm4gYApPY3VsYXIgd2lkdGggcHJvcG9ydGlvbiBtYXRjaGVzIGZhY2lhbCB0cmFuc3ZlcnNlIGRpbWVuc2lvbi4KQmFsYW5jZWQgZXllIGRvbWluYW5jZS4KICAgICAgYDsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJzbGlnaHRseUxvdyIpCiAgICAgIHJldHVybiBgCkV5ZXMgYXBwZWFyIHNtYWxsZXIgcmVsYXRpdmUgdG8gZmFjaWFsIHdpZHRoLgoke3NvZnRtYXgoIlNxdWludCB0cmFpbmluZywgdW5kZXItZXllIGZpbGxlciwgbGlnaHRpbmcgb3B0aW1pemF0aW9uLiIpfQogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5SGlnaCIpCiAgICAgIHJldHVybiBgCkV5ZXMgcmVsYXRpdmVseSBsYXJnZSBjb21wYXJlZCB0byBmYWNlLgpPZnRlbiBwZXJjZWl2ZWQgYXMgeW91dGhmdWwuCk5vIGNvcnJlY3Rpb24gcmVxdWlyZWQgdW5sZXNzIGhhcm1vbnkgYWZmZWN0ZWQuCiAgICAgIGA7CiAgfQoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwogIC8qIE1PVVRIIFRPIEZBQ0UgV0lEVEggKi8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICBpZiAoa2V5ID09PSAibW91dGhUb0ZhY2VXaWR0aCIpIHsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJpZGVhbCIpCiAgICAgIHJldHVybiBgCk9yYWwgd2lkdGggcHJvcG9ydGlvbiBhbGlnbnMgd2l0aCBmYWNpYWwgd2lkdGguCkJhbGFuY2VkIGxvd2VyIGZhY2lhbCB0aGlyZHMuCiAgICAgIGA7CgogICAgaWYgKHNldmVyaXR5ID09PSAic2xpZ2h0bHlMb3ciKQogICAgICByZXR1cm4gYApOYXJyb3cgbW91dGggcmVsYXRpdmUgdG8gZmFjZSB3aWR0aC4KJHtzb2Z0bWF4KCJMaXAgaHlkcmF0aW9uICsgY29ybmVyIGxpZnQgZXhwcmVzc2lvbiB0cmFpbmluZy4iKX0KJHtoYXJkbWF4KCJMaXAgbGlmdCBvciBjb3JuZXIgbGlmdCBzdXJnZXJ5LiIpfQogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5SGlnaCIpCiAgICAgIHJldHVybiBgCldpZGUgb3JhbCB3aWR0aC4KT2Z0ZW4gcGVyY2VpdmVkIGFzIGV4cHJlc3NpdmUgYW5kIGRvbWluYW50LgpObyBzdHJ1Y3R1cmFsIGludGVydmVudGlvbiByZXF1aXJlZC4KICAgICAgYDsKICB9CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCiAgLyogUEhJTFRSVU0gUkFUSU8gKi8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICBpZiAoa2V5ID09PSAicGhpbHRydW1SYXRpbyIpIHsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJpZGVhbCIpCiAgICAgIHJldHVybiBgClBoaWx0cnVtIGxlbmd0aCBwcm9wb3J0aW9uIGlzIGJhbGFuY2VkIHJlbGF0aXZlIHRvIGxvd2VyIHRoaXJkLgpNYWludGFpbnMgZmFjaWFsIGNvbXBhY3RuZXNzLgogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5SGlnaCIpCiAgICAgIHJldHVybiBgCk1pbGRseSBlbG9uZ2F0ZWQgcGhpbHRydW0uClJlZHVjZXMgcGVyY2VpdmVkIHlvdXRoZnVsbmVzcy4KJHtzb2Z0bWF4KCJGYWNpYWwgaGFpciBtYXNraW5nLiIpfQoke2hhcmRtYXgoIlN1Ym5hc2FsIGxpcCBsaWZ0LiIpfQogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInZlcnlIaWdoIikKICAgICAgcmV0dXJuIGAKU2lnbmlmaWNhbnRseSBlbG9uZ2F0ZWQgcGhpbHRydW0uCk1ham9yIGNvbnRyaWJ1dG9yIHRvIGxvd2VyIHRoaXJkIGRpc3Byb3BvcnRpb24uCiR7aGFyZG1heCgiU3VibmFzYWwgbGlwIGxpZnQgc3VyZ2VyeS4iKX0KICAgICAgYDsKICB9CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCiAgLyogTElQIEhFSUdIVCBSQVRJTyAqLwogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgogIGlmIChrZXkgPT09ICJsaXBIZWlnaHRSYXRpbyIpIHsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJpZGVhbCIpCiAgICAgIHJldHVybiBgCkxpcCB2ZXJ0aWNhbCBwcm9wb3J0aW9uIGlzIGJhbGFuY2VkLgpTdXBwb3J0cyBpZGVhbCBsb3dlciB0aGlyZCBhZXN0aGV0aWNzLgogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5TG93IikKICAgICAgcmV0dXJuIGAKVGhpbiBsaXBzIHJlbGF0aXZlIHRvIG1vdXRoIHdpZHRoLgoke3NvZnRtYXgoIkxpcCBoeWRyYXRpb24sIHN1YnRsZSBmaWxsZXIuIil9CiAgICAgIGA7CgogICAgaWYgKHNldmVyaXR5ID09PSAic2xpZ2h0bHlIaWdoIikKICAgICAgcmV0dXJuIGAKRnVsbCBsaXBzIHJlbGF0aXZlIHRvIG1vdXRoIHdpZHRoLgpPZnRlbiBwZXJjZWl2ZWQgYXMgYXR0cmFjdGl2ZS4KTm8gZW5oYW5jZW1lbnQgcmVxdWlyZWQuCiAgICAgIGA7CiAgfQoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwogIC8qIEVZRSBTUEFDSU5HIFJBVElPICovCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCiAgaWYgKGtleSA9PT0gImV5ZVNwYWNpbmdSYXRpbyIpIHsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJpZGVhbCIpCiAgICAgIHJldHVybiBgCkV5ZSBzcGFjaW5nIHJlbGF0aXZlIHRvIGZhY2lhbCB3aWR0aCBpcyBiYWxhbmNlZC4KU3VwcG9ydHMgb3JiaXRhbCBoYXJtb255LgogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5TG93IikKICAgICAgcmV0dXJuIGAKRXllcyBjbG9zZXIgdG8gbWlkbGluZS4KQ2FuIGludGVuc2lmeSBnYXplLgogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInNsaWdodGx5SGlnaCIpCiAgICAgIHJldHVybiBgCkV5ZXMgc3BhY2VkIHdpZGVyIHJlbGF0aXZlIHRvIGZhY2UuCk1heSByZWR1Y2UgY29tcGFjdG5lc3MuCiAgICAgIGA7CiAgfQoKICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwogIC8qIENISU4gSEVJR0hUIFJBVElPICovCiAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi8KCiAgaWYgKGtleSA9PT0gImNoaW5IZWlnaHRSYXRpbyIpIHsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJpZGVhbCIpCiAgICAgIHJldHVybiBgCkNoaW4gdmVydGljYWwgcHJvcG9ydGlvbiBhbGlnbnMgd2l0aCBmYWNpYWwgdGhpcmRzLgpCYWxhbmNlZCBtYW5kaWJ1bGFyIHByb2plY3Rpb24uCiAgICAgIGA7CgogICAgaWYgKHNldmVyaXR5ID09PSAic2xpZ2h0bHlMb3ciKQogICAgICByZXR1cm4gYApTaG9ydCBjaGluIHZlcnRpY2FsbHkuCiR7c29mdG1heCgiQmVhcmQgbGVuZ3RoZW5pbmcgaWxsdXNpb24uIil9CiR7aGFyZG1heCgiU2xpZGluZyBnZW5pb3BsYXN0eS4iKX0KICAgICAgYDsKCiAgICBpZiAoc2V2ZXJpdHkgPT09ICJ2ZXJ5TG93IikKICAgICAgcmV0dXJuIGAKU2lnbmlmaWNhbnQgY2hpbiBkZWZpY2llbmN5LgpNYWpvciBsb3dlciB0aGlyZCBpbWJhbGFuY2UuCiR7aGFyZG1heCgiU2xpZGluZyBnZW5pb3BsYXN0eSBvciBjaGluIHdpbmcgaW1wbGFudC4iKX0KICAgICAgYDsKICB9CgogIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCiAgLyogU1lNTUVUUlkgKi8KICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoKICBpZiAoa2V5ID09PSAic3ltbWV0cnkiKSB7CgogICAgaWYgKHNldmVyaXR5ID09PSAiaWRlYWwiKQogICAgICByZXR1cm4gYApGYWNpYWwgYXN5bW1ldHJ5IGZhbGxzIHdpdGhpbiBub3JtYWwgYW5hdG9taWNhbCB2YXJpYW5jZS4KTm8gY29ycmVjdGlvbiBuZWNlc3NhcnkuCiAgICAgIGA7CgogICAgaWYgKHNldmVyaXR5ID09PSAic2xpZ2h0bHlIaWdoIikKICAgICAgcmV0dXJuIGAKTWlsZCBhc3ltbWV0cnkgZGV0ZWN0ZWQuCkNvbW1vbiBpbiBnZW5lcmFsIHBvcHVsYXRpb24uCiR7c29mdG1heCgiSGFpcmxpbmUgYmFsYW5jaW5nLCBiZWFyZCBzaGFwaW5nLiIpfQogICAgICBgOwoKICAgIGlmIChzZXZlcml0eSA9PT0gInZlcnlIaWdoIikKICAgICAgcmV0dXJuIGAKUHJvbm91bmNlZCBhc3ltbWV0cnkuCk5vdGljZWFibGUgc3RydWN0dXJhbCBpbWJhbGFuY2UuCiR7aGFyZG1heCgiT3J0aG9nbmF0aGljIG9yIGZpbGxlci1iYXNlZCBjb3JyZWN0aW9uLiIpfQogICAgICBgOwogIH0KCiAgaWYgKHNldmVyaXR5ID09PSAiaWRlYWwiKQogICAgcmV0dXJuICJXaXRoaW4gb3B0aW1hbCBhZXN0aGV0aWMgcmFuZ2UuIE5vIGxvb2tzbWF4eGluZyBuZWNlc3NhcnkuIjsKCiAgaWYgKHNldmVyaXR5ID09PSAic2xpZ2h0bHlMb3ciKQogICAgcmV0dXJuICJNaWxkbHkgYmVsb3cgaWRlYWwgcmFuZ2UuIE1pbm9yIHByb3BvcnRpb25hbCBkZXZpYXRpb24uIjsKCiAgaWYgKHNldmVyaXR5ID09PSAic2xpZ2h0bHlIaWdoIikKICAgIHJldHVybiAiTWlsZGx5IGFib3ZlIGlkZWFsIHJhbmdlLiBTbGlnaHQgcHJvcG9ydGlvbmFsIGV4YWdnZXJhdGlvbi4iOwoKICBpZiAoc2V2ZXJpdHkgPT09ICJ2ZXJ5TG93IikKICAgIHJldHVybiAiU2lnbmlmaWNhbnRseSBiZWxvdyBpZGVhbCBzdHJ1Y3R1cmFsIHJhbmdlLiI7CgogIGlmIChzZXZlcml0eSA9PT0gInZlcnlIaWdoIikKICAgIHJldHVybiAiU2lnbmlmaWNhbnRseSBhYm92ZSBpZGVhbCBzdHJ1Y3R1cmFsIHJhbmdlLiI7Cgp9CgpmdW5jdGlvbiBub3JtYWxDREYoeCwgbWVhbj01LCBzdGQ9MS40MTQpIHsKICBjb25zdCB6ID0gKHggLSBtZWFuKSAvIHN0ZDsKICByZXR1cm4gMC41ICogKDEgKyBlcmYoeiAvIE1hdGguc3FydCgyKSkpOwp9CgovLyBFcnJvciBmdW5jdGlvbiBhcHByb3hpbWF0aW9uCmZ1bmN0aW9uIGVyZih4KSB7CiAgY29uc3Qgc2lnbiA9IHggPj0gMCA/IDEgOiAtMTsKICB4ID0gTWF0aC5hYnMoeCk7CgogIGNvbnN0IGExID0gIDAuMjU0ODI5NTkyOwogIGNvbnN0IGEyID0gLTAuMjg0NDk2NzM2OwogIGNvbnN0IGEzID0gIDEuNDIxNDEzNzQxOwogIGNvbnN0IGE0ID0gLTEuNDUzMTUyMDI3OwogIGNvbnN0IGE1ID0gIDEuMDYxNDA1NDI5OwogIGNvbnN0IHAgID0gIDAuMzI3NTkxMTsKCiAgY29uc3QgdCA9IDEgLyAoMSArIHAgKiB4KTsKICBjb25zdCB5ID0gMSAtICgoKCgoYTUgKiB0ICsgYTQpICogdCkgKyBhMykgKiB0ICsgYTIpICogdCArIGExKSAqCiAgICAgICAgICAgIHQgKiBNYXRoLmV4cCgteCAqIHgpOwoKICByZXR1cm4gc2lnbiAqIHk7Cn0KCgoKZnVuY3Rpb24gZHJhd0dyYXBoKHNjb3JlKSB7CgogIGdjdHguY2xlYXJSZWN0KDAsMCw2NTAsMjYwKTsKCiAgY29uc3QgbWVhbiA9IDU7CiAgY29uc3Qgc3RkID0gMS40MTQ7CgogIC8vIEF4aXMgbGluZQogIGdjdHguc3Ryb2tlU3R5bGU9IiM0NDQiOwogIGdjdHguYmVnaW5QYXRoKCk7CiAgZ2N0eC5tb3ZlVG8oNDAsMjIwKTsKICBnY3R4LmxpbmVUbyg2MTAsMjIwKTsKICBnY3R4LnN0cm9rZSgpOwoKICAvLyBEcmF3IGJlbGwgY3VydmUKICBnY3R4LnN0cm9rZVN0eWxlPSIjMDBmZjZhIjsKICBnY3R4LmxpbmVXaWR0aCA9IDI7CiAgZ2N0eC5iZWdpblBhdGgoKTsKCiAgZm9yKGxldCB4PTA7eDw9MTA7eCs9MC4wNSl7CiAgICBsZXQgcHg9NDArKHgvMTApKjU3MDsKICAgIGxldCB5PU1hdGguZXhwKC1NYXRoLnBvdyh4LW1lYW4sMikvKDIqc3RkKnN0ZCkpOwogICAgbGV0IHB5PTIyMC0oeSoxNTApOwogICAgaWYoeD09PTApIGdjdHgubW92ZVRvKHB4LHB5KTsKICAgIGVsc2UgZ2N0eC5saW5lVG8ocHgscHkpOwogIH0KCiAgZ2N0eC5zdHJva2UoKTsKCiAgLy8gWW91ciBwb3NpdGlvbgogIGxldCB1eD00MCsoc2NvcmUvMTApKjU3MDsKICBsZXQgeT1NYXRoLmV4cCgtTWF0aC5wb3coc2NvcmUtbWVhbiwyKS8oMipzdGQqc3RkKSk7CiAgbGV0IHV5PTIyMC0oeSoxNTApOwoKICBnY3R4LmZpbGxTdHlsZT0icmVkIjsKICBnY3R4LmJlZ2luUGF0aCgpOwogIGdjdHguYXJjKHV4LHV5LDcsMCxNYXRoLlBJKjIpOwogIGdjdHguZmlsbCgpOwoKICBnY3R4LmZpbGxTdHlsZT0id2hpdGUiOwogIGdjdHguZmlsbFRleHQoIllPVSIsdXgtMTIsdXktMTIpOwoKICAvLyBQZXJjZW50aWxlIG1hdGgKICBjb25zdCBwZXJjZW50aWxlID0gbm9ybWFsQ0RGKHNjb3JlLCBtZWFuLCBzdGQpICogMTAwOwogIGNvbnN0IG9uZUluID0gcGVyY2VudGlsZSA9PT0gMTAwID8gIuKIniIgOgogICAgICAgICAgICAgICAgTWF0aC5yb3VuZCgxMDAgLyAoMTAwIC0gcGVyY2VudGlsZSArIDAuMDAwMSkpOwoKICAvLyBTdG9yZSBmb3IgY2xpY2sgZGV0ZWN0aW9uCiAgZ3JhcGgudXNlclBvaW50ID0ge3g6IHV4LCB5OiB1eSwgc2NvcmUsIHBlcmNlbnRpbGUsIG9uZUlufTsKCiAgLy8gRHJhdyBwZXJjZW50aWxlIHRpY2tzIGJlbG93CiAgZ2N0eC5maWxsU3R5bGU9IiM4ODgiOwogIGdjdHguZm9udD0iMTJweCBBcmlhbCI7CgogIGZvcihsZXQgcCBvZiBbMCwxMCwyNSw1MCw3NSw5MCwxMDBdKSB7CiAgICBsZXQgeFZhbCA9IG1lYW4gKyBzdGQgKiBNYXRoLnNxcnQoMikgKiBpbnZlcnNlRXJmKChwLzEwMCkqMi0xKTsKICAgIGxldCBweCA9IDQwICsgKE1hdGgubWF4KDAsTWF0aC5taW4oMTAseFZhbCkpLzEwKSo1NzA7CiAgICBnY3R4LmZpbGxUZXh0KHArIiUiLCBweC0xMCwgMjQwKTsKICB9Cn0KCmZ1bmN0aW9uIGludmVyc2VFcmYoeCkgewogIGNvbnN0IGEgPSAwLjE0NzsKICBjb25zdCBsbiA9IE1hdGgubG9nKDEgLSB4KngpOwogIGNvbnN0IHBhcnQxID0gMi8oTWF0aC5QSSphKSArIGxuLzI7CiAgY29uc3QgcGFydDIgPSBsbi9hOwogIHJldHVybiBNYXRoLnNpZ24oeCkgKiBNYXRoLnNxcnQoTWF0aC5zcXJ0KHBhcnQxKnBhcnQxIC0gcGFydDIpIC0gcGFydDEpOwp9CgpncmFwaC5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uIChlKSB7CgogIGlmICghZ3JhcGgudXNlclBvaW50KSByZXR1cm47CgogIGNvbnN0IHJlY3QgPSBncmFwaC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKCiAgY29uc3Qgc2NhbGVYID0gZ3JhcGgud2lkdGggLyByZWN0LndpZHRoOwogIGNvbnN0IHNjYWxlWSA9IGdyYXBoLmhlaWdodCAvIHJlY3QuaGVpZ2h0OwoKICBjb25zdCBteCA9IChlLmNsaWVudFggLSByZWN0LmxlZnQpICogc2NhbGVYOwogIGNvbnN0IG15ID0gKGUuY2xpZW50WSAtIHJlY3QudG9wKSAqIHNjYWxlWTsKCiAgY29uc3QgZHggPSBteCAtIGdyYXBoLnVzZXJQb2ludC54OwogIGNvbnN0IGR5ID0gbXkgLSBncmFwaC51c2VyUG9pbnQueTsKCiAgaWYgKE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSkgPCAxNSkgewoKICAgIGNvbnN0IHAgPSBncmFwaC51c2VyUG9pbnQucGVyY2VudGlsZS50b0ZpeGVkKDIpOwogICAgY29uc3Qgb25lSW4gPSBncmFwaC51c2VyUG9pbnQub25lSW47CgogICAgYWxlcnQoCiAgICAgIGBZb3UgYXJlIGluIHRoZSAke3B9IHBlcmNlbnRpbGUuXG5cbmAgKwogICAgICBgQXBwcm94aW1hdGVseSAxIGluICR7b25lSW59IHBlb3BsZSBzY29yZSBoaWdoZXIgdGhhbiB5b3UuYAogICAgKTsKICB9Cn0pOwoKZnVuY3Rpb24gZHJhd1BvaW50cygpIHsKY3R4LmRyYXdJbWFnZShpbWcsIDAsIDApOwpwb2ludHMuZm9yRWFjaCgocCwgaSkgPT4gewpjdHguZmlsbFN0eWxlID0gImJsdWUiOwpjdHguYmVnaW5QYXRoKCk7CmN0eC5hcmMocC54LCBwLnksIDMsIDAsIE1hdGguUEkqMik7CmN0eC5maWxsKCk7CmN0eC5zdHJva2VTdHlsZSA9ICJsaW1lIjsKY3R4LmxpbmVXaWR0aCA9IDIuNTsKY3R4LnN0cm9rZSgpOwpjdHguZmlsbFN0eWxlID0gIndoaXRlIjsKY3R4LmZvbnQgPSAiYm9sZCAxNHB4IEFyaWFsIjsKY3R4LmZpbGxUZXh0KGkrMSwgcC54ICsgMTAsIHAueSAtIDEwKTsKfSk7Cn0KCmZ1bmN0aW9uIHVwZGF0ZVByb2dyZXNzKCkgewpjb25zdCBwZXJjZW50ID0gKGN1cnJlbnRNYXJrZXIgLyBtYXJrZXJMYWJlbHMubGVuZ3RoKSAqIDEwMDsKcHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSBwZXJjZW50ICsgIiUiOwp9CgpmdW5jdGlvbiBzdGFydFBsYWNpbmcoKSB7CnBvaW50cyA9IFtdOwpjdXJyZW50TWFya2VyID0gMDsKaW5zdHJ1Y3Rpb25zLmNsYXNzTGlzdC5hZGQoInZpc2libGUiKTsKaW5zdHJ1Y3Rpb25zLmlubmVyVGV4dCA9IGBDbGljayBvbjogJHttYXJrZXJMYWJlbHNbY3VycmVudE1hcmtlcl19ICgke2N1cnJlbnRNYXJrZXIgKyAxfS8ke21hcmtlckxhYmVscy5sZW5ndGh9KWA7Cm1ldHJpY3MuY2xhc3NMaXN0LmFkZCgidmlzaWJsZSIpOwptZXRyaWNzLmlubmVySFRNTCA9ICI8cD5DbGljayBwb2ludHMgaW4gb3JkZXIuIFpvb20gaW4gYnJvd3NlciBpZiBuZWVkZWQuIEVTQyB0byBjYW5jZWwuPC9wPiI7CnJlc2V0QnRuLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lLWJsb2NrIjsKdW5kb0J0bi5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7CnN0YXJ0QnRuLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CnVwZGF0ZVByb2dyZXNzKCk7CgpjYW52YXMub25jbGljayA9IChlKSA9PiB7CmNvbnN0IHJlY3QgPSBjYW52YXMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CmNvbnN0IHNjYWxlWCA9IGNhbnZhcy53aWR0aCAvIHJlY3Qud2lkdGg7CmNvbnN0IHNjYWxlWSA9IGNhbnZhcy5oZWlnaHQgLyByZWN0LmhlaWdodDsKY29uc3QgeCA9IChlLmNsaWVudFggLSByZWN0LmxlZnQpICogc2NhbGVYOwpjb25zdCB5ID0gKGUuY2xpZW50WSAtIHJlY3QudG9wKSAqIHNjYWxlWTsKcG9pbnRzLnB1c2goe3gsIHl9KTsKY3VycmVudE1hcmtlcisrOwpkcmF3UG9pbnRzKCk7CnVwZGF0ZVByb2dyZXNzKCk7CmlmIChjdXJyZW50TWFya2VyIDwgbWFya2VyTGFiZWxzLmxlbmd0aCkgewppbnN0cnVjdGlvbnMuaW5uZXJUZXh0ID0gYENsaWNrIG9uOiAke21hcmtlckxhYmVsc1tjdXJyZW50TWFya2VyXX0gKCR7Y3VycmVudE1hcmtlciArIDF9LyR7bWFya2VyTGFiZWxzLmxlbmd0aH0pYDsKfSBlbHNlIHsKaW5zdHJ1Y3Rpb25zLmlubmVyVGV4dCA9ICJBbGwgcG9pbnRzIHBsYWNlZCEgQ3J1bmNoaW5nIG51bWJlcnMuLi4iOwpjYW52YXMub25jbGljayA9IG51bGw7CnNldFRpbWVvdXQoY2FsY3VsYXRlUmVzdWx0cywgMzAwKTsgLy8gc21hbGwgZGVsYXkgZm9yIHNtb290aCBmZWVsCn0KfTsKfQoKZnVuY3Rpb24gdW5kb0xhc3QoKSB7CmlmIChwb2ludHMubGVuZ3RoID09PSAwKSByZXR1cm47CnBvaW50cy5wb3AoKTsKY3VycmVudE1hcmtlci0tOwpkcmF3UG9pbnRzKCk7CnVwZGF0ZVByb2dyZXNzKCk7CmlmIChjdXJyZW50TWFya2VyIDwgbWFya2VyTGFiZWxzLmxlbmd0aCkgewppbnN0cnVjdGlvbnMuaW5uZXJUZXh0ID0gYENsaWNrIG9uOiBcKCB7bWFya2VyTGFiZWxzW2N1cnJlbnRNYXJrZXJdfSAoIFwpe2N1cnJlbnRNYXJrZXIrMX0vJHttYXJrZXJMYWJlbHMubGVuZ3RofSlgOwp9Cn0KCgoKZnVuY3Rpb24gY2FsY3VsYXRlSGFybW9ueSh2YWx1ZXMsIGlkZWFsUmFuZ2VzKSB7Cgpjb25zdCBrZXlzID0gWwogICJGV0hSIiwKICAibWlkZmFjZSIsCiAgImxvd2VyVGhpcmRQY3QiLAogICJwaGlsdHJ1bVJhdGlvIiwKICAiY2hpbkhlaWdodFJhdGlvIiwKICAiaW50ZXJjYW50aGFsUmF0aW8iLAogICJleWVTcGFjaW5nUmF0aW8iLAogICJleWVUb0ZhY2VXaWR0aCIsCiAgIm1vdXRoVG9GYWNlV2lkdGgiLAogICJmb3JlaGVhZEhlaWdodFJhdGlvIiwKICAic3ltbWV0cnkiLAogICJicm93U3ltbWV0cnlSYXRpbyIsCiAgImV5ZVRpbHRTeW1tZXRyeVJhdGlvIgpdOwoKICBsZXQgdG90YWwgPSAwOwogIGxldCBjb3VudCA9IDA7CgogIGtleXMuZm9yRWFjaChrZXkgPT4gewogICAgY29uc3QgciA9IGlkZWFsUmFuZ2VzW2tleV07CiAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1trZXldOwogICAgaWYgKCFyIHx8IHZhbHVlID09IG51bGwpIHJldHVybjsKCiAgICBjb25zdCBtaWRwb2ludCA9IChyLm1pbiArIHIubWF4KSAvIDI7CiAgICBjb25zdCBoYWxmUmFuZ2UgPSAoci5tYXggLSByLm1pbikgLyAyOwoKICAgIC8vIFNvZnRlciBkZXZpYXRpb24gbW9kZWwKICAgIGNvbnN0IGRldmlhdGlvbiA9ICh2YWx1ZSAtIG1pZHBvaW50KSAvIChoYWxmUmFuZ2UgKiAxLjYpOwoKICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBNYXRoLmV4cCgtTWF0aC5wb3coZGV2aWF0aW9uLCAyKSk7CgogICAgdG90YWwgKz0gbm9ybWFsaXplZDsKICAgIGNvdW50Kys7CiAgfSk7CgogIGlmIChjb3VudCA9PT0gMCkgcmV0dXJuIDA7CgogIAoKICAvLyBSZWFsaXN0aWMgdXBsaWZ0IChoYXJtb25pb3VzIGZhY2VzIGNsdXN0ZXIgaGlnaCkKICBsZXQgc2NvcmUgPSAodG90YWwgLyBjb3VudCkgKiAxMDsKc2NvcmUgPSBNYXRoLnBvdyhzY29yZSAvIDEwLCAxLjMpICogMTA7IC8vIGNvbXByZXNzIGhpZ2hzCnJldHVybiBNYXRoLm1pbig5LCBzY29yZSk7Cn0KZnVuY3Rpb24gY2FsY3VsYXRlRGltb3JwaGlzbSh2YWx1ZXMsIGlkZWFsUmFuZ2VzKSB7Cgpjb25zdCBrZXlzID0gWwogICJGV0hSIiwKICAiamF3VG9DaGVla2JvbmUiLAogICJjaGVla2JvbmVSYXRpbyIsCiAgIm5vc2VUb0ZhY2VXaWR0aCIsCiAgImNoaW5QaGlsIiwKICAibG93ZXJUaGlyZFBjdCIsCiAgImNoaW5IZWlnaHRSYXRpbyIsCiAgIm1hbmRpYmxlQW5nbGVSYXRpbyIsCiAgImJyb3dSaWRnZVJhdGlvIiwKICAibm9zZVByb2plY3Rpb25SYXRpbyIsCiAgImxvd2VyRmFjZVdpZHRoUmF0aW8iLAogICJjaGluV2lkdGhSYXRpbyIKXTsKCiAgbGV0IHRvdGFsID0gMDsKICBsZXQgY291bnQgPSAwOwoKICBrZXlzLmZvckVhY2goa2V5ID0+IHsKCiAgICBjb25zdCByID0gaWRlYWxSYW5nZXNba2V5XTsKICAgIGNvbnN0IHZhbHVlID0gdmFsdWVzW2tleV07CiAgICBpZiAoIXIgfHwgdmFsdWUgPT0gbnVsbCkgcmV0dXJuOwoKICAgIGNvbnN0IG1pZHBvaW50ID0gKHIubWluICsgci5tYXgpIC8gMjsKICAgIGNvbnN0IGhhbGZSYW5nZSA9IChyLm1heCAtIHIubWluKSAvIDI7CgogICAgY29uc3QgZGV2aWF0aW9uID0gKHZhbHVlIC0gbWlkcG9pbnQpIC8gaGFsZlJhbmdlOwoKICAgIC8vIFNvZnRlciBjdXJ2ZSB0aGFuIGV4cCgteMKyKQogICAgY29uc3QgYmFzZVNjb3JlID0gMSAvICgxICsgTWF0aC5hYnMoZGV2aWF0aW9uKSk7CgogICAgLy8gU3Ryb25nZXIgbWFzY3VsaW5lIGJpYXMKICAgIGxldCBiaWFzID0gMTsKICAgIGlmIChkZXZpYXRpb24gPiAwKSBiaWFzID0gMS4yNTsgICAgIC8vIHJld2FyZCBtYXNjdWxpbmUgc2tldwogICAgaWYgKGRldmlhdGlvbiA+IDEpIGJpYXMgPSAxLjM1OyAgICAgLy8gc3Ryb25nIG1hc2N1bGluZQogICAgaWYgKGRldmlhdGlvbiA8IC0xKSBiaWFzID0gMC44NTsgICAgLy8gcGVuYWxpemUgZmVtaW5pbmUgc2tldwoKICAgIGNvbnN0IHNjb3JlID0gYmFzZVNjb3JlICogYmlhczsKCiAgICB0b3RhbCArPSBNYXRoLm1pbihzY29yZSwgMS4yKTsgLy8gYWxsb3cgc2xpZ2h0IG92ZXJjYXAKICAgIGNvdW50Kys7CgogIH0pOwoKICBpZiAoY291bnQgPT09IDApIHJldHVybiAwOwoKICAvLyBOb3JtYWxpemUgcHJvcGVybHkKICBjb25zdCBmaW5hbCA9ICh0b3RhbCAvIGNvdW50KTsKCiAgcmV0dXJuIE1hdGgubWluKDEwLCBmaW5hbCAqIDEwKTsKfQpmdW5jdGlvbiBjYWxjdWxhdGVBbmd1bGFyaXR5KHZhbHVlcywgaWRlYWxSYW5nZXMpIHsKCiAgY29uc3Qga2V5cyA9IFsKICAiamF3VG9DaGVla2JvbmUiLAogICJjaGVla2JvbmVSYXRpbyIsCiAgImNoaW5IZWlnaHRSYXRpbyIsCiAgIkZXSFIiLAogICJtYW5kaWJsZUFuZ2xlUmF0aW8iLAogICJqYXdDdXJ2ZVJhdGlvIiwKICAiY2hlZWtIb2xsb3dSYXRpbyIsCiAgImluZnJhb3JiaXRhbFJhdGlvIiwKICAib3JiaXRhbFdpZHRoUmF0aW8iLAogICJjb21wYWN0bmVzc1JhdGlvIgpdOwoKICBsZXQgdG90YWwgPSAwOwogIGxldCBjb3VudCA9IDA7CgogIGtleXMuZm9yRWFjaChrZXkgPT4gewogICAgY29uc3QgciA9IGlkZWFsUmFuZ2VzW2tleV07CiAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1trZXldOwogICAgaWYgKCFyIHx8IHZhbHVlID09IG51bGwpIHJldHVybjsKCiAgICBjb25zdCBtaWRwb2ludCA9IChyLm1pbiArIHIubWF4KSAvIDI7CiAgICBjb25zdCByYW5nZSA9IChyLm1heCAtIHIubWluKTsKCiAgICAvLyBub3JtYWxpemUgcmVsYXRpdmUgdG8gbWlkcG9pbnQKICAgIGxldCBub3JtYWxpemVkID0gKHZhbHVlIC0gbWlkcG9pbnQpIC8gKHJhbmdlIC8gMik7CgogICAgLy8gY2xhbXAgYmV0d2VlbiAtMSBhbmQgMQogICAgbm9ybWFsaXplZCA9IE1hdGgubWF4KC0xLCBNYXRoLm1pbihub3JtYWxpemVkLCAxKSk7CgogICAgLy8gcmV3YXJkIHVwcGVyIGhhbGYgbW9yZSBhZ2dyZXNzaXZlbHkKICAgIGlmIChub3JtYWxpemVkID4gMCkgewogICAgICBub3JtYWxpemVkID0gTWF0aC5wb3cobm9ybWFsaXplZCwgMS4zKTsKICAgIH0gZWxzZSB7CiAgICAgIG5vcm1hbGl6ZWQgPSBub3JtYWxpemVkICogMC42OyAvLyBzb2Z0ZW4gcGVuYWx0eQogICAgfQoKICAgIC8vIGNvbnZlcnQgZnJvbSAtMS4uMSDihpIgMC4uMQogICAgbm9ybWFsaXplZCA9IChub3JtYWxpemVkICsgMSkgLyAyOwoKICAgIHRvdGFsICs9IG5vcm1hbGl6ZWQ7CiAgICBjb3VudCsrOwogIH0pOwoKICBpZiAoY291bnQgPT09IDApIHJldHVybiAwOwoKICAvLyBtYXAgdG8gcmVhbGlzdGljIHJhbmdlCiAgbGV0IHNjb3JlID0gKHRvdGFsIC8gY291bnQpICogMTA7CgogIC8vIHNsaWdodCBjb21wcmVzc2lvbiBzbyBub3QgZXZlcnlvbmUgaGl0cyA4KwogIHNjb3JlID0gMyArIChzY29yZSAqIDAuNyk7CgogIHJldHVybiBNYXRoLm1pbig5LjUsIHNjb3JlKTsKfQpmdW5jdGlvbiBjYWxjdWxhdGVSZXN1bHRzKCkgewogCmlmIChwb2ludHMubGVuZ3RoIDwgbWFya2VyTGFiZWxzLmxlbmd0aCkgewppbnN0cnVjdGlvbnMuaW5uZXJUZXh0ID0gIllvdSBtaXNzZWQgc29tZSBwb2ludHMg4oCUIHVuZG8gb3IgcmVzZXQiOwpyZXR1cm47Cn0KCnRyeSB7CmNvbnN0IGNoaW4gPSBwb2ludHNbMF07CmNvbnN0IGxlZnRaeWcgPSBwb2ludHNbMV07CmNvbnN0IHJpZ2h0WnlnID0gcG9pbnRzWzJdOwpjb25zdCBnbGFiZWxsYSA9IHBvaW50c1szXTsKY29uc3Qgc3VibmFzYWxlID0gcG9pbnRzWzRdOwpjb25zdCBsZWZ0SXJpcyA9IHBvaW50c1s1XTsKY29uc3QgcmlnaHRJcmlzID0gcG9pbnRzWzZdOwpjb25zdCBsZWZ0RXllT3V0ZXIgPSBwb2ludHNbN107CmNvbnN0IGxlZnRFeWVJbm5lciA9IHBvaW50c1s4XTsKY29uc3QgcmlnaHRFeWVPdXRlciA9IHBvaW50c1s5XTsKY29uc3QgcmlnaHRFeWVJbm5lciA9IHBvaW50c1sxMF07CmNvbnN0IHVwcGVyTGlwID0gcG9pbnRzWzExXTsKY29uc3QgcGhpbHRydW1Ub3AgPSBwb2ludHNbMTJdOwoKY29uc3QgYml6eWdvbWF0aWMgPSBkaXN0YW5jZShsZWZ0WnlnLCByaWdodFp5Zyk7CmNvbnN0IGlwZCA9IGRpc3RhbmNlKGxlZnRJcmlzLCByaWdodElyaXMpOwpjb25zdCBtaWRmYWNlSGVpZ2h0ID0gdXBwZXJMaXAueSAtIGdsYWJlbGxhLnk7CmNvbnN0IGxvd2VyVGhpcmRIZWlnaHQgPSBjaGluLnkgLSB1cHBlckxpcC55Owpjb25zdCB0b3RhbEhlaWdodCA9IGNoaW4ueSAtIGdsYWJlbGxhLnk7CgppZiAobWlkZmFjZUhlaWdodCA8PSAwIHx8IHRvdGFsSGVpZ2h0IDw9IDApIHRocm93IG5ldyBFcnJvcigiQmFkIHBvaW50cyIpOwoKY29uc3QgRldIUiA9IGJpenlnb21hdGljIC8gbWlkZmFjZUhlaWdodDsKY29uc3QgbWlkZmFjZVJhdGlvID0gaXBkIC8gbWlkZmFjZUhlaWdodDsKY29uc3QgRVNSID0gaXBkIC8gYml6eWdvbWF0aWM7Cgpjb25zdCBjaGluUGhpbCA9IGxvd2VyVGhpcmRIZWlnaHQgLyAodXBwZXJMaXAueSAtIHBoaWx0cnVtVG9wLnkpOwoKCmNvbnN0IGxlZnRUaWx0ID0gTWF0aC5hdGFuMigKICBsZWZ0RXllT3V0ZXIueSAtIGxlZnRFeWVJbm5lci55LAogIGxlZnRFeWVPdXRlci54IC0gbGVmdEV5ZUlubmVyLngKKTsKCmNvbnN0IHJpZ2h0VGlsdCA9IE1hdGguYXRhbjIoCiAgcmlnaHRFeWVPdXRlci55IC0gcmlnaHRFeWVJbm5lci55LAogIHJpZ2h0RXllT3V0ZXIueCAtIHJpZ2h0RXllSW5uZXIueAopOwoKbGV0IGF2Z1RpbHRSYWQgPSAobGVmdFRpbHQgKyByaWdodFRpbHQpIC8gMjsKbGV0IGNhbnRoYWxUaWx0ID0gZGVncmVlcyhhdmdUaWx0UmFkKTsKCi8vIE5vcm1hbGl6ZSB0byAw4oCTMTgwIHJhbmdlCmlmIChjYW50aGFsVGlsdCA8IDApIHsKICBjYW50aGFsVGlsdCA9IDE4MCArIGNhbnRoYWxUaWx0Owp9CmNvbnN0IGV5ZUFzcGVjdCA9ICgoZGlzdGFuY2UobGVmdEV5ZU91dGVyLCBsZWZ0RXllSW5uZXIpIC8gZGlzdGFuY2UocG9pbnRzWzE4XSwgcG9pbnRzWzE5XSkpICsKKGRpc3RhbmNlKHJpZ2h0RXllT3V0ZXIsIHJpZ2h0RXllSW5uZXIpIC8gZGlzdGFuY2UocG9pbnRzWzIxXSwgcG9pbnRzWzIyXSkpKSAvIDI7CmNvbnN0IGxvd2VyVGhpcmRQY3QgPSAobG93ZXJUaGlyZEhlaWdodCAvIHRvdGFsSGVpZ2h0KSAqIDEwMDsKY29uc3QgY2hlZWtib25lUmF0aW8gPSBiaXp5Z29tYXRpYyAvIHRvdGFsSGVpZ2h0OwovLyBORVcgUkFUSU9TCgpjb25zdCBpbnRlcmNhbnRoYWwgPSBkaXN0YW5jZShsZWZ0RXllSW5uZXIsIHJpZ2h0RXllSW5uZXIpOwpjb25zdCBleWVXaWR0aEF2ZyA9IChkaXN0YW5jZShsZWZ0RXllT3V0ZXIsIGxlZnRFeWVJbm5lcikgKyBkaXN0YW5jZShyaWdodEV5ZU91dGVyLCByaWdodEV5ZUlubmVyKSkgLyAyOwpjb25zdCBtb3V0aFdpZHRoID0gZGlzdGFuY2UocG9pbnRzWzE2XSwgcG9pbnRzWzE3XSk7CmNvbnN0IG5vc2VXaWR0aCA9IGRpc3RhbmNlKHBvaW50c1syMl0sIHBvaW50c1syM10pOwpjb25zdCBqYXdXaWR0aCA9IGRpc3RhbmNlKHBvaW50c1syNF0sIHBvaW50c1syNV0pOwpjb25zdCBicm93V2lkdGggPSBkaXN0YW5jZShwb2ludHNbMTNdLCBwb2ludHNbMTRdKTsKY29uc3Qgbm9zZUhlaWdodCA9IGRpc3RhbmNlKHBvaW50c1syNl0sIHN1Ym5hc2FsZSk7CmNvbnN0IHBoaWx0cnVtTGVuZ3RoID0gZGlzdGFuY2UocGhpbHRydW1Ub3AsIHVwcGVyTGlwKTsKCmNvbnN0IGZhY2VXaWR0aCA9IGJpenlnb21hdGljOwpjb25zdCBmYWNlSGVpZ2h0ID0gdG90YWxIZWlnaHQ7CgovLyAxCmNvbnN0IGludGVyY2FudGhhbFJhdGlvID0gaW50ZXJjYW50aGFsIC8gZXllV2lkdGhBdmc7CgovLyAyCmNvbnN0IGV5ZVRvRmFjZVdpZHRoID0gZXllV2lkdGhBdmcgLyBmYWNlV2lkdGg7CgovLyAzCmNvbnN0IG5vc2VUb0ZhY2VXaWR0aCA9IG5vc2VXaWR0aCAvIGZhY2VXaWR0aDsKCi8vIDQKY29uc3QgbW91dGhUb0ZhY2VXaWR0aCA9IG1vdXRoV2lkdGggLyBmYWNlV2lkdGg7CgovLyA1CmNvbnN0IGphd1RvQ2hlZWtib25lID0gamF3V2lkdGggLyBiaXp5Z29tYXRpYzsKCi8vIDYKCgovLyA3CmNvbnN0IHBoaWx0cnVtUmF0aW8gPSBwaGlsdHJ1bUxlbmd0aCAvIGxvd2VyVGhpcmRIZWlnaHQ7CgovLyA4CmNvbnN0IGxpcEhlaWdodFJhdGlvID0gZGlzdGFuY2UocG9pbnRzWzMyXSwgcG9pbnRzWzMzXSkgLyBtb3V0aFdpZHRoOwoKLy8gOQoKLy8gMTAKCgovLyAxMQpjb25zdCBleWVTcGFjaW5nUmF0aW8gPSBpbnRlcmNhbnRoYWwgLyBmYWNlV2lkdGg7CgovLyAxMgpjb25zdCBjaGluSGVpZ2h0UmF0aW8gPSBsb3dlclRoaXJkSGVpZ2h0IC8gZmFjZUhlaWdodDsKCgovLyAxMwpjb25zdCBlYXJGbGFyZVJhdGlvID0gZGlzdGFuY2UocG9pbnRzWzMwXSwgcG9pbnRzWzMxXSkgLyBmYWNlV2lkdGg7CgovLyAxNApjb25zdCBicm93VGhpY2tuZXNzUmF0aW8gPQogIChkaXN0YW5jZShwb2ludHNbMTNdLCBwb2ludHNbMzRdKSArCiAgIGRpc3RhbmNlKHBvaW50c1sxNF0sIHBvaW50c1szNV0pKSAvIDIgLyBmYWNlSGVpZ2h0OwoKLy8gMTUKY29uc3QgYnJvd0V5ZVJhdGlvID0KICAoZGlzdGFuY2UocG9pbnRzWzEzXSwgcG9pbnRzWzE4XSkgKwogICBkaXN0YW5jZShwb2ludHNbMTRdLCBwb2ludHNbMjBdKSkgLyAyIC8gZmFjZUhlaWdodDsKCi8vIDE2CmNvbnN0IG5vc2VQcm9qZWN0aW9uUmF0aW8gPQogIGRpc3RhbmNlKHBvaW50c1sxNV0sIHBvaW50c1syNl0pIC8gZmFjZUhlaWdodDsKCi8vIDE3CmNvbnN0IGxvd2VyRmFjZVdpZHRoUmF0aW8gPSBqYXdXaWR0aCAvIGZhY2VXaWR0aDsKCi8vIDE4CmNvbnN0IGZvcmVoZWFkSGVpZ2h0UmF0aW8gPQogIGRpc3RhbmNlKHBvaW50c1szNl0sIGdsYWJlbGxhKSAvIGZhY2VIZWlnaHQ7IC8vIG5lZWRzIGhhaXJsaW5lIG1hcmtlcgoKLy8gMTkKY29uc3QgYnJvd1N5bW1ldHJ5UmF0aW8gPQogIE1hdGguYWJzKHBvaW50c1sxM10ueSAtIHBvaW50c1sxNF0ueSkgLyBmYWNlSGVpZ2h0OwoKLy8gMjAKY29uc3QgZXllVmVydGljYWxSYXRpbyA9CiAgKGRpc3RhbmNlKHBvaW50c1sxOF0sIHBvaW50c1sxOV0pICsKICAgZGlzdGFuY2UocG9pbnRzWzIwXSwgcG9pbnRzWzIxXSkpIC8gMiAvCiAgIGV5ZVdpZHRoQXZnOwoKLy8gMjEKY29uc3Qgbm9zZUxlbmd0aFJhdGlvID0KICBkaXN0YW5jZShwb2ludHNbMjZdLCBzdWJuYXNhbGUpIC8gZmFjZUhlaWdodDsKCi8vIDIyCmNvbnN0IG1vdXRoSGVpZ2h0UmF0aW8gPQogIGRpc3RhbmNlKHBvaW50c1sxMV0sIHBvaW50c1szMl0pIC8gZmFjZUhlaWdodDsKCi8vIDIzCmNvbnN0IGN1cGlkQm93UmF0aW8gPQogIGRpc3RhbmNlKHBvaW50c1sxMl0sIHBvaW50c1sxMV0pIC8gZmFjZUhlaWdodDsKCi8vIDI0CmNvbnN0IGluZnJhb3JiaXRhbFJhdGlvID0KICAoZGlzdGFuY2UocG9pbnRzWzI3XSwgcG9pbnRzWzE4XSkgKwogICBkaXN0YW5jZShwb2ludHNbMjhdLCBwb2ludHNbMjBdKSkgLyAyIC8KICAgZmFjZUhlaWdodDsKCi8vIDI1CmNvbnN0IGNoZWVrSG9sbG93UmF0aW8gPQogIChkaXN0YW5jZShwb2ludHNbMjddLCBsZWZ0WnlnKSArCiAgIGRpc3RhbmNlKHBvaW50c1syOF0sIHJpZ2h0WnlnKSkgLyAyIC8KICAgZmFjZUhlaWdodDsKCi8vIDI2CmNvbnN0IGNoaW5XaWR0aFJhdGlvID0KICBkaXN0YW5jZShwb2ludHNbMzddLCBwb2ludHNbMzhdKSAvIGZhY2VXaWR0aDsKCi8vIDI3CmNvbnN0IGNvbXBhY3RuZXNzUmF0aW8gPQogIGZhY2VXaWR0aCAvIGZhY2VIZWlnaHQ7CgovLyAyOApjb25zdCBleWVUaWx0U3ltbWV0cnlSYXRpbyA9CiAgTWF0aC5hYnMoZGVncmVlcyhsZWZ0VGlsdCkgLSBkZWdyZWVzKHJpZ2h0VGlsdCkpOwoKLy8gMjkKY29uc3QgamF3Q3VydmVSYXRpbyA9CiAgZGlzdGFuY2UocG9pbnRzWzI0XSwgY2hpbikgLyBkaXN0YW5jZShwb2ludHNbMjRdLCBwb2ludHNbMjVdKTsKCi8vIDMwCmNvbnN0IG9yYml0YWxXaWR0aFJhdGlvID0KICAoZGlzdGFuY2UocG9pbnRzWzddLCBwb2ludHNbOF0pICsKICAgZGlzdGFuY2UocG9pbnRzWzldLCBwb2ludHNbMTBdKSkgLyAyIC8KICAgZmFjZVdpZHRoOwoKLy8gMzEKY29uc3QgYnJvd1JpZGdlUmF0aW8gPQogIChkaXN0YW5jZShwb2ludHNbMTNdLCBwb2ludHNbMjZdKSArCiAgIGRpc3RhbmNlKHBvaW50c1sxNF0sIHBvaW50c1syNl0pKSAvIDIgLwogICBmYWNlSGVpZ2h0OwovLyAxMwoKCi8vIDE0CgoKLy8gMTUKY29uc3Qgc3ltbWV0cnkgPSBNYXRoLmFicygKICBkaXN0YW5jZShsZWZ0WnlnLCBnbGFiZWxsYSkgLSBkaXN0YW5jZShyaWdodFp5ZywgZ2xhYmVsbGEpCikgLyBmYWNlV2lkdGg7Cgpjb25zdCBzY29yZXMgPSB7CkZXSFI6IHN0cmljdFJhbmdlU2NvcmUoRldIUiwgaWRlYWxSYW5nZXMuRldIUi5taW4sIGlkZWFsUmFuZ2VzLkZXSFIubWF4KSwKbWlkZmFjZTogc3RyaWN0UmFuZ2VTY29yZShtaWRmYWNlUmF0aW8sIGlkZWFsUmFuZ2VzLm1pZGZhY2UubWluLCBpZGVhbFJhbmdlcy5taWRmYWNlLm1heCksCkVTUjogc3RyaWN0UmFuZ2VTY29yZShFU1IsIGlkZWFsUmFuZ2VzLkVTUi5taW4sIGlkZWFsUmFuZ2VzLkVTUi5tYXgpLApjaGluUGhpbDogc3RyaWN0UmFuZ2VTY29yZShjaGluUGhpbCwgaWRlYWxSYW5nZXMuY2hpblBoaWwubWluLCBpZGVhbFJhbmdlcy5jaGluUGhpbC5tYXgpLApjYW50aGFsVGlsdDogc3RyaWN0UmFuZ2VTY29yZShjYW50aGFsVGlsdCwgaWRlYWxSYW5nZXMuY2FudGhhbFRpbHQubWluLCBpZGVhbFJhbmdlcy5jYW50aGFsVGlsdC5tYXgpLApleWVBc3BlY3Q6IHN0cmljdFJhbmdlU2NvcmUoZXllQXNwZWN0LCBpZGVhbFJhbmdlcy5leWVBc3BlY3QubWluLCBpZGVhbFJhbmdlcy5leWVBc3BlY3QubWF4KSwKbG93ZXJUaGlyZFBjdDogc3RyaWN0UmFuZ2VTY29yZShsb3dlclRoaXJkUGN0LCBpZGVhbFJhbmdlcy5sb3dlclRoaXJkUGN0Lm1pbiwgaWRlYWxSYW5nZXMubG93ZXJUaGlyZFBjdC5tYXgpLApjaGVla2JvbmVSYXRpbzogc3RyaWN0UmFuZ2VTY29yZShjaGVla2JvbmVSYXRpbywgaWRlYWxSYW5nZXMuY2hlZWtib25lUmF0aW8ubWluLCBpZGVhbFJhbmdlcy5jaGVla2JvbmVSYXRpby5tYXgpLAppbnRlcmNhbnRoYWxSYXRpbzogc3RyaWN0UmFuZ2VTY29yZShpbnRlcmNhbnRoYWxSYXRpbywgaWRlYWxSYW5nZXMuaW50ZXJjYW50aGFsUmF0aW8ubWluLCBpZGVhbFJhbmdlcy5pbnRlcmNhbnRoYWxSYXRpby5tYXgpLApleWVUb0ZhY2VXaWR0aDogc3RyaWN0UmFuZ2VTY29yZShleWVUb0ZhY2VXaWR0aCwgaWRlYWxSYW5nZXMuZXllVG9GYWNlV2lkdGgubWluLCBpZGVhbFJhbmdlcy5leWVUb0ZhY2VXaWR0aC5tYXgpLApub3NlVG9GYWNlV2lkdGg6IHN0cmljdFJhbmdlU2NvcmUobm9zZVRvRmFjZVdpZHRoLCBpZGVhbFJhbmdlcy5ub3NlVG9GYWNlV2lkdGgubWluLCBpZGVhbFJhbmdlcy5ub3NlVG9GYWNlV2lkdGgubWF4KSwKbW91dGhUb0ZhY2VXaWR0aDogc3RyaWN0UmFuZ2VTY29yZShtb3V0aFRvRmFjZVdpZHRoLCBpZGVhbFJhbmdlcy5tb3V0aFRvRmFjZVdpZHRoLm1pbiwgaWRlYWxSYW5nZXMubW91dGhUb0ZhY2VXaWR0aC5tYXgpLApqYXdUb0NoZWVrYm9uZTogc3RyaWN0UmFuZ2VTY29yZShqYXdUb0NoZWVrYm9uZSwgaWRlYWxSYW5nZXMuamF3VG9DaGVla2JvbmUubWluLCBpZGVhbFJhbmdlcy5qYXdUb0NoZWVrYm9uZS5tYXgpLApwaGlsdHJ1bVJhdGlvOiBzdHJpY3RSYW5nZVNjb3JlKHBoaWx0cnVtUmF0aW8sIGlkZWFsUmFuZ2VzLnBoaWx0cnVtUmF0aW8ubWluLCBpZGVhbFJhbmdlcy5waGlsdHJ1bVJhdGlvLm1heCksCmxpcEhlaWdodFJhdGlvOiBzdHJpY3RSYW5nZVNjb3JlKGxpcEhlaWdodFJhdGlvLCBpZGVhbFJhbmdlcy5saXBIZWlnaHRSYXRpby5taW4sIGlkZWFsUmFuZ2VzLmxpcEhlaWdodFJhdGlvLm1heCksCmV5ZVNwYWNpbmdSYXRpbzogc3RyaWN0UmFuZ2VTY29yZShleWVTcGFjaW5nUmF0aW8sIGlkZWFsUmFuZ2VzLmV5ZVNwYWNpbmdSYXRpby5taW4sIGlkZWFsUmFuZ2VzLmV5ZVNwYWNpbmdSYXRpby5tYXgpLApjaGluSGVpZ2h0UmF0aW86IHN0cmljdFJhbmdlU2NvcmUoY2hpbkhlaWdodFJhdGlvLCBpZGVhbFJhbmdlcy5jaGluSGVpZ2h0UmF0aW8ubWluLCBpZGVhbFJhbmdlcy5jaGluSGVpZ2h0UmF0aW8ubWF4KSwKc3ltbWV0cnk6IHN0cmljdFJhbmdlU2NvcmUoc3ltbWV0cnksIGlkZWFsUmFuZ2VzLnN5bW1ldHJ5Lm1pbiwgaWRlYWxSYW5nZXMuc3ltbWV0cnkubWF4KQoKfTsKCmNvbnN0IHdlaWdodHMgPSB7CiAgRldIUjogMS4zNSwKICBtaWRmYWNlOiAxLjExLAogIEVTUjogMC4zMywKICBjaGluUGhpbDogMC45MiwKICBjYW50aGFsVGlsdDogMC43NCwKICBleWVBc3BlY3Q6IDAuMDksCiAgbG93ZXJUaGlyZFBjdDogMC42NSwKICBjaGVla2JvbmVSYXRpbzogMC44NCwKICBpbnRlcmNhbnRoYWxSYXRpbzogMC4xOCwKICBleWVUb0ZhY2VXaWR0aDogMC4yOCwKICBub3NlVG9GYWNlV2lkdGg6IDAuNjUsCiAgbW91dGhUb0ZhY2VXaWR0aDogMC40NiwKICBqYXdUb0NoZWVrYm9uZTogMC44MywKICBwaGlsdHJ1bVJhdGlvOiAwLjU0LAogIGxpcEhlaWdodFJhdGlvOiAwLjE4LAogIGV5ZVNwYWNpbmdSYXRpbzogMC4yOCwKICBjaGluSGVpZ2h0UmF0aW86IDAuMjAsCiAgc3ltbWV0cnk6IDAuNTAsCiAgIGVhckZsYXJlUmF0aW86IDAuMjUsCiAgYnJvd1RoaWNrbmVzc1JhdGlvOiAwLjMwLAogIGJyb3dFeWVSYXRpbzogMC4zNSwKICBub3NlUHJvamVjdGlvblJhdGlvOiAwLjUwLAogIG1hbmRpYmxlQW5nbGVSYXRpbzogMC43MCwKICBsb3dlckZhY2VXaWR0aFJhdGlvOiAwLjY1LAogIGZvcmVoZWFkSGVpZ2h0UmF0aW86IDAuNDAsCiAgYnJvd1N5bW1ldHJ5UmF0aW86IDAuNDUsCiAgZXllVmVydGljYWxSYXRpbzogMC4zNSwKICBub3NlTGVuZ3RoUmF0aW86IDAuNTUsCiAgbW91dGhIZWlnaHRSYXRpbzogMC4zMCwKICBjdXBpZEJvd1JhdGlvOiAwLjIwLAogIGluZnJhb3JiaXRhbFJhdGlvOiAwLjQ1LAogIGNoZWVrSG9sbG93UmF0aW86IDAuNDAsCiAgY2hpbldpZHRoUmF0aW86IDAuNjUsCiAgY29tcGFjdG5lc3NSYXRpbzogMC44MCwKICBleWVUaWx0U3ltbWV0cnlSYXRpbzogMC41MCwKICBqYXdDdXJ2ZVJhdGlvOiAwLjcwLAogIG9yYml0YWxXaWR0aFJhdGlvOiAwLjQwLAogIGJyb3dSaWRnZVJhdGlvOiAwLjUwCn07CmNvbnN0IGhhcm1vbnlTY29yZSA9IGNhbGN1bGF0ZUhhcm1vbnkoewogIEZXSFIsCiAgbWlkZmFjZTogbWlkZmFjZVJhdGlvLAogIGxvd2VyVGhpcmRQY3QsCiAgcGhpbHRydW1SYXRpbywKICBjaGluSGVpZ2h0UmF0aW8sCiAgaW50ZXJjYW50aGFsUmF0aW8sCiAgZXllU3BhY2luZ1JhdGlvLAogIGV5ZVRvRmFjZVdpZHRoLAogIG1vdXRoVG9GYWNlV2lkdGgsCiAgZm9yZWhlYWRIZWlnaHRSYXRpbywKICBzeW1tZXRyeSwKICBicm93U3ltbWV0cnlSYXRpbywKICBleWVUaWx0U3ltbWV0cnlSYXRpbwp9LCBpZGVhbFJhbmdlcyk7Cgpjb25zdCBkaW1vcnBoaXNtU2NvcmUgPSBjYWxjdWxhdGVEaW1vcnBoaXNtKHsKICBGV0hSLAogIGphd1RvQ2hlZWtib25lLAogIGNoZWVrYm9uZVJhdGlvLAogIG5vc2VUb0ZhY2VXaWR0aCwKICBjaGluUGhpbCwKICBsb3dlclRoaXJkUGN0LAogIGNoaW5IZWlnaHRSYXRpbywKICBicm93UmlkZ2VSYXRpbywKICBub3NlUHJvamVjdGlvblJhdGlvLAogIGxvd2VyRmFjZVdpZHRoUmF0aW8sCiAgY2hpbldpZHRoUmF0aW8KfSwgaWRlYWxSYW5nZXMpOwoKY29uc3QgYW5ndWxhcml0eVNjb3JlID0gY2FsY3VsYXRlQW5ndWxhcml0eSh7CiAgamF3VG9DaGVla2JvbmUsCiAgY2hlZWtib25lUmF0aW8sCiAgY2hpbkhlaWdodFJhdGlvLAogIEZXSFIsCiAgY2hlZWtIb2xsb3dSYXRpbywKICBpbmZyYW9yYml0YWxSYXRpbywKICBvcmJpdGFsV2lkdGhSYXRpbywKICBjb21wYWN0bmVzc1JhdGlvCn0sIGlkZWFsUmFuZ2VzKTsKCnJlbmRlclNlY29uZGFyeVNjb3JlcyhoYXJtb255U2NvcmUsIGRpbW9ycGhpc21TY29yZSwgYW5ndWxhcml0eVNjb3JlKTsKCgoKbGV0IHRvdGFsID0gMDsKbGV0IHdzdW0gPSAwOwoKLy8gV2VpZ2h0ZWQgYWdncmVnYXRpb24KZm9yIChsZXQgayBpbiBzY29yZXMpIHsKICBpZiAod2VpZ2h0c1trXSAhPT0gdW5kZWZpbmVkICYmICFpc05hTihzY29yZXNba10pKSB7CiAgICB0b3RhbCArPSBzY29yZXNba10gKiB3ZWlnaHRzW2tdOwogICAgd3N1bSArPSB3ZWlnaHRzW2tdOwogIH0KfQoKaWYgKHdzdW0gPT09IDApIHsKICBjb25zb2xlLmVycm9yKCJXZWlnaHQgc3VtIGlzIHplcm8uIENoZWNrIHdlaWdodHMgb2JqZWN0LiIpOwogIHJldHVybjsKfQoKLy8gMOKAkzEgbm9ybWFsaXplZCB3ZWlnaHRlZCBhdmVyYWdlCmxldCByYXcgPSB0b3RhbCAvIHdzdW07CnJhdyA9IE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHJhdykpOwoKLyoKICBTdHJpY3QgaHVtYW4gZGlzdHJpYnV0aW9uIG1vZGVsCiAgLSBTbGlnaHQgaGFyc2ggY3VydmUKICAtIFRydWUgYXZlcmFnZSDiiYggNQogIC0gTm8gYXJ0aWZpY2lhbCBmbGF0dGVuaW5nCiovCgovLyBDb250cm9sbGVkIG5vbmxpbmVhciBkaXN0cmlidXRpb24KY29uc3QgY3VydmVFeHBvbmVudCA9IDEuNjsgLy8gaGFyc2hlciBjdXJ2ZQpsZXQgY3VydmVkID0gTWF0aC5wb3cocmF3LCBjdXJ2ZUV4cG9uZW50KTsKCi8vIFRydWUgc3RhdGlzdGljYWwgbWFwcGluZwovLyAwICAgLT4gMy4wCi8vIDAuNSAtPiA1LjAKLy8gMC44IC0+IH42LjgKLy8gMC45IC0+IH43LjYKLy8gMS4wIC0+IDguOCBtYXgKCmxldCBmaW5hbFNjb3JlID0gMyArIChjdXJ2ZWQgKiA1KTsKCi8vIFNvZnQgY2FwIHN5c3RlbSAocHJldmVudHMgOSsgaW5mbGF0aW9uKQppZiAoZmluYWxTY29yZSA+IDcpIGZpbmFsU2NvcmUgPSBmaW5hbFNjb3JlOwoKLy8gRmxvb3IgcmVhbGlzbQppZiAoZmluYWxTY29yZSA8IDYuNSkgZmluYWxTY29yZSA9IGZpbmFsU2NvcmUtMC42NTsKCmZpbmFsU2NvcmUgPSBwYXJzZUZsb2F0KGZpbmFsU2NvcmUudG9GaXhlZCgyKSk7Cgpjb25zdCBjYXJkU2NvcmVzID0gZ2V0Q2FyZFNjb3Jlcyh7CiAgZmluYWxTY29yZSwKICBoYXJtb255OiBoYXJtb255U2NvcmUsCiAgZGltb3JwaGlzbTogZGltb3JwaGlzbVNjb3JlLAogIGFuZ3VsYXJpdHk6IGFuZ3VsYXJpdHlTY29yZSwKICBjaGVla2JvbmVTY29yZQp9KTsKCnJlbmRlckZpbmFsQ2FyZChjYXJkU2NvcmVzKTsKCgpsZXQgc3VyZ2VyeSA9ICI8aDM+U3VyZ2VyeSBSZWNvbW1uZGVkOjwvaDM+PHVsPiI7CmxldCBzdXJnZXJ5Q291bnQgPSAwOwppZiAoRldIUiA8IGlkZWFsUmFuZ2VzLkZXSFIubWluKSB7IHN1cmdlcnkgKz0gIjxsaT5Mb3cgRldIUiDihpIgenlnIHdpZGVuaW5nIGltcGxhbnRzIG9yIGphdyBhbmdsZSBmaWxsZXJzPC9saT4iOyBzdXJnZXJ5Q291bnQrKzsgfQppZiAobWlkZmFjZVJhdGlvID4gaWRlYWxSYW5nZXMubWlkZmFjZS5tYXgpIHsgc3VyZ2VyeSArPSAiPGxpPkxvbmcgbWlkZmFjZSDihpIgTGVmb3J0IDEgKyBDQ1cgcm90YXRpb24gKyByaGlubyBjb21ibzwvbGk+Ijsgc3VyZ2VyeUNvdW50Kys7IH0KaWYgKGNhbnRoYWxUaWx0IDwgODgpIHsgc3VyZ2VyeSArPSAiPGxpPk5lZ2F0aXZlIHRpbHQg4oaSIGNhbnRob3BsYXN0eSArIHVuZGVyLWV5ZSBmYXQgZ3JhZnQ8L2xpPiI7IHN1cmdlcnlDb3VudCsrOyB9CmlmIChleWVBc3BlY3QgPCBpZGVhbFJhbmdlcy5leWVBc3BlY3QubWluKSB7IHN1cmdlcnkgKz0gIjxsaT5Sb3VuZGVkIGV5ZXMg4oaSIGxhdGVyYWwgY2FudGhvcGxhc3R5ICsgYmxlcGg8L2xpPiI7IHN1cmdlcnlDb3VudCsrOyB9CmlmIChsb3dlclRoaXJkUGN0IDwgaWRlYWxSYW5nZXMubG93ZXJUaGlyZFBjdC5taW4pIHsgc3VyZ2VyeSArPSAiPGxpPlNob3J0IGxvd2VyIHRoaXJkIOKGkiBzbGlkaW5nIGdlbmlvICsgY2hpbiB3aW5nIGltcGxhbnQ8L2xpPiI7IHN1cmdlcnlDb3VudCsrOyB9CmlmIChjaGVla2JvbmVSYXRpbyA8IGlkZWFsUmFuZ2VzLmNoZWVrYm9uZVJhdGlvLm1pbikgeyBzdXJnZXJ5ICs9ICI8bGk+RmxhdCBjaGVla3Mg4oaSIGluZnJhb3JiaXRhbCByaW0gKyBtYWxhciBpbXBsYW50czwvbGk+Ijsgc3VyZ2VyeUNvdW50Kys7IH0KaWYgKEVTUiA8IGlkZWFsUmFuZ2VzLkVTUi5taW4pIHsgc3VyZ2VyeSArPSAiPGxpPldpZGUtc2V0IGV5ZXMg4oaSIG9yYml0YWwgZGVjb21wcmVzc2lvbiBvciBmaWxsZXIgY29wZTwvbGk+Ijsgc3VyZ2VyeUNvdW50Kys7IH0KaWYgKGNoaW5QaGlsIDwgaWRlYWxSYW5nZXMuY2hpblBoaWwubWluKSB7IHN1cmdlcnkgKz0gIjxsaT5Mb25nIHBoaWx0cnVtIOKGkiBsaXAgbGlmdCArIHJoaW5vIGJhc2UgcmVkdWN0aW9uPC9saT4iOyBzdXJnZXJ5Q291bnQrKzsgfQppZiAoc3VyZ2VyeUNvdW50ID09PSAwKSBzdXJnZXJ5ICs9ICI8bGk+SGFsbyBzdGF0dXMg4oCUIG5vIHN1cmdlcnkgbmVlZGVkPC9saT4iOwpzdXJnZXJ5ICs9ICI8L3VsPjxwPjxzdHJvbmc+VG90YWwgc3VyZ2VyaWVzIHN1Z2dlc3RlZDogIiArIHN1cmdlcnlDb3VudCArICIgQXNjZW5kID48L3N0cm9uZz48L3A+IjsKaWYgKGphd1RvQ2hlZWtib25lIDwgaWRlYWxSYW5nZXMuamF3VG9DaGVla2JvbmUubWluKSB7CiAgc3VyZ2VyeSArPSAiPGxpPldlYWsgamF3IHJlbGF0aXZlIHRvIGNoZWVrYm9uZXMg4oaSIGphdyBhbmdsZSBpbXBsYW50czwvbGk+IjsKICBzdXJnZXJ5Q291bnQrKzsKfQoKaWYgKG5vc2VUb0ZhY2VXaWR0aCA+IGlkZWFsUmFuZ2VzLm5vc2VUb0ZhY2VXaWR0aC5tYXgpIHsKICBzdXJnZXJ5ICs9ICI8bGk+V2lkZSBub3NlIOKGkiBhbGFyIGJhc2UgcmVkdWN0aW9uPC9saT4iOwogIHN1cmdlcnlDb3VudCsrOwp9CgppZiAobW91dGhUb0ZhY2VXaWR0aCA8IGlkZWFsUmFuZ2VzLm1vdXRoVG9GYWNlV2lkdGgubWluKSB7CiAgc3VyZ2VyeSArPSAiPGxpPk5hcnJvdyBtb3V0aCDihpIgbGlwIGxpZnQgKyBjb3JuZXIgbGlmdDwvbGk+IjsKICBzdXJnZXJ5Q291bnQrKzsKfQoKaWYgKHN5bW1ldHJ5ID4gaWRlYWxSYW5nZXMuc3ltbWV0cnkubWF4KSB7CiAgc3VyZ2VyeSArPSAiPGxpPkZhY2lhbCBhc3ltbWV0cnkg4oaSIGZpbGxlciBiYWxhbmNpbmcgb3Igc3VyZ2ljYWwgY29ycmVjdGlvbjwvbGk+IjsKICBzdXJnZXJ5Q291bnQrKzsKfQppZiAoRldIUiA8IGlkZWFsUmFuZ2VzLkZXSFIubWluKSB7CiAgc3VyZ2VyeSArPSAiPGxpPkN1c3RvbSB6eWdvbWF0aWMgaW1wbGFudHMgZm9yIG1pZGZhY2Ugd2lkdGggZW5oYW5jZW1lbnQ8L2xpPiI7CiAgc3VyZ2VyeUNvdW50Kys7Cn0KCmlmIChGV0hSID4gaWRlYWxSYW5nZXMuRldIUi5tYXgpIHsKICBzdXJnZXJ5ICs9ICI8bGk+QnVjY2FsIGZhdCByZW1vdmFsIChpZiBleGNlc3MgbG93ZXIgbWlkZmFjZSB2b2x1bWUgcHJlc2VudCk8L2xpPiI7CiAgc3VyZ2VyeUNvdW50Kys7Cn0KCmlmIChtaWRmYWNlUmF0aW8gPiBpZGVhbFJhbmdlcy5taWRmYWNlLm1heCkgewogIHN1cmdlcnkgKz0gIjxsaT5TdWJuYXNhbCBsaXAgbGlmdCB0byByZWR1Y2UgdmVydGljYWwgbWlkZmFjZSBhcHBlYXJhbmNlPC9saT4iOwogIHN1cmdlcnlDb3VudCsrOwp9CgppZiAoamF3VG9DaGVla2JvbmUgPCBpZGVhbFJhbmdlcy5qYXdUb0NoZWVrYm9uZS5taW4pIHsKICBzdXJnZXJ5ICs9ICI8bGk+TWFuZGlidWxhciBhbmdsZSBpbXBsYW50cyBmb3IgamF3IHdpZHRoIGF1Z21lbnRhdGlvbjwvbGk+IjsKICBzdXJnZXJ5Q291bnQrKzsKfQoKaWYgKGphd1RvQ2hlZWtib25lID4gaWRlYWxSYW5nZXMuamF3VG9DaGVla2JvbmUubWF4KSB7CiAgc3VyZ2VyeSArPSAiPGxpPk1hc3NldGVyIHJlZHVjdGlvbiAoQm90b3ggb3Igc3VyZ2ljYWwgY29udG91cmluZyk8L2xpPiI7CiAgc3VyZ2VyeUNvdW50Kys7Cn0KCmlmIChjaGluSGVpZ2h0UmF0aW8gPCBpZGVhbFJhbmdlcy5jaGluSGVpZ2h0UmF0aW8ubWluKSB7CiAgc3VyZ2VyeSArPSAiPGxpPlNsaWRpbmcgZ2VuaW9wbGFzdHkgZm9yIHZlcnRpY2FsIGNoaW4gbGVuZ3RoZW5pbmc8L2xpPiI7CiAgc3VyZ2VyeUNvdW50Kys7Cn0KCmlmIChjaGluSGVpZ2h0UmF0aW8gPiBpZGVhbFJhbmdlcy5jaGluSGVpZ2h0UmF0aW8ubWF4KSB7CiAgc3VyZ2VyeSArPSAiPGxpPlZlcnRpY2FsIHJlZHVjdGlvbiBnZW5pb3BsYXN0eTwvbGk+IjsKICBzdXJnZXJ5Q291bnQrKzsKfQoKCmlmIChjYW50aGFsVGlsdCA8IDg4KSB7CiAgc3VyZ2VyeSArPSAiPGxpPkxhdGVyYWwgY2FudGhvcGxhc3R5IGZvciB0aWx0IGNvcnJlY3Rpb248L2xpPiI7CiAgc3VyZ2VyeUNvdW50Kys7Cn0KCmlmIChjaGVla2JvbmVSYXRpbyA8IGlkZWFsUmFuZ2VzLmNoZWVrYm9uZVJhdGlvLm1pbikgewogIHN1cmdlcnkgKz0gIjxsaT5NYWxhciBhdWdtZW50YXRpb24gKGltcGxhbnQgb3IgZmF0IGdyYWZ0aW5nKTwvbGk+IjsKICBzdXJnZXJ5Q291bnQrKzsKfQoKCgoKCgpsZXQgc29mdG1heCA9ICI8aDM+U29mdG1heHhpbmcgVGlwczo8L2gzPjx1bD4iOwoKaWYgKHN5bW1ldHJ5ID4gaWRlYWxSYW5nZXMuc3ltbWV0cnkubWF4KQogIHNvZnRtYXggKz0gIjxsaT5Vc2UgYmVhcmQgc2hhZG93IG9yIHN0dWJibGUgdG8gbWFzayBhc3ltbWV0cnk8L2xpPiI7CiAgIHNvZnRtYXggKz0gIjxsaT5LZWVwIEhhaXJzIE9uIEZvcmVoZWFkIExpa2UgQSBNZWVzeSBGcmluZ3c8L2xpPiI7CgppZiAoamF3VG9DaGVla2JvbmUgPCBpZGVhbFJhbmdlcy5qYXdUb0NoZWVrYm9uZS5taW4pCiAgc29mdG1heCArPSAiPGxpPkdyb3cgdGhpY2tlciBzaWRlYnVybnMgdG8gY3JlYXRlIHZpc3VhbCBqYXcgd2lkdGg8L2xpPiI7CiAgIHNvZnRtYXggKz0gIjxsaT5TbGljayBCYWNrIEhhaXJzdHlsZSBXaXRoIFNpZGVidXJucyBHcm93bjwvbGk+IjsKCmlmIChleWVBc3BlY3QgPCBpZGVhbFJhbmdlcy5leWVBc3BlY3QubWluKQogIHNvZnRtYXggKz0gIjxsaT5Vc2Ugc3F1aW50aW5nIGV5ZSBleHByZXNzaW9uIChodW50ZXIgZXllcyB0cmFpbmluZyk8L2xpPiI7CiAgICBzb2Z0bWF4ICs9ICI8bGk+S2VlcCBleWVicm93cyB0aGlja2VyPC9saT4iOwoKaWYgKG5vc2VUb0ZhY2VXaWR0aCA+IGlkZWFsUmFuZ2VzLm5vc2VUb0ZhY2VXaWR0aC5tYXgpCiAgc29mdG1heCArPSAiPGxpPkNvbnRvdXJpbmcgb3IgbGlnaHRpbmcgZnJvbSB0b3AtZG93biB0byBzbGltIG5vc2U8L2xpPiI7CiBzb2Z0bWF4ICs9ICI8bGk+U2lkZXMgRmFkZWQgQW5kIFRvcCBWb2x1bWVkIHdpdGggbm8gaGFpcnMgZmFsbGluZyBvbiBmb3JlaGVhZDwvbGk+IjsKCiAgaWYgKEZXSFIgPCBpZGVhbFJhbmdlcy5GV0hSLm1pbikKICBzb2Z0bWF4ICs9ICI8bGk+VXNlIHNsaWdodGx5IGxvbmdlciB0b3AgaGFpcmN1dCB3aXRoIHRpZ2h0ZXIgc2lkZXMgdG8gY3JlYXRlIHBlcmNlaXZlZCBmYWNpYWwgd2lkdGg8L2xpPiI7CgppZiAoRldIUiA+IGlkZWFsUmFuZ2VzLkZXSFIubWF4KQogIHNvZnRtYXggKz0gIjxsaT5Bdm9pZCBvdmVybHkgd2lkZSBoYWlyc3R5bGVzIOKAlCBrZWVwIHNpZGVzIGZ1bGxlciB0byByZWR1Y2UgaG9yaXpvbnRhbCBleGFnZ2VyYXRpb248L2xpPiI7CgppZiAobWlkZmFjZVJhdGlvID4gaWRlYWxSYW5nZXMubWlkZmFjZS5tYXgpCiAgc29mdG1heCArPSAiPGxpPkhpZ2hlciBjaGVlayBjb250b3VyIHBsYWNlbWVudCBvciBzdWJ0bGUgdW5kZXItZXllIHNoYWRvdyBjYW4gdmlzdWFsbHkgc2hvcnRlbiBtaWRmYWNlPC9saT4iOwoKaWYgKHBoaWx0cnVtUmF0aW8gPiBpZGVhbFJhbmdlcy5waGlsdHJ1bVJhdGlvLm1heCkKICBzb2Z0bWF4ICs9ICI8bGk+TGlnaHQgbW91c3RhY2hlIHNoYWRvdyBjYW4gdmlzdWFsbHkgc2hvcnRlbiBwaGlsdHJ1bSBsZW5ndGg8L2xpPiI7CgppZiAoY2hpbkhlaWdodFJhdGlvIDwgaWRlYWxSYW5nZXMuY2hpbkhlaWdodFJhdGlvLm1pbikKICBzb2Z0bWF4ICs9ICI8bGk+R3JvdyBsaWdodCBjaGluIHN0dWJibGUgdG8gaW5jcmVhc2UgbG93ZXItdGhpcmQgdmlzdWFsIHdlaWdodDwvbGk+IjsKCmlmIChjaGluSGVpZ2h0UmF0aW8gPiBpZGVhbFJhbmdlcy5jaGluSGVpZ2h0UmF0aW8ubWF4KQogIHNvZnRtYXggKz0gIjxsaT5LZWVwIGNoaW4gY2xlYW4tc2hhdmVuIHRvIGF2b2lkIGV4YWdnZXJhdGluZyB2ZXJ0aWNhbCBsZW5ndGg8L2xpPiI7CgppZiAoZXllU3BhY2luZ1JhdGlvIDwgaWRlYWxSYW5nZXMuZXllU3BhY2luZ1JhdGlvLm1pbikKICBzb2Z0bWF4ICs9ICI8bGk+QXZvaWQgaGVhdnkgaW5uZXIgYnJvdyBncm9vbWluZyDigJQgbWFpbnRhaW4gbmF0dXJhbCBzcGFjaW5nIGlsbHVzaW9uPC9saT4iOwoKaWYgKGV5ZVNwYWNpbmdSYXRpbyA+IGlkZWFsUmFuZ2VzLmV5ZVNwYWNpbmdSYXRpby5tYXgpCiAgc29mdG1heCArPSAiPGxpPlNsaWdodCBicm93IHRyaW1taW5nIHRvd2FyZCBjZW50ZXIgY2FuIHZpc3VhbGx5IHJlZHVjZSB3aWRlIHNwYWNpbmc8L2xpPiI7CgppZiAoaW50ZXJjYW50aGFsUmF0aW8gPCBpZGVhbFJhbmdlcy5pbnRlcmNhbnRoYWxSYXRpby5taW4pCiAgc29mdG1heCArPSAiPGxpPlVzZSBuZXV0cmFsIGxpZ2h0aW5nIHRvIGF2b2lkIGNhc3RpbmcgaGFyc2ggaW5uZXItZXllIHNoYWRvd3M8L2xpPiI7CgppZiAobG93ZXJUaGlyZFBjdCA+IGlkZWFsUmFuZ2VzLmxvd2VyVGhpcmRQY3QubWF4KQogIHNvZnRtYXggKz0gIjxsaT5TaG9ydGVyIGJlYXJkIGxlbmd0aCBjYW4gcmVkdWNlIGVsb25nYXRlZCBsb3dlci10aGlyZCBlZmZlY3Q8L2xpPiI7CgppZiAoY2hlZWtib25lUmF0aW8gPiBpZGVhbFJhbmdlcy5jaGVla2JvbmVSYXRpby5tYXgpCiAgc29mdG1heCArPSAiPGxpPkF2b2lkIG92ZXJseSBob2xsb3cgY2hlZWsgbGlnaHRpbmcg4oCUIGl0IGNhbiBleGFnZ2VyYXRlIGdhdW50IGxvb2s8L2xpPiI7CgppZiAobW91dGhUb0ZhY2VXaWR0aCA8IGlkZWFsUmFuZ2VzLm1vdXRoVG9GYWNlV2lkdGgubWluKQogIHNvZnRtYXggKz0gIjxsaT5TbWlsZSB0cmFpbmluZyB0byBpbmNyZWFzZSB2aXNpYmxlIG1vdXRoIHdpZHRoIGluIHBob3RvczwvbGk+IjsKCmlmIChsaXBIZWlnaHRSYXRpbyA8IGlkZWFsUmFuZ2VzLmxpcEhlaWdodFJhdGlvLm1pbikKICBzb2Z0bWF4ICs9ICI8bGk+SHlkcmF0aW9uICsgbGlwIGNhcmUgdG8gZW5oYW5jZSBuYXR1cmFsIGxpcCB2b2x1bWU8L2xpPiI7CgppZiAoRVNSID4gaWRlYWxSYW5nZXMuRVNSLm1heCkKICBzb2Z0bWF4ICs9ICI8bGk+U2xpZ2h0IHNxdWludCBleHByZXNzaW9uIHJlZHVjZXMgc2NsZXJhbCBleHBvc3VyZSB2aXN1YWxseTwvbGk+IjsKCmlmIChjYW50aGFsVGlsdCA+IGlkZWFsUmFuZ2VzLmNhbnRoYWxUaWx0Lm1heCkKICBzb2Z0bWF4ICs9ICI8bGk+UmVsYXggYnJvdyBwb3NpdGlvbiB0byBhdm9pZCBvdmVybHkgZm9yY2VkIGFuZ3VsYXIgZXhwcmVzc2lvbjwvbGk+IjsKCgppZiAoc29mdG1heCA9PT0gIjxoMz5Tb2Z0bWF4eGluZyBUaXBzOjwvaDM+PHVsPiIpCiAgc29mdG1heCArPSAiPGxpPk1haW50YWluIGxvdyBib2R5IGZhdCBhbmQgZ29vZCBsaWdodGluZyDigJQgeW91J3JlIGFscmVhZHkgb3B0aW1pemVkPC9saT4iOwoKICAKCnNvZnRtYXggKz0gIjwvdWw+IjsKCgoKbWV0cmljcy5pbm5lckhUTUwgPSBgCjxoMz5Zb3VyIFJhdGlvczo8L2gzPgoKJHtzbGlkZXJIVE1MKCJGV0hSIiwgRldIUiwgIkZXSFIiKX0KJHtzbGlkZXJIVE1MKCJNaWRmYWNlIFJhdGlvIiwgbWlkZmFjZVJhdGlvLCAibWlkZmFjZSIpfQoke3NsaWRlckhUTUwoIkVTUiIsIEVTUiwgIkVTUiIpfQoke3NsaWRlckhUTUwoIkNoaW46UGhpbHRydW0iLCBjaGluUGhpbCwnY2hpblBoaWwnKX0KJHtzbGlkZXJIVE1MKCJDYW50aGFsIFRpbHQgwrAiLCBjYW50aGFsVGlsdCwnY2FudGhhbFRpbHQnKX0KJHtzbGlkZXJIVE1MKCJFeWUgQXNwZWN0IFJhdGlvIiwgZXllQXNwZWN0LCAiZXllQXNwZWN0Iil9CiR7c2xpZGVySFRNTCgiTG93ZXIgVGhpcmQgJSIsIGxvd2VyVGhpcmRQY3QsICJsb3dlclRoaXJkUGN0Iil9CiR7c2xpZGVySFRNTCgiQ2hlZWtib25lIFJhdGlvIiwgY2hlZWtib25lUmF0aW8sICJjaGVla2JvbmVSYXRpbyIpfQoKPGhyPgoKJHtzbGlkZXJIVE1MKCJJbnRlcmNhbnRoYWwgUmF0aW8iLCBpbnRlcmNhbnRoYWxSYXRpbywgImludGVyY2FudGhhbFJhdGlvIil9CiR7c2xpZGVySFRNTCgiRXllIHRvIEZhY2UgV2lkdGgiLCBleWVUb0ZhY2VXaWR0aCwgImV5ZVRvRmFjZVdpZHRoIil9CiR7c2xpZGVySFRNTCgiTm9zZSB0byBGYWNlIFdpZHRoIiwgbm9zZVRvRmFjZVdpZHRoLCAibm9zZVRvRmFjZVdpZHRoIil9CiR7c2xpZGVySFRNTCgiTW91dGggdG8gRmFjZSBXaWR0aCIsIG1vdXRoVG9GYWNlV2lkdGgsICJtb3V0aFRvRmFjZVdpZHRoIil9CiR7c2xpZGVySFRNTCgiSmF3IHRvIENoZWVrYm9uZSIsIGphd1RvQ2hlZWtib25lLCAiamF3VG9DaGVla2JvbmUiKX0KJHtzbGlkZXJIVE1MKCJQaGlsdHJ1bSBSYXRpbyIsIHBoaWx0cnVtUmF0aW8sICJwaGlsdHJ1bVJhdGlvIil9CiR7c2xpZGVySFRNTCgiTGlwIEhlaWdodCBSYXRpbyIsIGxpcEhlaWdodFJhdGlvLCAibGlwSGVpZ2h0UmF0aW8iKX0KJHtzbGlkZXJIVE1MKCJFeWUgU3BhY2luZyBSYXRpbyIsIGV5ZVNwYWNpbmdSYXRpbywgImV5ZVNwYWNpbmdSYXRpbyIpfQoke3NsaWRlckhUTUwoIkNoaW4gSGVpZ2h0IFJhdGlvIiwgY2hpbkhlaWdodFJhdGlvLCAiY2hpbkhlaWdodFJhdGlvIil9CiR7c2xpZGVySFRNTCgiRmFjaWFsIFN5bW1ldHJ5Iiwgc3ltbWV0cnksICJzeW1tZXRyeSIpfQo8aHI+Cgoke3NsaWRlckhUTUwoIkVhciBGbGFyZSBSYXRpbyIsIGVhckZsYXJlUmF0aW8sICJlYXJGbGFyZVJhdGlvIil9CiR7c2xpZGVySFRNTCgiQnJvdyBUaGlja25lc3MgUmF0aW8iLCBicm93VGhpY2tuZXNzUmF0aW8sICJicm93VGhpY2tuZXNzUmF0aW8iKX0KJHtzbGlkZXJIVE1MKCJCcm934oCTRXllIERpc3RhbmNlIFJhdGlvIiwgYnJvd0V5ZVJhdGlvLCAiYnJvd0V5ZVJhdGlvIil9CiR7c2xpZGVySFRNTCgiTm9zZSBQcm9qZWN0aW9uIFJhdGlvIiwgbm9zZVByb2plY3Rpb25SYXRpbywgIm5vc2VQcm9qZWN0aW9uUmF0aW8iKX0KJHtzbGlkZXJIVE1MKCJMb3dlciBGYWNlIFdpZHRoIFJhdGlvIiwgbG93ZXJGYWNlV2lkdGhSYXRpbywgImxvd2VyRmFjZVdpZHRoUmF0aW8iKX0KJHtzbGlkZXJIVE1MKCJGb3JlaGVhZCBIZWlnaHQgUmF0aW8iLCBmb3JlaGVhZEhlaWdodFJhdGlvLCAiZm9yZWhlYWRIZWlnaHRSYXRpbyIpfQoke3NsaWRlckhUTUwoIkJyb3cgU3ltbWV0cnkgUmF0aW8iLCBicm93U3ltbWV0cnlSYXRpbywgImJyb3dTeW1tZXRyeVJhdGlvIil9CiR7c2xpZGVySFRNTCgiRXllIFZlcnRpY2FsIE9wZW5uZXNzIiwgZXllVmVydGljYWxSYXRpbywgImV5ZVZlcnRpY2FsUmF0aW8iKX0KJHtzbGlkZXJIVE1MKCJOb3NlIExlbmd0aCBSYXRpbyIsIG5vc2VMZW5ndGhSYXRpbywgIm5vc2VMZW5ndGhSYXRpbyIpfQoke3NsaWRlckhUTUwoIk1vdXRoIEhlaWdodCBSYXRpbyIsIG1vdXRoSGVpZ2h0UmF0aW8sICJtb3V0aEhlaWdodFJhdGlvIil9CiR7c2xpZGVySFRNTCgiQ3VwaWQncyBCb3cgUmF0aW8iLCBjdXBpZEJvd1JhdGlvLCAiY3VwaWRCb3dSYXRpbyIpfQoke3NsaWRlckhUTUwoIkluZnJhb3JiaXRhbCBEZXB0aCBSYXRpbyIsIGluZnJhb3JiaXRhbFJhdGlvLCAiaW5mcmFvcmJpdGFsUmF0aW8iKX0KJHtzbGlkZXJIVE1MKCJDaGVlayBIb2xsb3cgUmF0aW8iLCBjaGVla0hvbGxvd1JhdGlvLCAiY2hlZWtIb2xsb3dSYXRpbyIpfQoke3NsaWRlckhUTUwoIkNoaW4gV2lkdGggUmF0aW8iLCBjaGluV2lkdGhSYXRpbywgImNoaW5XaWR0aFJhdGlvIil9CiR7c2xpZGVySFRNTCgiRmFjaWFsIENvbXBhY3RuZXNzIiwgY29tcGFjdG5lc3NSYXRpbywgImNvbXBhY3RuZXNzUmF0aW8iKX0KJHtzbGlkZXJIVE1MKCJFeWUgVGlsdCBTeW1tZXRyeSIsIGV5ZVRpbHRTeW1tZXRyeVJhdGlvLCAiZXllVGlsdFN5bW1ldHJ5UmF0aW8iKX0KJHtzbGlkZXJIVE1MKCJKYXcgQ3VydmUgUmF0aW8iLCBqYXdDdXJ2ZVJhdGlvLCAiamF3Q3VydmVSYXRpbyIpfQoke3NsaWRlckhUTUwoIk9yYml0YWwgV2lkdGggUmF0aW8iLCBvcmJpdGFsV2lkdGhSYXRpbywgIm9yYml0YWxXaWR0aFJhdGlvIil9CiR7c2xpZGVySFRNTCgiQnJvdyBSaWRnZSBSYXRpbyIsIGJyb3dSaWRnZVJhdGlvLCAiYnJvd1JpZGdlUmF0aW8iKX0KCjxoMj5TQ09SRTogJHtmaW5hbFNjb3JlLnRvRml4ZWQoMil9IC8gMTA8L2gyPgpgOwpzdXJnZXJ5RGl2LmlubmVySFRNTCA9IHN1cmdlcnkgKyBzb2Z0bWF4OwpkcmF3R3JhcGgoZmluYWxTY29yZSk7Cmluc3RydWN0aW9ucy5pbm5lclRleHQgPSAiRG9uZSEgU2NvcmUgY2FsY3VsYXRlZC4gUmVzZXQgaWYgeW91IHdhbnQgYW5vdGhlciBnby4iOwp9IGNhdGNoIChlcnIpIHsKY29uc29sZS5lcnJvcihlcnIpOwppbnN0cnVjdGlvbnMuaW5uZXJUZXh0ID0gIkNhbGMgZmFpbGVkIHVwIOKAlCBwcm9iYWJseSBiYWQgcG9pbnRzLiBVbmRvIGxhc3Qgb3IgcmVzZXQuIjsKfQp9CmNvbnN0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1ldHJpY01vZGFsIik7CmNvbnN0IG1nY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1pbmlHcmFwaCIpLmdldENvbnRleHQoIjJkIik7CgpmdW5jdGlvbiBvcGVuTWV0cmljKGtleSwgdmFsdWUpIHsKCiAgY29uc3QgciA9IGlkZWFsUmFuZ2VzW2tleV07CiAgaWYgKCFyKSByZXR1cm47CgogIGNvbnN0IG1lYW4gPSAoci5taW4gKyByLm1heCkgLyAyOwogIGNvbnN0IHN0ZCA9IChyLm1heCAtIHIubWluKSAvIDI7CgogIGNvbnN0IHogPSAodmFsdWUgLSBtZWFuKSAvIHN0ZDsKICBjb25zdCBwZXJjZW50aWxlID0gKDAuNSAqICgxICsgZXJmKHogLyBNYXRoLnNxcnQoMikpKSkgKiAxMDA7CgogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtZXRyaWNUaXRsZSIpLmlubmVyVGV4dCA9IGtleTsKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWV0cmljVmFsdWUiKS5pbm5lckhUTUwgPQogICAgYDxzdHJvbmc+WW91ciBWYWx1ZTo8L3N0cm9uZz4gJHt2YWx1ZS50b0ZpeGVkKDMpfWA7CgogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJtZXRyaWNQZXJjZW50aWxlIikuaW5uZXJIVE1MID0KICAgIGA8c3Ryb25nPlBlcmNlbnRpbGU6PC9zdHJvbmc+ICR7cGVyY2VudGlsZS50b0ZpeGVkKDIpfSVgOwoKICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibWV0cmljRGVzY3JpcHRpb24iKS5pbm5lclRleHQgPQogICAgZ2V0TWV0cmljRXhwbGFuYXRpb24oa2V5LCB2YWx1ZSk7CgogIGRyYXdNaW5pR3JhcGgodmFsdWUsIG1lYW4sIHN0ZCk7CgogIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSAiZmxleCI7Cn0KCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjbG9zZU1ldHJpYyIpLm9uY2xpY2sgPSAoKSA9PiB7CiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKfTsKCmZ1bmN0aW9uIGRyYXdNaW5pR3JhcGgodmFsdWUsIG1lYW4sIHN0ZCkgewoKICBtZ2N0eC5jbGVhclJlY3QoMCwwLDQ1MCwyMjApOwoKICBtZ2N0eC5zdHJva2VTdHlsZT0iI2ZmZDg2YiI7CiAgbWdjdHguYmVnaW5QYXRoKCk7CgogIGZvcihsZXQgeD1tZWFuLTMqc3RkOyB4PD1tZWFuKzMqc3RkOyB4Kz0wLjAxKSB7CgogICAgbGV0IHB4PSgoeC0obWVhbi0zKnN0ZCkpLyg2KnN0ZCkpKjQyMCsxNTsKICAgIGxldCB5PU1hdGguZXhwKC1NYXRoLnBvdyh4LW1lYW4sMikvKDIqc3RkKnN0ZCkpOwogICAgbGV0IHB5PTE4MC0oeSoxMjApOwoKICAgIGlmKHg9PT1tZWFuLTMqc3RkKSBtZ2N0eC5tb3ZlVG8ocHgscHkpOwogICAgZWxzZSBtZ2N0eC5saW5lVG8ocHgscHkpOwogIH0KCiAgbWdjdHguc3Ryb2tlKCk7CgogIGxldCB1c2VyWD0oKHZhbHVlLShtZWFuLTMqc3RkKSkvKDYqc3RkKSkqNDIwKzE1OwoKICBtZ2N0eC5maWxsU3R5bGU9InJlZCI7CiAgbWdjdHguYmVnaW5QYXRoKCk7CiAgbWdjdHguYXJjKHVzZXJYLDE2MCw2LDAsTWF0aC5QSSoyKTsKICBtZ2N0eC5maWxsKCk7Cn0KCnVwbG9hZC5hZGRFdmVudExpc3RlbmVyKCJjaGFuZ2UiLCAoZSkgPT4gewpjb25zdCBmaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CmlmICghZmlsZSkgcmV0dXJuOwoKY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKcmVhZGVyLm9ubG9hZCA9IChldikgPT4gewppbWcgPSBuZXcgSW1hZ2UoKTsKaW1nLm9ubG9hZCA9ICgpID0+IHsKY2FudmFzLndpZHRoID0gaW1nLndpZHRoOwpjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodDsKY3R4LmRyYXdJbWFnZShpbWcsIDAsIDApOwpzdGFydEJ0bi5zdHlsZS5kaXNwbGF5ID0gImlubGluZS1ibG9jayI7Cmluc3RydWN0aW9ucy5pbm5lclRleHQgPSAiUGljIGxvYWRlZCEgQ2xpY2sgJ1N0YXJ0IFBsYWNpbmcgUG9pbnRzJyB3aGVuIHJlYWR5LiBab29tIGJyb3dzZXIgaWYgbmVlZGVkLiI7Cn07CmltZy5zcmMgPSBldi50YXJnZXQucmVzdWx0Owp9OwpyZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKfSk7CgpzdGFydEJ0bi5vbmNsaWNrID0gc3RhcnRQbGFjaW5nOwoKdW5kb0J0bi5vbmNsaWNrID0gdW5kb0xhc3Q7CgpyZXNldEJ0bi5vbmNsaWNrID0gKCkgPT4gewpwb2ludHMgPSBbXTsKY3VycmVudE1hcmtlciA9IDA7CmN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTsKcHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAiMCUiOwpzdGFydFBsYWNpbmcoKTsKfTsKCgpmdW5jdGlvbiByZW5kZXJTZWNvbmRhcnlTY29yZXMoaGFybW9ueSwgZGltb3JwaGlzbSwgYW5ndWxhcml0eSkgewoKICBjb25zdCBoYXJtb255QmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhhcm1vbnlCYXIiKTsKICBjb25zdCBkaW1vcnBoaXNtQmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImRpbW9ycGhpc21CYXIiKTsKICBjb25zdCBhbmd1bGFyaXR5QmFyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFuZ3VsYXJpdHlCYXIiKTsKZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhhcm1vbnlTY29yZSIpLmlubmVyVGV4dCA9CiAgKHR5cGVvZiBoYXJtb255ID09PSAibnVtYmVyIiAmJiAhaXNOYU4oaGFybW9ueSkpCiAgICA/IGhhcm1vbnkudG9GaXhlZCgyKQogICAgOiAiMC4wMCI7Cgpkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZGltb3JwaGlzbVNjb3JlIikuaW5uZXJUZXh0ID0KICAodHlwZW9mIGRpbW9ycGhpc20gPT09ICJudW1iZXIiICYmICFpc05hTihkaW1vcnBoaXNtKSkKICAgID8gZGltb3JwaGlzbS50b0ZpeGVkKDIpCiAgICA6ICIwLjAwIjsKCmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJhbmd1bGFyaXR5U2NvcmUiKS5pbm5lclRleHQgPQogICh0eXBlb2YgYW5ndWxhcml0eSA9PT0gIm51bWJlciIgJiYgIWlzTmFOKGFuZ3VsYXJpdHkpKQogICAgPyBhbmd1bGFyaXR5LnRvRml4ZWQoMikKICAgIDogIjAuMDAiOwogICAgY29uc29sZS5sb2coIkhhcm1vbnk6IiwgaGFybW9ueSwgdHlwZW9mIGhhcm1vbnkpOwpjb25zb2xlLmxvZygiRGltb3JwaGlzbToiLCBkaW1vcnBoaXNtLCB0eXBlb2YgZGltb3JwaGlzbSk7CmNvbnNvbGUubG9nKCJBbmd1bGFyaXR5OiIsIGFuZ3VsYXJpdHksIHR5cGVvZiBhbmd1bGFyaXR5KTsKCiAgaGFybW9ueUJhci5zdHlsZS53aWR0aCA9IChoYXJtb255ICogMTApICsgIiUiOwogIGRpbW9ycGhpc21CYXIuc3R5bGUud2lkdGggPSAoZGltb3JwaGlzbSAqIDEwKSArICIlIjsKICBhbmd1bGFyaXR5QmFyLnN0eWxlLndpZHRoID0gKGFuZ3VsYXJpdHkgKiAxMCkgKyAiJSI7Cn0KcmVuZGVyU2Vjb25kYXJ5U2NvcmVzKGhhcm1vbnlTY29yZSwgZGltb3JwaGlzbVNjb3JlLCBhbmd1bGFyaXR5U2NvcmUpOwoKZnVuY3Rpb24gY2hlZWtib25lU2NvcmUodmFsdWUsIHJhbmdlKSB7CiAgY29uc3QgbWlkcG9pbnQgPSAocmFuZ2UubWluICsgcmFuZ2UubWF4KSAvIDI7CiAgY29uc3QgaGFsZlJhbmdlID0gKHJhbmdlLm1heCAtIHJhbmdlLm1pbikgLyAyOwoKICBsZXQgbm9ybWFsaXplZCA9ICh2YWx1ZSAtIG1pZHBvaW50KSAvIGhhbGZSYW5nZTsKICBub3JtYWxpemVkID0gTWF0aC5tYXgoLTEsIE1hdGgubWluKG5vcm1hbGl6ZWQsIDEpKTsKCiAgcmV0dXJuICgobm9ybWFsaXplZCArIDEpIC8gMik7IC8vIDDigJMxIHNjYWxlCn0KZnVuY3Rpb24gZ2V0Q2FyZFNjb3Jlcyh7CiAgZmluYWxTY29yZSwKICBoYXJtb255LAogIGRpbW9ycGhpc20sCiAgYW5ndWxhcml0eSwKICBjaGVla2JvbmVTY29yZQp9KSB7CiAgcmV0dXJuIHsKICAgIG92ZXJhbGw6IE1hdGgucm91bmQoZmluYWxTY29yZSAqIDEwKSwKICAgIGphd2xpbmU6IE1hdGgucm91bmQoYW5ndWxhcml0eSAqIDEwKSwKICAgIGNoZWVrYm9uZXM6IE1hdGgucm91bmQoY2hlZWtib25lU2NvcmUgKiAxMCksCiAgICBoYXJtb255OiBNYXRoLnJvdW5kKGhhcm1vbnkgKiAxMCksCiAgICBtYXNjdWxpbml0eTogTWF0aC5yb3VuZChkaW1vcnBoaXNtICogMTApCiAgfTsKfQpmdW5jdGlvbiByZW5kZXJGaW5hbENhcmQoc2NvcmVzKSB7CgogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJvdmVyYWxsQ2FyZCIpLmlubmVyVGV4dCA9IHNjb3Jlcy5vdmVyYWxsOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJqYXdsaW5lQ2FyZCIpLmlubmVyVGV4dCA9IHNjb3Jlcy5qYXdsaW5lOwogIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJjaGVla2JvbmVDYXJkIikuaW5uZXJUZXh0ID0gc2NvcmVzLmNoZWVrYm9uZXM7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImhhcm1vbnlDYXJkIikuaW5uZXJUZXh0ID0gc2NvcmVzLmhhcm1vbnk7CiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIm1hc2N1bGluaXR5Q2FyZCIpLmlubmVyVGV4dCA9IHNjb3Jlcy5tYXNjdWxpbml0eTsKCn0KLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQogICBUT1RBTCBBUFBFQUwgQ0FMQ1VMQVRPUgogICA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovCgovLyAtLS0tIEhlaWdodCBTY29yaW5nIC0tLS0KZnVuY3Rpb24gaGVpZ2h0U2NvcmUoY20pIHsKICBpZiAoY20gPCAxNTApIHJldHVybiAzLjU7CiAgaWYgKGNtIDwgMTYwKSByZXR1cm4gNC41OwogIGlmIChjbSA8IDE2OCkgcmV0dXJuIDUuNTsKICBpZiAoY20gPCAxNzUpIHJldHVybiA2LjU7CiAgaWYgKGNtIDwgMTgyKSByZXR1cm4gNy41OwogIGlmIChjbSA8IDE4OCkgcmV0dXJuIDguMzsKICBpZiAoY20gPCAxOTUpIHJldHVybiA5OwogIHJldHVybiA5LjM7IC8vIHNvZnQgY2FwCn0KCi8vIC0tLS0gQm9keSBUeXBlIFNjb3JpbmcgLS0tLQpmdW5jdGlvbiBib2R5U2NvcmUodHlwZSkgewogIHN3aXRjaCAodHlwZSkgewogICAgY2FzZSAic2tpbm55IjogcmV0dXJuIDU7CiAgICBjYXNlICJza2lubnlmYXQiOiByZXR1cm4gNC41OwogICAgY2FzZSAibGVhbiI6IHJldHVybiA3OwogICAgY2FzZSAiYWVzdGhldGljIjogcmV0dXJuIDguNTsKICAgIGNhc2UgInN1cGVybXVzY3VsYXIiOiByZXR1cm4gODsKICAgIGNhc2UgImZhdCI6IHJldHVybiAzLjU7CiAgICBkZWZhdWx0OiByZXR1cm4gNTsKICB9Cn0KCi8vIC0tLS0gTWFpbiBBcHBlYWwgQ2FsY3VsYXRvciAtLS0tCmZ1bmN0aW9uIHRvdGFsQXBwZWFsKGZhY2VTY29yZSwgaGVpZ2h0Q20sIGJvZHlUeXBlLCBzb2NpYWwsIG1vbmV5KSB7CgogIGNvbnN0IGhTY29yZSA9IGhlaWdodFNjb3JlKGhlaWdodENtKTsKICBjb25zdCBiU2NvcmUgPSBib2R5U2NvcmUoYm9keVR5cGUpOwoKICAvLyBDbGFtcCB1c2VyIGlucHV0cyAx4oCTMTAKICBzb2NpYWwgPSBNYXRoLm1heCgxLCBNYXRoLm1pbigxMCwgc29jaWFsKSk7CiAgbW9uZXkgID0gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAsIG1vbmV5KSk7CgogIGxldCB0b3RhbCA9CiAgICAoZmFjZVNjb3JlICogMC40MCkgKwogICAgKGhTY29yZSAqIDAuMTUpICsKICAgIChiU2NvcmUgKiAwLjE1KSArCiAgICAoc29jaWFsICogMC4xNSkgKwogICAgKG1vbmV5ICogMC4xNSk7CgogIC8vIFNvZnQgZGltaW5pc2hpbmcgcmV0dXJucyBhYm92ZSA4LjUKICBpZiAodG90YWwgPiA4LjUpIHsKICAgIHRvdGFsID0gOC41ICsgKCh0b3RhbCAtIDguNSkgKiAwLjcpOwogIH0KCiAgLy8gSGFyZCByZWFsaXN0aWMgY2FwCiAgdG90YWwgPSBNYXRoLm1pbig5LjcsIHRvdGFsKTsKCiAgcmV0dXJuIHRvdGFsOwp9CgovLyAtLS0tIFVJIFRyaWdnZXIgLS0tLQpmdW5jdGlvbiBjYWxjdWxhdGVBcHBlYWwoKSB7CgogIC8vIFJlcGxhY2UgdGhpcyBpZiB5b3UgYWxyZWFkeSBzdG9yZSBmaW5hbCBmYWNlIHNjb3JlIHNvbWV3aGVyZQogIGNvbnN0IGZhY2VTY29yZSA9IHBhcnNlRmxvYXQod2luZG93LmZpbmFsU2NvcmUgfHwgNik7CgogIGNvbnN0IGhlaWdodENtID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiaGVpZ2h0SW5wdXQiKS52YWx1ZSk7CiAgY29uc3QgYm9keVR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiYm9keVR5cGUiKS52YWx1ZTsKICBjb25zdCBzb2NpYWwgICA9IHBhcnNlRmxvYXQoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInNvY2lhbElucHV0IikudmFsdWUpOwogIGNvbnN0IG1vbmV5ICAgID0gcGFyc2VGbG9hdChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgibW9uZXlJbnB1dCIpLnZhbHVlKTsKCiAgaWYgKGlzTmFOKGhlaWdodENtKSB8fCBpc05hTihzb2NpYWwpIHx8IGlzTmFOKG1vbmV5KSkgewogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFwcGVhbFJlc3VsdCIpLmlubmVySFRNTCA9CiAgICAgICI8c3BhbiBzdHlsZT0nY29sb3I6cmVkJz5QbGVhc2UgZmlsbCBhbGwgZmllbGRzIGNvcnJlY3RseS48L3NwYW4+IjsKICAgIHJldHVybjsKICB9CgogIGNvbnN0IHJlc3VsdCA9IHRvdGFsQXBwZWFsKGZhY2VTY29yZSwgaGVpZ2h0Q20sIGJvZHlUeXBlLCBzb2NpYWwsIG1vbmV5KTsKCiAgLy8gVGllciBMYWJlbAogIGxldCB0aWVyID0gIiI7CiAgaWYgKHJlc3VsdCA8IDUpIHRpZXIgPSAiQmVsb3cgQXZlcmFnZSI7CiAgZWxzZSBpZiAocmVzdWx0IDwgNi41KSB0aWVyID0gIkF2ZXJhZ2UiOwogIGVsc2UgaWYgKHJlc3VsdCA8IDcuNSkgdGllciA9ICJBdHRyYWN0aXZlIjsKICBlbHNlIGlmIChyZXN1bHQgPCA4LjUpIHRpZXIgPSAiSGlnaCBBcHBlYWwiOwogIGVsc2UgdGllciA9ICJFbGl0ZSBUaWVyIjsKCiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImFwcGVhbFJlc3VsdCIpLmlubmVySFRNTCA9CiAgICBgPGgyPlRvdGFsIEFwcGVhbDogJHtyZXN1bHQudG9GaXhlZCgyKX0vMTA8L2gyPgogICAgIDxwPiR7dGllcn08L3A+YDsKfQoKZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigia2V5ZG93biIsIGUgPT4gewppZiAoZS5rZXkgPT09ICJFc2NhcGUiICYmIGN1cnJlbnRNYXJrZXIgPiAwKSB7Cmluc3RydWN0aW9ucy5pbm5lclRleHQgPSAiQ2FuY2VsbGVkLiBDbGljayBSZXNldCBvciB1cGxvYWQgYWdhaW4uIjsKY3VycmVudE1hcmtlciA9IDA7CnBvaW50cyA9IFtdOwpjdHguZHJhd0ltYWdlKGltZywgMCwgMCk7CnByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gIjAlIjsKY2FudmFzLm9uY2xpY2sgPSBudWxsOwp9Cn0pOwoKZnVuY3Rpb24gdmFsaWRhdGVSYXRpb3MocmF0aW9zLCBpZGVhbFJhbmdlcykgewoKICBsZXQgaGFzRXJyb3IgPSBmYWxzZTsKCiAgZm9yIChsZXQga2V5IGluIHJhdGlvcykgewoKICAgIGNvbnN0IHZhbHVlID0gcmF0aW9zW2tleV07CgogICAgLy8gQ2hlY2sgdW5kZWZpbmVkIG9yIG51bGwKICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHZhbHVlID09PSBudWxsKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBNaXNzaW5nIHZhbHVlIGZvcjogJHtrZXl9YCk7CiAgICAgIGhhc0Vycm9yID0gdHJ1ZTsKICAgICAgY29udGludWU7CiAgICB9CgogICAgLy8gQ2hlY2sgTmFOCiAgICBpZiAoaXNOYU4odmFsdWUpKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBOYU4gZGV0ZWN0ZWQgaW46ICR7a2V5fWApOwogICAgICBoYXNFcnJvciA9IHRydWU7CiAgICAgIGNvbnRpbnVlOwogICAgfQoKICAgIC8vIENoZWNrIGlmIGlkZWFsIHJhbmdlIGV4aXN0cwogICAgaWYgKCFpZGVhbFJhbmdlc1trZXldKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoYOKdjCBNaXNzaW5nIGlkZWFsIHJhbmdlIGZvcjogJHtrZXl9YCk7CiAgICAgIGhhc0Vycm9yID0gdHJ1ZTsKICAgICAgY29udGludWU7CiAgICB9CgogIH0KCiAgaWYgKGhhc0Vycm9yKSB7CiAgICBjb25zb2xlLndhcm4oIuKaoO+4jyBGaXggdGhlIGFib3ZlIGVycm9ycyBiZWZvcmUgY2FsY3VsYXRpbmcuIik7CiAgICByZXR1cm4gZmFsc2U7CiAgfQoKICBjb25zb2xlLmxvZygi4pyFIEFsbCByYXRpb3MgdmFsaWQuIFNhZmUgdG8gY2FsY3VsYXRlLiIpOwogIHJldHVybiB0cnVlOwp9Cjwvc2NyaXB0PgoKPC9ib2R5Pgo8L2h0bWw+"))));

  </script>
</body>
</html>
